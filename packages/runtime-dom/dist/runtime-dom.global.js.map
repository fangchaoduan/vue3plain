{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/index.ts", "../../reactivity/src/effect.ts", "../../reactivity/src/baseHandler.ts", "../../reactivity/src/reactive.ts", "../../reactivity/src/computed.ts", "../../reactivity/src/watch.ts", "../../reactivity/src/ref.ts", "../../runtime-core/src/sequence.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/scheduler.ts", "../../runtime-core/src/componentProps.ts", "../../runtime-core/src/component.ts", "../../runtime-core/src/renderer.ts", "../../runtime-core/src/h.ts", "../../runtime-core/src/apiLifecycle.ts", "../src/nodeOps.ts", "../src/modules/attr.ts", "../src/modules/class.ts", "../src/modules/event.ts", "../src/modules/style.ts", "../src/patchProp.ts"],
  "sourcesContent": ["\nimport { createRenderer } from '@vue/runtime-core'\nimport { RenderOptions } from 'packages/runtime-core/src/renderer';\nimport { nodeOps } from \"./nodeOps\";\nimport { patchProp } from \"./patchProp\";\n\n\nconst renderOptions: RenderOptions = Object.assign(nodeOps, { patchProp })//domAPI \u5C5E\u6027api;\n//console.log('renderOptions--->', renderOptions)\n\n\n\n//createRenderer(renderOptions).render(h('h1','hello'),document.getElementById('app'));\nexport function render(vnode, container: HTMLElement) {\n  //\u5728\u521B\u5EFA\u6E32\u67D3\u5668\u7684\u65F6\u5019\u4F20\u5165\u9009\u9879;\n  createRenderer(renderOptions).render(vnode, container);\n}\nexport * from '@vue/runtime-core'", "//\u5165\u53C2\u662F\u5426\u662F\u5BF9\u8C61;\nexport const isObject = (value: any): boolean => {\n  return typeof value === 'object' && value !== null\n}\n\n//\u5165\u53C2\u662F\u5426\u662F\u5B57\u7B26\u4E32;\nexport const isString = (value: any): boolean => {\n  return typeof value === 'string'\n}\n\n//\u5165\u53C2\u662F\u5426\u662F\u6570\u5B57;\nexport const isNumber = (value: any): boolean => {\n  return typeof value === 'number'\n}\n\n//\u5165\u53C2\u662F\u5426\u662F\u65B9\u6CD5;\nexport const isFunction = (value: any): boolean => {\n  return typeof value === 'function'\n}\n\n//\u5165\u53C2\u662F\u5426\u662F\u6570\u7EC4;\nexport const isArray = Array.isArray;\n\n//\u628A\u7B2C\u4E00\u4E2A\u5165\u53C2\u8BBE\u7F6E\u4E3A\u539F\u578B,\u5E76\u4EE5\u6B64\u539F\u578B\u8FD4\u56DE\u4E00\u4E2A\u65B0\u5BF9\u8C61;\nexport const assign = Object.assign;\n\n//\u4F20\u5165\u4E00\u4E2A\u51FD\u6570\u6570\u7EC4,\u4F9D\u6B21\u6267\u884C\u91CC\u9762\u7684\u51FD\u6570;\nexport const invokeArrayFns = (fns: Array<Function>) => {\n  for (let index = 0; index < fns.length; index++) {\n    fns[index]()\n  }\n}\n\n//\u67E5\u770B\u4E00\u4E2A\u5C5E\u6027\u662F\u5426\u5728\u5BF9\u8C61\u539F\u578B\u4E0A;\nconst hasOwnProperty = Object.prototype.hasOwnProperty\n\n//\u5224\u65ADkey\u662F\u5426\u662Fvalue\u4E0A\u7684\u4E00\u4E2A\u5C5E\u6027;\nexport const hasOwn = (value: any, key: PropertyKey): boolean => hasOwnProperty.call(value, key)\n\n//ShapeFlags\u8868\u793A\u8282\u70B9\u81EA\u8EAB\u7C7B\u578B,\u5E76\u4E14\u5B50\u8282\u70B9\u662F\u6570\u7EC4\u8FD8\u662F\u5B57\u7B26\u4E32;\nexport const enum ShapeFlags {\n  ELEMENT = 1, //1<<0; //\u5143\u7D20; \n  FUNCTIONAL_COMPONENT = 2, //1<<1; //\u51FD\u6570\u5F0F\u7EC4\u4EF6;\n  STATEFUL_COMPONENT = 4, //1<<2; //\u72B6\u6001\u7EC4\u4EF6(\u6B63\u5E38\u7684\u9009\u9879\u5F0F\u7EC4\u4EF6);\n  TEXT_CHILDREN = 8, //1<<3; //;\n  ARRAY_CHILDREN = 16, //1<<4; //;\n  SLOTS_CHILDREN = 32, //1<<5; //;\n  TELEPORT = 64, //1<<6; //;\n  SUSPENSE = 128, //1<<7; //;\n  COMPONENT_SHOULD_KEEP_ALIVE = 256, //1<<8; //;\n  COMPONENT_KEPT_ALIVE = 512, //1<<9; //;\n  COMPONENT = 6 //COMPONENT = ShapeFlags.FUNCTIONAL_COMPONENT | ShapeFlags.STATEFUL_COMPONENT; //\u5373: COMPONENT = 2 | 4;//\u7EC4\u4EF6\u5305\u542B\u51FD\u6570\u5F0F\u7EC4\u4EF6\u4E0E\u72B6\u6001\u7EC4\u4EF6;\n}\n/* //\u4F4D\u8FD0\u7B97:&,|\u9002\u5408\u6743\u9650\u7684\u7EC4\u5408;\n//let user= \u589E\u52A0 | \u5220\u9664;//user&\u589E\u52A0 > 0\u5C31\u8BF4\u660E\u6709\u6743\u9650;\nconst \u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20 = ShapeFlags.ELEMENT | ShapeFlags.ARRAY_CHILDREN//1|16=17;\nconsole.log('\u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20--->',\u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20)\nconst \u662F\u5426\u5305\u542B\u5B50\u5143\u7D20\u6570\u7EC4 = ShapeFlags.ARRAY_CHILDREN & \u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20\nconsole.log('\u662F\u5426\u5305\u542B\u5B50\u5143\u7D20\u6570\u7EC4--->',\u662F\u5426\u5305\u542B\u5B50\u5143\u7D20\u6570\u7EC4) */\n\n//\u6A21\u677F\u8F6C\u6210\u865A\u62DF\u8282\u70B9\u7684\u52A8\u6001\u6807\u8BC6;\nexport const enum PatchFlags {\n  TEXT = 1, // \u52A8\u6001\u6587\u672C\u8282\u70B9\n  CLASS = 1 << 1, // \u52A8\u6001class\n  STYLE = 1 << 2, // \u52A8\u6001style\n  PROPS = 1 << 3, // \u9664\u4E86class\\style\u52A8\u6001\u5C5E\u6027\n  FULL_PROPS = 1 << 4, // \u6709key\uFF0C\u9700\u8981\u5B8C\u6574diff\n  HYDRATE_EVENTS = 1 << 5, // \u6302\u8F7D\u8FC7\u4E8B\u4EF6\u7684\n  STABLE_FRAGMENT = 1 << 6, // \u7A33\u5B9A\u5E8F\u5217\uFF0C\u5B50\u8282\u70B9\u987A\u5E8F\u4E0D\u4F1A\u53D1\u751F\u53D8\u5316\n  KEYED_FRAGMENT = 1 << 7, // \u5B50\u8282\u70B9\u6709key\u7684fragment\n  UNKEYED_FRAGMENT = 1 << 8, // \u5B50\u8282\u70B9\u6CA1\u6709key\u7684fragment\n  NEED_PATCH = 1 << 9, // \u8FDB\u884C\u975Eprops\u6BD4\u8F83, ref\u6BD4\u8F83\n  DYNAMIC_SLOTS = 1 << 10, // \u52A8\u6001\u63D2\u69FD\n  DEV_ROOT_FRAGMENT = 1 << 11, \n  HOISTED = -1, // \u8868\u793A\u9759\u6001\u8282\u70B9\uFF0C\u5185\u5BB9\u53D8\u5316\uFF0C\u4E0D\u6BD4\u8F83\u513F\u5B50\n  BAIL = -2 // \u8868\u793Adiff\u7B97\u6CD5\u5E94\u8BE5\u7ED3\u675F\n}", "export let activeEffect: ReactiveEffect | undefined = undefined;\n\n//\u505C\u6B62effect\u7684\u6536\u96C6;\n//\u6E05\u7A7A`\u6E90\u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027`\u5BF9\u8BE5`ReactiveEffect\u5B9E\u4F8B`\u7684\u6240\u6709\u5173\u8054;\n//\u544A\u77E5\u8BE5`ReactiveEffect\u5B9E\u4F8B`,\u5DF2\u7ECF\u6CA1\u6709\u4EFB\u4F55\u4E00\u4E2A`\u6E90\u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027`\u5F15\u7528\u4E86\u5B83;\nfunction cleanupEffect(effect: ReactiveEffect) {\n  const { deps } = effect//deps\u6536\u96C6\u7684\u662F\u4E0E\u8BE5`ReactiveEffect\u5B9E\u4F8B`\u5173\u8054\u7684\u6240\u6709`\u6E90\u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027\u5BF9\u5E94\u7684\u6240\u6709ReactiveEffect\u5B9E\u4F8B\u96C6\u5408Set`;\n\n  //\u76F8\u5F53\u4E8E\u4E0E\u8BE5`ReactiveEffect\u5B9E\u4F8B`\u5173\u8054\u7684\u6240\u6709`\u6E90\u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027`\u90FD\u6E05\u7A7A\u4E86\u5BF9\u4E8E\u8BE5`ReactiveEffect\u5B9E\u4F8B`\u7684\u5F15\u7528;\n  for (let index = 0; index < deps.length; index++) {\n    deps[index].delete(effect)\n    //\u5728`\u6E90\u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027\u5BF9\u5E94\u7684\u6240\u6709ReactiveEffect\u5B9E\u4F8B\u96C6\u5408Set`\u4E2D\u89E3\u9664\u5F53\u524DReactiveEffect\u5B9E\u4F8B,\u4EE5\u4FBF\u540E\u9762`ReactiveEffect\u5B9E\u4F8B.fn()`\u6267\u884C\u65F6,\u91CD\u65B0\u628A`\u8BE5ReactiveEffect\u5B9E\u4F8B`\u653E\u5230`\u6E90\u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027\u5BF9\u5E94\u7684\u6240\u6709ReactiveEffect\u5B9E\u4F8B\u96C6\u5408Set`\u4E2D;\n    //\u540C\u65F6,\u4E5F\u8BA9`\u6E90\u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027`\u53D8\u52A8\u540E,\u5728`\u6E90\u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027\u5BF9\u5E94\u7684\u6240\u6709ReactiveEffect\u5B9E\u4F8B\u96C6\u5408Set`\u627E\u4E0D\u5230\u8BE5`ReactiveEffect\u5B9E\u4F8B`,\u8FDB\u884C\u8BE5`ReactiveEffect\u5B9E\u4F8B.fn()`\u6267\u884C\u4E0D\u4E86;\n\n  }\n\n  effect.deps.length = 0\n  //\u6E05\u7A7A`ReactiveEffect\u5B9E\u4F8B.deps`,\u4EE5\u4FBF\u540E\u9762`ReactiveEffect\u5B9E\u4F8B.fn()`\u6267\u884C\u65F6,\u91CD\u65B0\u628A`\u6E90\u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027\u5BF9\u5E94\u7684\u6240\u6709ReactiveEffect\u5B9E\u4F8B\u96C6\u5408Set`\u653E\u5230`ReactiveEffect\u5B9E\u4F8B.deps`\u4E2D;\n  //\u76F8\u5F53\u4E8E\u544A\u77E5\u8BE5`ReactiveEffect\u5B9E\u4F8B`,\u5DF2\u7ECF\u6CA1\u6709\u4EFB\u4F55\u4E00\u4E2A`\u6E90\u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027`\u5F15\u7528\u4E86\u5B83;\n}\n\n//\u628A\u7528\u6237\u7684\u4E00\u6B21effect\u7684\u521B\u5EFA\u4E00\u4E2A\u5BF9\u5E94\u7684ReactiveEffect\u5B9E\u4F8B;\nexport class ReactiveEffect {\n  public parent: ReactiveEffect | null | undefined = null;//`\u8BE5ReactiveEffect\u5B9E\u4F8B\u5BF9\u5E94\u7684effect`\u7684\u7236effect\u5BF9\u5E94\u7684ReactiveEffect\u5B9E\u4F8B;\u9ED8\u8BA4\u6CA1\u7236\u8282\u70B9;\n  public deps: Array<Set<ReactiveEffect>> = [];\n  //\u8FD9\u91CC\u8868\u793A\u5728\u5B9E\u4F8B\u4E0A\u65B0\u589E\u4E86active\u5C5E\u6027;\n  public active: boolean = true;//effect\u7684\u6FC0\u6D3B\u72B6\u6001;\u9ED8\u8BA4\u662F\u6FC0\u6D3B\u72B6\u6001;\n  constructor(public fn: Function, public scheduler?: Function | undefined) {//\u7528\u6237\u4F20\u9012\u7684\u53C2\u6570\u4E5F\u4F1A\u653E\u5728this\u4E0A,\u76F8\u5F53\u4E8Ethis.fn=fn;\n  }\n  //run\u5C31\u662F\u6267\u884Ceffect;\n  run(): unknown {\n    //\u8FD9\u91CC\u8868\u793A\u5982\u679C\u662F\u975E\u6FC0\u6D3B\u7684\u60C5\u51B5,\u53EA\u9700\u8981\u6267\u884C\u51FD\u6570,\u4E0D\u9700\u8981\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6;\n    if (!this.active) {\n      return this.fn()\n    }\n\n    //\u8FD9\u91CC\u5C31\u8981\u4F9D\u8D56\u6536\u96C6\u4E86; \u6838\u5FC3\u5C31\u662F\u5C06\u5F53\u524D\u7684effect\u548C\u7A0D\u540E\u6E32\u67D3\u7684\u5C5E\u6027\u5173\u8054\u5728\u4E00\u8D77;\n    //1. \u5728\u6267\u884Crun()\u65F6,\u5982\u679C\u5F53\u524D\u7684ReactiveEffect\u5B9E\u4F8B\u4E3A\u6FC0\u6D3B\u72B6\u6001,\u90A3\u4E48\u5C31\u4F1A\u628A\u8BE5ReactiveEffect\u5B9E\u4F8B\u8D4B\u503C\u5230\u6A21\u5757\u4E2D\u5168\u5C40\u53D8\u91CFactiveEffect\u4E2D;\n    //2. \u5F53\u8C03\u7528this.fn()\u65F6,\u5C31\u4F1A\u6267\u884C\u4E00\u6B21\u7528\u6237\u4F20\u5165\u8FDB\u6765\u7684\u56DE\u8C03\u65B9\u6CD5;\n    //3. \u5728\u7528\u6237\u4F20\u5165\u8FDB\u6765\u7684\u56DE\u8C03\u65B9\u6CD5\u4E2D,\u5982\u679C\u6D89\u53CA\u5230\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684\u53D6\u503C,\u90A3\u4E48\u5C31\u5FC5\u5B9A\u5C31\u4F1A\u6267\u884C\u54CD\u5E94\u5F0F\u5BF9\u8C61\u4E2D\u7684get\u65B9\u6CD5;\n    //4. \u5728\u54CD\u5E94\u5F0F\u5BF9\u8C61\u4E2D\u7684get\u65B9\u6CD5\u4E2D,\u53EF\u4EE5\u62FF\u5230\u5F53\u524D\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684\u6E90\u5BF9\u8C61\u53CA\u5C5E\u6027\u540D\u53CA\u4EE3\u7406\u5BF9\u8C61,\u4EE5\u53CA\u6B64\u65F6\u503C\u4E3AReactiveEffect\u5B9E\u4F8B\u7684\u5168\u5C40\u53D8\u91CFactiveEffect,\u6B64\u65F6\u53EF\u4EE5\u628A\u8FD9\u51E0\u4E2A\u6570\u636E\u7ED9\u5173\u8054\u8D77\u6765;\n    //5. \u628A\u5168\u5C40\u53D8\u91CFactiveEffect\u4E0E\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61\u53CA\u5C5E\u6027\u540D\u53CA\u4EE3\u7406\u5BF9\u8C61\u5173\u8054\u5230\u5168\u5C40\u53D8\u91CFtargetMap,\u5E76\u5728\u5F53\u524DReactiveEffect\u5B9E\u4F8B\u7684deps\u5C5E\u6027\u4E2D\u8BB0\u5F55\u4E86[\u4E0E`\u5F53\u524DReactiveEffect\u5B9E\u4F8B\u81EA\u8EAB\u76F8\u5173\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61\u53CA\u5C5E\u6027\u540D`\u5173\u8054\u7684\u6240\u6709ReactiveEffect\u5B9E\u4F8B\u6240\u5728\u7684Set\u5B9E\u4F8B\u5BF9\u8C61];this.fn()\u5C31\u6267\u884C\u5B8C\u4E86;\n    //6. \u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61+\u5C5E\u6027\u540D+\u5168\u5C40\u53D8\u91CFtargetMap\u53EF\u4EE5\u627E\u5230`\u4E0E\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61+\u5C5E\u6027\u540D\u5173\u8054\u7684\u6240\u6709ReactiveEffect\u5B9E\u4F8B\u6240\u5728\u7684Set\u5B9E\u4F8B\u5BF9\u8C61`;\n    //7. ReactiveEffect\u5B9E\u4F8B\u53EF\u4EE5\u901A\u8FC7\u5B83\u81EA\u8EAB\u7684deps\u5C5E\u6027\u627E\u5230[\u4E0E`\u5F53\u524DReactiveEffect\u5B9E\u4F8B\u81EA\u8EAB\u76F8\u5173\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61\u53CA\u5C5E\u6027\u540D`\u5173\u8054\u7684\u6240\u6709ReactiveEffect\u5B9E\u4F8B\u6240\u5728\u7684Set\u5B9E\u4F8B\u5BF9\u8C61];\n    //8. this.fn()\u6267\u884C\u5B8C,\u628A\u5168\u5C40\u53D8\u91CFactiveEffect\u91CD\u65B0\u8BBE\u7F6E\u4E3Aundefined;\n    //9. \u800C\u5982\u679C\u54CD\u5E94\u5F0F\u6570\u636E\u6539\u53D8\u4E86,\u90A3\u4E48\u5C31\u5FC5\u5B9A\u4F1A\u8D70\u5230\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684set\u65B9\u6CD5\u4E2D;\n\n    //10. \u7528\u6237\u4E3B\u52A8\u6539\u4E86\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684\u67D0\u4E2A\u5C5E\u6027,\u90A3\u4E48\u5C31\u5FC5\u5B9A\u4F1A\u8D70\u5230\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684set\u65B9\u6CD5\u4E2D,\u6B64\u65F6\u53EF\u4EE5\u62FF\u5230\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61+\u5C5E\u6027\u540D+\u5168\u5C40\u53D8\u91CFtargetMap;\n    //11. \u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61+\u5C5E\u6027\u540D+\u5168\u5C40\u53D8\u91CFtargetMap\u53EF\u4EE5\u627E\u5230`\u4E0E\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61+\u5C5E\u6027\u540D\u5173\u8054\u7684\u6240\u6709ReactiveEffect\u5B9E\u4F8B\u6240\u5728\u7684Set\u5B9E\u4F8B\u5BF9\u8C61`;\n    //12. \u904D\u5386Set\u5B9E\u4F8B\u5BF9\u8C61,\u8BA9Set\u5B9E\u4F8B\u5BF9\u8C61\u4E2D\u7684\u6BCF\u4E2AReactiveEffect\u5B9E\u4F8B\u90FD\u6267\u884C\u4E00\u6B21run(),\u4E8E\u662F\u7B2C1\u6B65\u5230\u7B2C9\u6B65\u90FD\u4F1A\u91CD\u65B0\u6267\u884C\u4E00\u904D;//\u6545\u800C\u9700\u8981\u628A\u8BE5ReactiveEffect\u5B9E\u4F8B\u4E0E`\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61+\u5C5E\u6027\u540D+\u5168\u5C40\u53D8\u91CFtargetMap`\u7684\u5F15\u7528\u6E05\u9664\u4E00\u904D;\n    try {\n      this.parent = activeEffect\n      activeEffect = this\n\n      //\u8FD9\u91CC\u9700\u8981\u5728\u6267\u884C\u7528\u6237\u51FD\u6570\u4E4B\u524D\u5C06\u4E4B\u524D\u6536\u96C6\u7684\u5185\u5BB9\u6E05\u7A7A,activeEffect.deps = [Set<ReactiveEffect>,Set<ReactiveEffect>,...]\n      //console.log(\"cleanupEffect start\");\n      cleanupEffect(this)\n      //console.log(\"cleanupEffect end\");\n\n\n      return this.fn()//\u5F53\u7A0D\u540E\u8C03\u7528\u53D6\u503C\u64CD\u4F5C\u7684\u65F6\u5019,\u5C31\u53EF\u4EE5\u83B7\u53D6\u5230\u8FD9\u4E2A\u5168\u5C40\u7684activeEffect\u4E86;\n    } finally {\n      activeEffect = this.parent\n      this.parent = null//\u4E0D\u624B\u52A8\u6E05\u597D\u50CF\u4E5F\u6CA1\u95EE\u9898,\u4E0D\u8FC7\u597D\u50CFparent\u8FD8\u662F\u4F1A\u8BB0\u5F55\u65E7\u7684effect;\n    }\n  }\n\n  stop() {\n    if (this.active) {\n      this.active = false\n      cleanupEffect(this)//\u505C\u6B62effect\u7684\u6536\u96C6;\n    }\n  }\n}\ninterface runnerFunction {\n  (value: any): Function;\n  effect: ReactiveEffect;\n}\nexport function effect(fn: Function, option: { scheduler?: Function | undefined } = {}): runnerFunction {\n  //\u8FD9\u91CCfn\u53EF\u4EE5\u6839\u636E\u72B6\u6001\u53D8\u5316,\u91CD\u65B0\u6267\u884C,effect\u53EF\u4EE5\u5D4C\u5957\u7740\u5199;\n  const _effect = new ReactiveEffect(fn, option?.scheduler)//\u521B\u5EFA\u54CD\u5E94\u5F0F\u7684effect;\n  _effect.run()//\u9ED8\u8BA4\u5148\u6267\u884C\u4E00\u6B21;\n\n  const runner: runnerFunction = _effect.run.bind(_effect)//\u7ED1\u5B9Athis\u6307\u5411;\n  runner.effect = _effect //\u5C06ReactiveEffect\u5B9E\u4F8B\u6302\u8F7D\u5230runner\u51FD\u6570\u4E0A;\n  return runner\n}\n\n\n\n\n//targetMap\u7528\u6765\u8BB0\u5F55\u7A0B\u5E8F\u5168\u5C40\u4E2D\u6240\u6709`\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684\u6E90\u5BF9\u8C61\u4E2D\u7684\u67D0\u4E2A\u5C5E\u6027`\u5BF9\u5E94\u7684\u6240\u6709`effect\u5BF9\u5E94\u7684ReactiveEffect\u5B9E\u4F8B`\u76F8\u4E92\u4E4B\u95F4\u7684\u5173\u8054\u5173\u7CFB;\nconst targetMap: WeakMap<object, Map<PropertyKey, Set<ReactiveEffect>>> = new WeakMap()//\u5F31\u5F15\u7528\u662F\u4E3A\u4E86object\u88AB\u5E72\u6389\u540E,\u5B83\u5BF9\u5E94\u7684Map\u4E5F\u5C31\u53EF\u4EE5\u88AB\u53D6\u6D88\u5F15\u7528;\n//\u5B9E\u9645\u4E0A\u662F: \n//\u5BF9\u4E8E\u5DF2\u77E5\u5BF9\u8C61\u4E0E\u5C5E\u6027\u6765\u8BF4\u662F: \u5DF2\u77E5object+\u5DF2\u77E5PropertyKey+\u5168\u5C40\u53D8\u91CFtargetMap --> Set<ReactiveEffect>;\n//\u5BF9\u4E8E\u5DF2\u77E5ReactiveEffect\u5B9E\u4F8B\u6765\u8BF4\u662F: \u5DF2\u77E5ReactiveEffect\u5B9E\u4F8B+\u5168\u5C40\u53D8\u91CFtargetMap \u5FAA\u73AF\u904D\u5386\u4E8E object+PropertyKey\u4E2D\u6240\u6709\u7684Set<ReactiveEffect> --> \u5F97\u5230object+PropertyKey;\nexport function track(target: Object, type: 'get' | 'set', key: PropertyKey, thisReactiveEffect: ReactiveEffect | undefined = activeEffect) {\n  //\u5982\u679CactiveEffect\u6709\u4F20\u5165,\u5C31\u4F7F\u7528\u4F20\u5165\u7684;\u6CA1\u4F20\u5165,\u5C31\u4F7F\u7528\u5F53\u524D\u6A21\u5757\u7684activeEffect;\n  var activeEffect: ReactiveEffect | undefined = thisReactiveEffect || activeEffect//\u597D\u50CFts\u4E2D\u4E0D\u80FD\u76F4\u63A5\u4F7F\u7528\u4E0E\u672C\u5730\u53D8\u91CF\u540C\u540D\u7684\u5168\u5C40\u53D8\u91CF?\n  //\u5982\u679C\u53D8\u91CFactiveEffect\u6CA1\u503C,\u90A3\u4E48\u8BF4\u660E\u5F53\u524Dget\u65B9\u6CD5\u4E2D\u5E76\u6CA1\u6709\u5728effect\u4E2D;\n  if (!activeEffect) {\n    return\n  }\n\n  let depsMap: Map<PropertyKey, Set<ReactiveEffect>> | undefined = targetMap.get(target)\n  if (!depsMap) {\n    depsMap = new Map()\n    targetMap.set(target, depsMap)\n  }\n  let dep: Set<ReactiveEffect> | undefined = depsMap.get(key);//key -> name /age\n  if (!dep) {\n    dep = new Set()\n    depsMap.set(key, dep)\n  }\n  trackEffects(dep, activeEffect)\n}\n\nexport function trackEffects(dep: Set<ReactiveEffect> | undefined, thisReactiveEffect: ReactiveEffect | undefined = activeEffect) {\n  var activeEffect: ReactiveEffect | undefined = thisReactiveEffect || activeEffect//\u597D\u50CFts\u4E2D\u4E0D\u80FD\u76F4\u63A5\u4F7F\u7528\u4E0E\u672C\u5730\u53D8\u91CF\u540C\u540D\u7684\u5168\u5C40\u53D8\u91CF?\n\n  if (activeEffect) {\n\n    let shouldTrack: boolean = !dep.has(activeEffect)//\u53BB\u91CD\u4E86,\u5373\u5DF2\u7ECF\u6709\u4E86\u8BE5ReactiveEffect\u5B9E\u4F8B\u540E,\u540E\u7EED\u5C31\u4E0D\u518D\u653E\u5165set\u4E86;\n    if (shouldTrack) {\n      dep.add(activeEffect)\n      //\u5B58\u653E\u7684\u662F\u5C5E\u6027\u5BF9\u5E94\u7684Set,Set\u91CC\u6709\u591A\u4E2AReactiveEffect\u5B9E\u4F8B,activeEffect\u53EA\u662FSet\u91CC\u4E2D\u7684\u67D0\u4E2AReactiveEffect\u5B9E\u4F8B;// name:new Set();\n      activeEffect.deps.push(dep)//\u8BA9ReactiveEffect\u5B9E\u4F8B\u8BB0\u5F55\u4F4F\u5BF9\u5E94\u7684dep,\u7A0D\u540E\u6E05\u7406\u7684\u65F6\u5019\u4F1A\u7528\u5230;\n    }\n  }\n\n}\n\n\n\nexport function trigger(target: Object, type: 'get' | 'set', key: PropertyKey, value: unknown, oldValue: unknown, theWeakMap: WeakMap<object, Map<PropertyKey, Set<ReactiveEffect>>> = targetMap, thisReactiveEffect: ReactiveEffect | undefined = activeEffect): undefined {\n  //\u5982\u679CactiveEffect\u6709\u4F20\u5165,\u5C31\u4F7F\u7528\u4F20\u5165\u7684;\u6CA1\u4F20\u5165,\u5C31\u4F7F\u7528\u5F53\u524D\u6A21\u5757\u7684activeEffect;\n  var activeEffect: ReactiveEffect | undefined = thisReactiveEffect || activeEffect//\u597D\u50CFts\u4E2D\u4E0D\u80FD\u76F4\u63A5\u4F7F\u7528\u4E0E\u672C\u5730\u53D8\u91CF\u540C\u540D\u7684\u5168\u5C40\u53D8\u91CF?\n\n  //\u5982\u679CtargetMap\u6709\u4F20\u5165,\u5C31\u4F7F\u7528\u4F20\u5165\u7684;\u6CA1\u4F20\u5165,\u5C31\u4F7F\u7528\u5F53\u524D\u6A21\u5757\u7684targetMap;\n  var targetMap: WeakMap<object, Map<PropertyKey, Set<ReactiveEffect>>> = theWeakMap || targetMap\n\n  //alert(1)\n  const depsMap: Map<PropertyKey, Set<ReactiveEffect>> | undefined = targetMap?.get(target)//\u627E\u5230\u4E86\u4E0E\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61\u5173\u8054\u7684Map\u5B9E\u4F8B;\n  if (!depsMap) {\n    return //\u89E6\u53D1\u7684\u503C\u4E0D\u5728\u6A21\u5757\u4E2D\u4F7F\u7528;//\u5373\u8BE5\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61\u5E76\u6CA1\u6709\u4F7F\u7528\u8FC7effect;\n  }\n\n  let effects: Set<ReactiveEffect> | undefined = depsMap.get(key) //\u627E\u5230\u4E86\u8BE5\u54CD\u5E94\u5F0F\u5BF9\u8C61\u6E90\u5BF9\u8C61\u7684\u5C5E\u6027\u5173\u8054\u7684Set\u5B9E\u4F8B;\n\n  //\u6C38\u8FDC\u5728\u6267\u884C\u4E4B\u524D,\u5148\u62F7\u8D1D\u4E00\u4EFD,\u4E0D\u8981\u5173\u8054\u5F15\u7528\n  if (effects) {\n    triggerEffects(effects)\n  }\n\n}\n\nexport function triggerEffects(effects: Set<ReactiveEffect>) {\n  const effectList: Set<ReactiveEffect> = new Set(effects)\n  //\u5982\u679C\u4E0D\u62F7\u8D1D,\u4F1A\u5728effects.forEach()\u4E2D-->ReactiveEffect\u5B9E\u4F8B.run()\u4E2D-->cleanupEffect(this)\u4ECEeffects\u5220\u9664\u5F53\u524DReactiveEffect\u5B9E\u4F8B-->ReactiveEffect\u5B9E\u4F8B.fn()\u4E2D-->\u8BFB\u5230\u5C5E\u6027\u65F6\u5728track()\u4E2D\u91CD\u65B0\u5411effects\u6DFB\u52A0\u5F53\u524DReactiveEffect\u5B9E\u4F8B-->\u5BFC\u81F4effects.forEach()\u6C38\u8FDC\u6267\u884C\u4E0D\u5B8C;\n  //\u7C7B\u4F3C\u4E8E: const arr = [1]; arr.forEach((item) => { arr.length = 0;arr.push(1)});\n  //\u5982\u679C\u62F7\u8D1D,\u4F1A\u5728effectList.forEach()\u4E2D-->ReactiveEffect\u5B9E\u4F8B.run()\u4E2D-->cleanupEffect(this)\u4ECEeffects\u5220\u9664\u5F53\u524DReactiveEffect\u5B9E\u4F8B-->ReactiveEffect\u5B9E\u4F8B.fn()\u4E2D-->\u8BFB\u5230\u5C5E\u6027\u65F6\u5728track()\u4E2D\u91CD\u65B0\u5411effects\u6DFB\u52A0\u5F53\u524DReactiveEffect\u5B9E\u4F8B-->effectList.forEach()\u6267\u884C\u7ED3\u675F;\n\n  effectList.forEach((theReactiveEffect: ReactiveEffect) => {\n    //\u6211\u4EEC\u5728\u6267\u884Ceffect\u7684\u65F6\u5019,\u53C8\u8981\u6267\u884C\u81EA\u5DF1,\u90A3\u6211\u4EEC\u9700\u8981\u5C4F\u853D\u6389,\u4E0D\u8981\u65E0\u9650\u8C03\u7528;\n    if (theReactiveEffect !== activeEffect) {\n      //theReactiveEffect.run()\n      if (theReactiveEffect.scheduler) {\n        theReactiveEffect.scheduler()//\u5982\u679C\u7528\u6237\u4F20\u5165\u4E86\u8C03\u5EA6\u51FD\u6570,\u5219\u7528\u7528\u6237\u7684;\n      } else {\n        theReactiveEffect.run()//\u5426\u5219\u8C03\u7528\u7528\u6237\u7684\u7B2C\u4E00\u4E2A\u56DE\u8C03\u51FD\u6570,\u9ED8\u8BA4\u5237\u65B0\u89C6\u56FE;\n      }\n    }\n\n\n  })\n}\n//1) \u5148\u641E\u4E86\u4E00\u4E2A\u54CD\u5E94\u5F0F\u5BF9\u8C61 new Proxy;\n//2) effect\u9ED8\u8BA4\u6570\u636E\u53D8\u5316\u8981\u80FD\u66F4\u65B0,\u5148\u5C06\u6B63\u5728\u6267\u884C\u7684effect\u4F5C\u4E3A\u5168\u5C40\u53D8\u91CF,\u6E32\u67D3(\u53D6\u503C),\u5728get\u65B9\u6CD5\u4E2D\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6;\n//3) WeakMap<object, Map<PropertyKey, Set<ReactiveEffect>>>,\u5373\u505A\u4E86\u4E00\u4E2A\u5168\u5C40\u53D8\u91CFWeakMap<\u6E90\u5BF9\u8C61, Map<\u6E90\u5BF9\u8C61\u5C5E\u6027, Set<effect\u5BF9\u5E94\u5B9E\u4F8B>>>;\n//4) \u7A0D\u540E\u7528\u6237\u53D1\u751F\u6570\u636E\u53D8\u5316,\u4F1A\u901A\u8FC7\u5BF9\u8C61\u5C5E\u6027\u6765\u67E5\u627E\u5BF9\u5E94\u7684effect\u5BF9\u5E94\u5B9E\u4F8B\u96C6\u5408Set,\u627E\u5230effect\u5BF9\u5E94\u5B9E\u4F8B\u5168\u90E8\u6267\u884C;\n", "import { isObject } from '@vue/shared'\nimport { reactive } from './reactive'\nimport { activeEffect, track, trigger } from './effect'//\u5F15\u5165\u7684\u503C\u662F\u4E00\u4E2A\u53D8\u91CF,\u5B83\u53EF\u80FD\u4F1A\u53D8,\u53EF\u80FD\u4F1A\u662FReactiveEffect\u5B9E\u4F8B,\u4E5F\u53EF\u80FD\u662Fundefined;\nexport const enum ReactiveFlags {\n  IS_REACTIVE = '__v_isReactive'\n}\nexport const mutableHandlers = {\n  get(target: Object, key: PropertyKey, receiver: unknown): unknown {\n    //\u8FD9\u91CC\u53EF\u4EE5\u76D1\u63A7\u5230\u7528\u6237\u53D6\u503C\u4E86;\n\n    //\u6240\u6709\u88AB\u89E6\u53D1\u7684get\u65B9\u6CD5\u4E2D,\u90FD\u4F1A\u5224\u65AD\u4E00\u6B21key\u662F\u5426\u4E3AReactiveFlags.IS_REACTIVE,\u5982\u679C\u662F,\u5C31\u4E00\u5B9A\u8FD4\u56DEtrue;\n    //\u4EE3\u7406\u5BF9\u8C61\u4E0A\u5E76\u6CA1\u6709ReactiveFlags.IS_REACTIVE\u8FD9\u4E2A\u5C5E\u6027,\u4F46\u662F\u8BBF\u95EE\u4EE3\u7406\u5BF9\u8C61\u4E0A\u7684ReactiveFlags.IS_REACTIVE\u5C5E\u6027,\u4F1A\u5F97\u5230\u7C7B\u4F3C\u4E8E\u5C5E\u6027\u503C\u4E3Atrue\u7684\u6548\u679C;\n    if (key === ReactiveFlags.IS_REACTIVE) {\n      return true\n    }\n\n    //console.log('key--->', key)\n    //console.log('activeEffect--->', activeEffect)\n    //\u573A\u666F:\n    //\u5BF9\u8C61 -> \u591A\u4E2A\u5C5E\u6027 -> \u591A\u4E2Aeffect\n    //WeakMap={\u5BF9\u8C61Map:{\u5C5E\u6027string:effect\u7684Set\u96C6\u5408}}\n    //{\u5BF9\u8C61:{name:[]}}\n    //\u5355\u5411\u8BB0\u5F55;//\u5373\u5355\u5411\u6307\u7684\u662F \u5C5E\u6027\u8BB0\u5F55\u4E86ReactiveEffect\u5B9E\u4F8B;\n    //\u53CD\u5411\u8BB0\u5F55: \u5E94\u8BE5\u4E5F\u8BA9ReactiveEffect\u5B9E\u4F8B\u8BB0\u5F55\u5B83\u88AB\u90A3\u4E9B\u5BF9\u8C61\u7684\u90A3\u4E9B\u5C5E\u6027\u6536\u96C6\u8FC7;\n    track(target, `get`, key, activeEffect)\n\n\n    //\u5982\u679C\u8FD4\u56DE\u7684\u662F\u4E00\u4E2A\u5BF9\u8C61,\u90A3\u4E48\u8981\u8FD8\u8981\u8FDB\u884C\u4EE3\u7406;\n    const res = Reflect.get(target, key, receiver)\n    if (isObject(res)) {\n      return reactive(res)//\u6DF1\u5EA6\u4EE3\u7406\u5B9E\u73B0;\u6027\u80FD\u597D,\u53D6\u503C\u624D\u8FDB\u884C\u4EE3\u7406,\u800C\u4E0D\u662F\u4E00\u5F00\u59CB\u5C31\u4E00\u56E2\u4E71\u4EE3\u7406,\u9020\u6210\u521D\u59CB\u82B1\u9500\u5927;\n    }\n\n    return res\n  },\n  set(target: Object, key: PropertyKey, value: unknown, receiver: any): boolean {\n    //\u8FD9\u91CC\u53EF\u4EE5\u76D1\u63A7\u5230\u7528\u6237\u8BBE\u7F6E\u503C\u4E86;\n    const oldValue: unknown = target[key]//\u6B64\u65F6\u8FD8\u6CA1\u6539\u539F\u5BF9\u8C61,\u6240\u4EE5\u4ECE\u6E90\u5BF9\u8C61\u91CC\u53D6\u7684\u503C\u4F9D\u65E7\u662F\u8001\u503C;\n    const result = Reflect.set(target, key, value, receiver)\n\n    if (oldValue !== value) {//\u503C\u53D8\u5316\u4E86;\n      //\u8981\u66F4\u65B0;\n      trigger(target, `set`, key, value, oldValue)\n    }\n\n    return result\n  }\n}\n", "import { isObject } from \"@vue/shared\";\nimport { mutableHandlers, ReactiveFlags } from \"./baseHandler\";\n\n//\u7528\u6765\u8BB0\u5F55\u4E00\u4E2A\u5BF9\u8C61\u662F\u5426\u5DF2\u7ECF\u8BBE\u7F6E\u4E86\u4EE3\u7406,\u505A\u4E00\u4E2A\u7F13\u5B58,\u5982\u679C\u5DF2\u7ECF\u505A\u4E86\u4EE3\u7406,\u5C31\u76F4\u63A5\u8FD4\u56DE\u4E4B\u524D\u8BBE\u7F6E\u8FC7\u7684\u4EE3\u7406\u5BF9\u8C61;\n//1) \u5B9E\u73B0\u540C\u4E00\u4E2A\u5BF9\u8C61,\u4EE3\u7406\u591A\u6B21,\u8FD4\u56DE\u540C\u4E00\u4E2A\u4EE3\u7406;\nconst reactiveMap: WeakMap<object, object> = new WeakMap()//key\u53EA\u80FD\u662F\u5BF9\u8C61;\n\n//\u67E5\u770B\u4E00\u4E2A\u53D8\u91CF\u662F\u5426\u4E3A\u54CD\u5E94\u5F0F\u5BF9\u8C61\u4E2D\u6570\u636E;\nexport function isReactive(value): boolean {\n  return !!value?.[ReactiveFlags.IS_REACTIVE]\n}\n//1) \u5C06\u6570\u636E\u8F6C\u5316\u6210\u54CD\u5E94\u5F0F\u7684\u6570\u636E,reactive\u53EA\u80FD\u505A\u5BF9\u8C61\u7684\u4EE3\u7406;\nexport function reactive(target: Object): Object | undefined {\n  if (!isObject(target)) {\n    return\n  }\n  //\u82E5\u662F\u666E\u901A\u5BF9\u8C61\u8FDB\u884C\u4EE3\u7406,\u4F1A\u901A\u8FC7new Proxy\u4EE3\u7406\u4E00\u6B21;\n  //\u82E5\u662F\u4EE3\u7406\u5BF9\u8C61\u8FDB\u884C\u4EE3\u7406,\u53EF\u4EE5\u770B\u4E00\u4E0B\u4ED6\u6709\u6CA1\u6709\u88AB\u4EE3\u7406\u8FC7,\u5982\u679C\u8BBF\u95EE\u8FD9\u4E2A\u4EE3\u7406\u5BF9\u8C61,\u6709get\u65B9\u6CD5\u7684\u65F6\u95F4\u8BF4\u660E\u5C31\u8BBF\u95EE\u8FC7\u4E86;\n\n\n  const exisitingProxy = reactiveMap.get(target)\n  if (exisitingProxy) {\n    return exisitingProxy\n  }\n\n  //\u5982\u679C\u76EE\u6807\u662F\u4E00\u4E2A\u4EE3\u7406\u5BF9\u8C61,\u90A3\u4E48\u4E00\u5B9A\u88AB\u4EE3\u7406\u8FC7\u4E86,\u90A3\u4E48\u5C31\u4F1A\u8D70\u8BE5\u4EE3\u7406\u5BF9\u8C61\u7684get\u65B9\u6CD5;\n  //\u800C\u5982\u679C\u8BE5\u76EE\u6807\u5BF9\u8C61\u662Freactive\u751F\u6210\u7684\u4EE3\u7406\u5BF9\u8C61,\u90A3\u4E48\u8BBF\u95EEReactiveFlags.IS_REACTIVE\u5C5E\u6027\u65F6,\u5C31\u4E00\u5B9A\u4F1A\u8FD4\u56DEtrue;\n  if (target[ReactiveFlags.IS_REACTIVE]) {\n    return target\n  }\n\n  const proxy: Object = new Proxy(target, mutableHandlers)\n\n\n  reactiveMap.set(target, proxy)\n  return proxy\n}\n\n\n", "import { isFunction } from \"@vue/shared\"\nimport { activeEffect, ReactiveEffect, track, trackEffects, triggerEffects } from \"./effect\"\nclass ComputedRefImpl {\n  public effect: ReactiveEffect | null | undefined = null;//\u8BA1\u7B97\u5C5E\u6027\u5BF9\u5E94\u7684effect,\u5185\u90E8\u4F9D\u8D56\u4E8E`\u8BA1\u7B97\u5C5E\u6027getter\u65B9\u6CD5\u4E2D\u7528\u5230\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61`;\u5982\u679C`\u8BA1\u7B97\u5C5E\u6027getter\u65B9\u6CD5\u4E2D\u7528\u5230\u7684\u54CD\u5E94\u5F0F\u5BF9\u8C61`\u7684\u503C\u53D8\u4E86,\u90A3\u4E48\u5C06\u4F1A\u6267\u884C\u8BE5`\u8BA1\u7B97\u5C5E\u6027effect`;\n  public _dirty: boolean = true;//\u9ED8\u8BA4\u5E94\u8BE5\u53D6\u503C\u7684\u65F6\u5019\u8FDB\u5165\u8BA1\u7B97;\n  public __v_isReadonly: boolean = true;\n  public __v_isRef: boolean = true;\n  public _value: unknown;\n  public dep: Set<ReactiveEffect> = new Set();//\u7528\u6765\u8BB0\u5F55\u5F15\u7528\u5230\u4E86\u8BE5\u8BA1\u7B97\u5C5E\u6027\u7684effect;//\u5982\u679C\u8BA1\u7B97\u5C5E\u6027\u7684\u503C\u53D8\u52A8\u4E86,\u90A3\u4E48\u5C06\u4F1A\u8BA9\u8FD9\u4E9Beffect\u5217\u8868\u90FD\u6267\u884C\u4E00\u6B21;\n\n  constructor(getter: Function, public setter: Function) {\n\n    //\u6211\u4EEC\u5C06\u7528\u6237\u7684getter\u653E\u5230effect\u4E2D,\u8FD9\u91CC\u9762\u7684firnamw\u548Clastname\u5C31\u4F1A\u88AB\u8FD9\u4E2Aeffect\u6536\u96C6\u8D77\u6765;\n    this.effect = new ReactiveEffect(getter, () => {\n      //\u7A0D\u540E\u4F9D\u8D56\u7684\u5C5E\u6027\u53D8\u5316\u4F1A\u6267\u884C\u6B64\u8C03\u5EA6\u51FD\u6570;\n      //debugger\n\n      if (!this._dirty) {\n        this._dirty = true\n\n        //\u5B9E\u73B0\u4E00\u4E2A\u89E6\u53D1\u66F4\u65B0;\n        triggerEffects(this.dep)\n      }\n\n      //\u5230\u7B2CP9-32:09;\n    })\n  }\n\n  //\u7C7B\u4E2D\u7684\u5C5E\u6027\u8BBF\u95EE\u5668,\u5E95\u5C42\u5C31\u662FObject.definedProperty();\n  get value() {\n\n    //\u505A\u4F9D\u8D56\u6536\u96C6,\u7528\u8BA1\u7B97\u5C5E\u6027\u7684\u503C\u6536\u96C6\u5176\u5B83effect;\n    //track(this, 'get', 'value')\n\n    trackEffects(this.dep, activeEffect)\n\n    if (this._dirty) {//\u8BF4\u660E\u8FD9\u4E2A\u503C\u662F\u810F\u7684;\n      this._dirty = false//\u8BF4\u660E\u4E0D\u810F\u4E86,\u7528\u4E8E\u5C4F\u853D\u518D\u6B21\u53D6\u503C;\n      this._value = this.effect.run()\n    }\n    return this._value\n  }\n  set value(newValue) {\n    this.setter(newValue)\n  }\n}\nexport const computed = (getterOrOptions: Function | { get?: Function, set?: Function }) => {\n  const onlyGetter = isFunction(getterOrOptions)\n  let getter: Function\n  let setter: Function\n\n  if (onlyGetter) {\n    getter = getterOrOptions as Function\n    setter = () => { console.warn(`no set ;\u8BA1\u7B97\u5C5E\u6027\u6CA1\u6709\u8BBE\u7F6Eset\u65B9\u6CD5;`) }\n  } else {\n    getter = (getterOrOptions as { get?: Function, set?: Function })?.get || (() => { console.warn(`\u8BA1\u7B97\u5C5E\u6027\u6CA1\u6709\u8BBE\u7F6Eget\u65B9\u6CD5;`) });\n    setter = (getterOrOptions as { get?: Function, set?: Function })?.set || (() => { console.warn(`no set ;\u8BA1\u7B97\u5C5E\u6027\u6CA1\u6709\u8BBE\u7F6Eset\u65B9\u6CD5;`) });\n  }\n  return new ComputedRefImpl(getter, setter)\n}", "import { isFunction, isObject } from \"@vue/shared\";\nimport { ReactiveEffect } from \"./effect\";\nimport { isReactive } from \"./reactive\";\n\n//\u904D\u5386\u5730\u8BBF\u95EE\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684\u5C5E\u6027;\n//\u8003\u8651\u5982\u679C\u5BF9\u8C61\u4E2D\u6709\u5FAA\u73AF\u5F15\u7528\u7684\u95EE\u9898;\nfunction traversal(value, set: Set<Object> = new Set()) {\n  //\u7B2C\u4E00\u6B65\u9012\u5F52\u8981\u7528\u7EC8\u7ED3\u6761\u4EF6,\u4E0D\u662F\u5BF9\u8C61\u5C31\u4E0D\u518D\u9012\u5F52\u4E86;\n  if (!isObject(value)) {\n    return value //\u5982\u679C\u4E0D\u662F\u5BF9\u8C61,\u90A3\u4E48\u5C31\u8BF4\u660E\u53EA\u662F\u8BBF\u95EE\u4E86\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5185\u5BF9\u8C61\u7684\u5C5E\u6027\u503C,\u6B64\u65F6\u8FD4\u56DE\u51FA\u53BB\u662F\u539F\u59CB\u503C\u5C31\u597D\u4E86;\n  }\n\n  //\u6765\u5230\u8FD9\u91CC,\u5C31\u4E00\u5B9A\u662F\u5BF9\u8C61\u4E86;\n  //\u5982\u679C\u662F\u5BF9\u8C61,\u5E76\u4E14\u5DF2\u7ECF\u8BBF\u95EE\u8FC7\u4E86,\u5C31\u76F4\u63A5\u8FD4\u56DE\u5F53\u524D\u5BF9\u8C61\u503C;\n  if (set.has(value)) {\n    return value\n  }\n\n  //\u5148\u628A\u5F53\u524D\u5BF9\u8C61\u653E\u5230set\u4E2D,\u9632\u6B62\u5FAA\u73AF\u5F15\u7528;\n  set.add(value)\n  for (let key in value) {//value\u53EF\u80FD\u6709\u591A\u4E2A\u5C5E\u6027,\u5982a\u4E0Eb\u7B49...;\n    //console.log('key--->', key)\n    traversal(value[key], set);//\u8FD9\u91CC\u7684\u5C5E\u6027\u503C\u53EF\u80FD\u662F\u5BF9\u8C61,\u4E5F\u53EF\u80FD\u662F\u539F\u59CB\u503C;//\u8FD9\u91CC\u53EA\u662F\u8BBF\u95EE\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5185\u5BF9\u8C61\u7684\u5C5E\u6027\u503C,\u5E76\u4E0D\u9700\u8981\u8FD4\u56DE;\n    //\u56E0\u4E3A\u8D70\u5230\u8FD9\u4E00\u6B65,\u8BF4\u660E\u5916\u90E8\u4F20\u5165\u7684\u5FC5\u5B9A\u662F\u4E00\u4E2A\u5BF9\u8C61;\u6240\u4EE5\u9700\u8981\u8FD4\u56DE\u7684\u662F\u6574\u4E2A\u5BF9\u8C61,\u5373\u540E\u9762\u7684`return value`\u4E2D\u7684vaule\u5FC5\u5B9A\u4E3A\u5BF9\u8C61;\n  }\n\n  return value\n}\n\n//source\u662F\u7528\u6237\u4F20\u5165\u7684\u5BF9\u8C61,cb\u5C31\u662F\u5BF9\u5E94\u7684\u7528\u6237\u7684\u56DE\u8C03;\nexport function watch(source: Function | Object | undefined, cb: Function) {\n\n  let getter: Function;\n  if (isReactive(source)) {\n    //\u5BF9\u7528\u6237\u4F20\u5165\u7684\u6570\u636E \u8FDB\u884C \u5FAA\u73AF;(\u9012\u5F52\u5FAA\u73AF,\u53EA\u8981\u5FAA\u73AF\u5C31\u4F1A\u8BBF\u95EE\u5BF9\u8C61\u4E0A\u7684\u6BCF\u4E00\u4E2A\u5C5E\u6027,\u8BBF\u95EE\u5C5E\u6027\u7684\u65F6\u5019\u4F1A\u6536\u96C6effect);\n    //getter = () => source //\u76F8\u5F53\u4E8E`getter = () => { return source }`;//\u4F46\u662F\u6B64\u65F6\u5E76\u6CA1\u6709\u5BF9\u6570\u636E\u8FDB\u884C\u8BBF\u95EE,\u6536\u96C6\u4E0D\u4E86\u4F9D\u8D56;\n\n    //\u904D\u5386\u4E4B\u540E,\u5C31\u53EF\u4EE5\u4E86;\n    //\u9012\u5F52\u5FAA\u73AF\u5730\u8BBF\u95EE;\n    getter = () => {\n      return traversal(source)\n    }\n  } else if (isFunction(source)) {\n    getter = source as Function\n  } else {\n    return\n  }\n\n  let cleanup: Function | undefined\n  const onCleanup = (fn: Function | undefined) => {\n    cleanup = fn//\u4FDD\u5B58\u7528\u6237\u7684\u51FD\u6570;\n  }\n  let oldValue;\n  //\u6BCF\u6B21watch\u76D1\u542C\u5230\u7684\u503C\u53D8\u5316\u4E86,\u90FD\u4F1A\u8C03\u7528\u4E00\u4E2Ajob;\n  const job = () => {\n    if (cleanup) {\n      cleanup();//\u4E0B\u4E00\u6B21watch\u5F00\u59CB\u89E6\u53D1\u4E0A\u4E00\u6B21watch\u7684\u6E05\u7406;\n    }\n    const newValue = effect.run()\n    cb?.(newValue, oldValue, onCleanup)\n    oldValue = newValue\n  }\n  //\u5728effect\u4E2D\u8BBF\u95EE\u5C5E\u6027\u5C31\u4F1A\u4F9D\u8D56\u6536\u96C6\n  const effect = new ReactiveEffect(getter, job)//\u76D1\u63A7\u81EA\u5DF1\u6784\u9020\u7684\u51FD\u6570,\u53D8\u5316\u540E\u91CD\u65B0\u6267\u884Cjob();\n  oldValue = effect.run()\n}", "import { isArray, isObject } from \"@vue/shared\"\nimport { activeEffect, ReactiveEffect, trackEffects, triggerEffects } from \"./effect\"\nimport { reactive } from \"./reactive\"\n\n//\u5982\u679C\u662F\u5BF9\u8C61,\u5C31\u628A\u5BF9\u8C61\u8F6C\u6210\u54CD\u5E94\u5F0F\u5BF9\u8C61;\nfunction toReactive(value: unknown) {\n  return isObject(value) ? reactive(value as object) : value\n}\n\nclass RefImpl {\n  public dep: Set<ReactiveEffect> = new Set();\n  public _value: any;//_value\u662F\u5B58\u653E\u7ECF\u8FC7\u54CD\u5E94\u5F0F\u5904\u7406\u7684\u503C;\n  public __v_isRef: boolean = true;\n\n  //rawValue\u662F\u5B58\u653E\u7528\u6237\u4F20\u5165\u7684\u539F\u59CB\u503C;\n  constructor(public rawValue: unknown) {\n    this._value = toReactive(rawValue)\n  }\n  get value() {\n    trackEffects(this.dep, activeEffect)\n    return this._value\n  }\n  set value(newValue: unknown) {//watch;\n    if (newValue !== this.rawValue) {\n      this._value = toReactive(newValue)\n      this.rawValue = newValue\n\n      triggerEffects(this.dep)\n    }\n  }\n}\n\n\nexport function ref(value: unknown) {\n  return new RefImpl(value)\n}\n\n//\u4E5F\u5C31\u662F\u8BA9`\u5BF9\u8C61\u540D[\u5C5E\u6027\u540D].value`\u53EF\u4EE5\u8BBF\u95EE\u5230`\u5BF9\u8C61\u540D[\u5C5E\u6027\u540D]`;\n//\u901A\u8FC7\u54CD\u5E94\u5F0F\u5BF9\u8C61\u4E0E\u5C5E\u6027\u540D\u751F\u6210\u4E00\u4E2Aref\u5BF9\u8C61;\nclass ObjectRefImpl { //\u53EA\u662F\u5C06.value\u5C5E\u6027\u4EE3\u7406\u5230\u539F\u59CB\u7C7B\u578B\u4E0A;\n  constructor(public object: object, public key: PropertyKey) {\n\n  }\n  get value() {\n    return this.object[this.key]//\u8FD9\u91CC\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6;\n  }\n  set value(newValue) {\n    this.object[this.key] = newValue//\u8FD9\u91CC\u89E6\u53D1\u4F9D\u8D56\u7684effect\u5217\u8868;\n  }\n}\n\n//toRef\u628A\u54CD\u5E94\u5F0F\u6570\u636E\u7684\u67D0\u4E2A\u5C5E\u6027\u53D8\u6210ref\u5BF9\u8C61;\nexport function toRef(theObject: object, key: PropertyKey): ObjectRefImpl {\n  return new ObjectRefImpl(theObject, key)\n}\n\n//\u628A\u54CD\u5E94\u5F0F\u6570\u636E\u53D8\u6210ref\u5BF9\u8C61,\u53EF\u4EE5\u901A\u8FC7`.value`\u8C03\u7528`\u54CD\u5E94\u5F0F\u5BF9\u8C61\u5C5E\u6027`\u62FF\u5230\u5BF9\u5E94\u7684\u5C5E\u6027\u503C;\n//\u6BD4\u5982: `ref\u5BF9\u8C61[\u5C5E\u6027\u540D].value`\u53EF\u4EE5\u53D6\u5230`\u54CD\u5E94\u5F0F\u5BF9\u8C61[\u5C5E\u6027\u540D]`;\nexport function toRefs(object: object): object {\n  const result = isArray(object) ? new Array(object.length) : {}\n\n  for (const key in object) {\n    result[key] = toRef(object, key);\n  }\n\n  return result\n}\n\n//\u628Aref\u5BF9\u8C61\u53D8\u6210\u4EE3\u7406\u5BF9\u8C61,\u53EF\u4EE5\u901A\u8FC7`\u4EE3\u7406\u5BF9\u8C61\u5C5E\u6027`\u8C03\u7528`ref\u5BF9\u8C61\u5C5E\u6027.value`\u62FF\u5230\u5BF9\u5E94\u7684\u5C5E\u6027\u503C;\n//\u6BD4\u5982: `\u4EE3\u7406\u5BF9\u8C61\u540D[\u5C5E\u6027\u540D]`\u53EF\u4EE5\u53D6\u5230`ref\u5BF9\u8C61\u540D[\u5C5E\u6027\u540D].value`;\n//\u8FD9\u4E2Aapi\u4E00\u822C\u7528\u4E0D\u5230,\u4E00\u822C\u53EA\u5728vue\u5185\u90E8\u6E32\u67D3\u6A21\u7248\u65F6\u624D\u7528\u5230,\u7528\u4E8E\u7B80\u5316\u6A21\u7248\u6570\u636E\u7684\u586B\u5165;\nexport function proxyRefs(object: object) {\n  return new Proxy(object, {\n    get(target, key, recevier) {\n      const r = Reflect.get(target, key, recevier)\n      return r.__v_isRef ? r.value : r//\u662Fref\u7684\u8BDD,\u5C31\u5E2E\u5B83\u8FDB\u5165`.value`,\u4E0D\u662Fref,\u5C31\u76F4\u63A5\u8FD4\u56DE\u539F\u6765\u7684\u503C;\n    },\n    set(target, key, value, recevier) {\n      const oldValue = target[key]\n      if (oldValue.__v_isRef) {//\u8BF4\u660E\u662Fref;\n        oldValue.value = value\n        return true\n      } else {\n        return Reflect.set(target, key, value, recevier)\n      }\n    }\n  })\n}\n", "\n\n\n//\u8FD4\u56DE\u4EE3\u8868\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u7684\u89D2\u6807\u6570\u7EC4;\nexport function getSequence(arr: number[]): number[] {\n  //1)\u9ED8\u8BA4\u8FFD\u52A0;\n  //2)\u66FF\u6362;\n  //3)\u8BB0\u5F55\u6BCF\u4E2A\u4EBA\u7684\u524D\u9A71\u8282\u70B9;\n  //4)\u901A\u8FC7\u6700\u540E\u4E00\u9879\u8FDB\u884C\u56DE\u6EAF,\u628Aresult\u6BCF\u4E00\u9879\u7684\u503C\u6539\u5BF9;\n\n  const len = arr.length\n  const result = [0];//\u7ED3\u679C\u96C6,\u5B58\u653E\u6700\u6709\u6F5C\u529B\u7684\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u5BF9\u5E94\u7684\u89D2\u6807\u6570\u7EC4;//\u4EE5\u9ED8\u8BA4\u7B2C0\u4E2A\u4E3A\u57FA\u51C6\u6765\u505A\u5E8F\u5217;\n  const p = new Array(len).fill(0);//\u6700\u540E\u8981\u6807\u8BB0\u7D22\u5F15,\u5373\u5B58\u653E`\u5165\u53C2\u6570\u7EC4\u503C`\u5728`\u89D2\u6807\u7ED3\u679C\u96C6`\u4E2D`\u524D\u4E00\u9879\u5BF9\u5E94\u7684\u5165\u53C2\u6570\u7EC4\u7D22\u5F15`;\n\n  let resultLastIndex: number//\u8BB0\u5F55\u7ED3\u679C\u96C6\u91CC\u6700\u540E\u4E00\u9879\u7684\u89D2\u6807;\n  for (let i = 0; i < len; i++) {\n    const arrI = arr[i] //\u8868\u793A\u5F53\u524D\u5FAA\u73AF\u5230\u7684\u5165\u53C2\u6570\u7EC4\u9879;\n\n    //\u56E0\u4E3Avue\u91CC\u9762\u7684\u5E8F\u5217\u4E2D0-->\u610F\u5473\u7740\u6CA1\u6709\u610F\u4E49,\u80AF\u5B9A\u9700\u8981\u521B\u5EFA\u4E0E\u63D2\u5165;\n    if (arrI === 0) {\n      continue\n    }\n\n\n    resultLastIndex = result[result.length - 1]\n\n    if (arr[resultLastIndex] < arrI) {//\u6BD4\u8F83\u6700\u540E\u4E00\u9879\u548C\u5F53\u524D\u9879\u7684\u503C,\u5982\u679C\u6BD4\u6700\u540E\u4E00\u9879\u5927,\u5219\u5C06\u5F53\u524D\u7D22\u5F15\u653E\u5230\u7ED3\u679C\u96C6\u4E2D;\n      result.push(i)\n\n      p[i] = resultLastIndex//\u5F53\u524D\u653E\u5230\u672B\u5C3E\u7684\u8981\u8BB0\u4F4F\u4ED6\u524D\u9762\u7684\u90A3\u4E2A\u4EBA\u662F\u8C01;//\u5373\u5728`\u89D2\u6807\u7ED3\u679C\u96C6`\u4E2D`\u524D\u4E00\u9879\u5BF9\u5E94\u7684\u5165\u53C2\u6570\u7EC4\u7D22\u5F15`;\n      continue\n    }\n\n    //\u8FD9\u91CC\u9700\u8981\u901A\u8FC7\u4E8C\u5206\u67E5\u627E,\u5728\u7ED3\u679C\u96C6\u4E2D\u627E\u5230\u6BD4\u5F53\u524D\u503C\u5927\u7684,\u7528\u5F53\u524D\u503C\u7684\u7D22\u5F15\u5C06\u5176\u66FF\u6362\u6389;\n    //\u9012\u589E\u5E8F\u5217,\u91C7\u7528\u4E8C\u5206\u67E5\u627E\u662F\u6700\u5FEB\u7684;\n    let start = 0;//\u8BB0\u5F55\u7ED3\u679C\u96C6\u4E8C\u5206\u67E5\u627E\u5F00\u59CB\u89D2\u6807;\n    let end = result.length - 1;//\u8BB0\u5F55\u7ED3\u679C\u96C6\u4E8C\u5206\u67E5\u627E\u672B\u5C3E\u89D2\u6807;\n    let middle;//\u8BB0\u5F55\u7ED3\u679C\u96C6\u4E8C\u5206\u67E5\u627E\u4E2D\u95F4\u503C(\u5373\u5F53\u524D\u8981\u6BD4\u5BF9\u7684\u503C);\n    for (; start < end;) {//start===end\u7684\u65F6\u5019\u5C31\u505C\u6B62\u4E86; .. //\u8FD9\u4E2A\u4E8C\u5206\u67E5\u627E\u662F\u5728\u627E\u7D22\u5F15;\n      middle = ((start + end) / 2) | 0//\u5411\u4E0B\u53D6\u6574,\u5728`((start + end) / 2)>=0`\u65F6,`((start + end) / 2) | 0`\u76F8\u5F53\u4E8E`Math.floor(((start + end) / 2))`;\n      //result[middle]\u8868\u793A\u5F53\u524D\u7ED3\u679C\u96C6\u4E2D\u5B58\u653E\u7684\u67D0\u4E2A\u5165\u53C2\u6570\u7EC4\u7684\u89D2\u6807;\n      //arr[result[middle]]\u8868\u793A\u67D0\u4E2A\u5165\u53C2\u6570\u7EC4\u7684\u503C;\n      //1 2 3 4 middle 6 7 8 9 ;  6;\n      if (arr[result[middle]] < arrI) {\n        //\u6BD4\u5F53\u524D\u503C\u5C0F,\u8BF4\u660E\u8981\u5411\u53F3\u5373\u5411\u540E\u67E5\u627E;\n        //\u6240\u4EE5\u628A\u4E0B\u6B21\u67E5\u627E\u7684\u7ED3\u679C\u96C6\u4E8C\u5206\u67E5\u627E\u5F00\u59CB\u89D2\u6807\n        start = middle + 1\n      } else {\n        end = middle\n      }\n    }\n    //\u627E\u5230\u4E2D\u95F4\u503C\u540E,\u9700\u8981\u505A\u66FF\u6362\u64CD\u4F5C;\n    if (arr[result[end]] > arrI) {\n      result[end] = i;//\u8FD9\u91CC\u7528\u5F53\u524D\u8FD9\u4E00\u9879,\u66FF\u6362\u6389\u5DF2\u6709\u7684\u6BD4\u5F53\u524D\u5927\u7684\u90A3\u4E00\u9879;\u66F4\u6709\u6F5C\u529B\u7684\u6211\u9700\u8981\u4ED6;\n\n      p[i] = result[end - 1]//\u8BB0\u4F4F\u5B83\u7684\u524D\u4E00\u4E2A\u4EBA\u662F\u8C01;//\u5373\u5728`\u89D2\u6807\u7ED3\u679C\u96C6`\u4E2D`\u524D\u4E00\u9879\u5BF9\u5E94\u7684\u5165\u53C2\u6570\u7EC4\u7D22\u5F15`;\n      //p[i]\u5176\u5B9E\u5C31\u7C7B\u4F3C\u4E8EarrI;\n      //result[end]\u662FarrI\u4E8E\u5165\u53C2\u6570\u7EC4\u7684\u7D22\u5F15;\n      //`end`\u662F`arrI\u4E8E\u5165\u53C2\u6570\u7EC4\u7684\u7D22\u5F15`\u5728\u7ED3\u679C\u96C6\u7684\u89D2\u6807;\n      //`end - 1`\u662F`arrI\u4E8E\u5165\u53C2\u6570\u7EC4\u7684\u7D22\u5F15`\u5728\u7ED3\u679C\u96C6\u7684\u524D\u4E00\u9879\u89D2\u6807;\n      //`result[end - 1]`\u662F`arrI\u4F4D\u4E8E\u7ED3\u679C\u96C6\u4E2D\u524D\u4E00\u9879\u503C\u4E8Earr\u4E2D\u7684\u89D2\u6807`;\n      //`arr[result[end - 1]]`\u662F`arrI\u4F4D\u4E8E\u7ED3\u679C\u96C6\u4E2D\u524D\u4E00\u9879\u503C`;\n      //`result[end - 1]`\u662F`arrI\u4F4D\u4E8E\u7ED3\u679C\u96C6\u4E2D\u524D\u4E00\u9879\u503C`\u5728arr\u4E2D\u7684\u89D2\u6807;\n    }\n\n  }\n\n  for (let i = result.length - 1, last = result[i]; i >= 0; last = p[last], i--) {//\u5012\u53D9\u8FFD\u6EAF;\n    result[i] = last//\u6700\u540E\u4E00\u9879\u662F\u786E\u5B9A\u7684;\n  }\n\n  //console.log('p--->', p)\n\n  return result\n}\n\n//const result = getSequence([5, 3, 4, 0]);\n//console.log('result--->', JSON.parse(JSON.stringify(result)))\n", "//type,\u5373\u8282\u70B9\u7C7B\u578B;props,\u5C5E\u6027;children,\u5B50\u8282\u70B9;\n\nimport { isArray, isObject, isString, PatchFlags, ShapeFlags } from \"@vue/shared\";\n\n\nexport const Text = Symbol('Text')//\u7528\u4E8Eh()\u51FD\u6570\u5185\u90E8\u521B\u5EFA\u6587\u672C\u7684\u6807\u8BC6;\nexport const Fragment = Symbol('Fragment')//\u7528\u4E8Eh()\u51FD\u6570\u5185\u90E8\u521B\u5EFAFragment\u7684\u6807\u8BC6,\u8868\u793A\u65E0\u7528\u7684\u6807\u7B7E,\u6CA1\u4EC0\u4E48\u5B9E\u9645\u610F\u4E49\u7684\u6807\u7B7E;\n\n//\u5224\u65AD\u4E00\u4E2A\u53D8\u91CF\u662F\u5426\u4E3A\u865A\u62DFDOM;\nexport function isVnode(value) {\n  return !!value?.__v_isVnode\n}\n\n//\u5224\u65AD\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u662F\u5426\u662F\u76F8\u540C\u8282\u70B9;\n//\u601D\u8DEF\u662F: 1) \u6807\u7B7E\u540D\u76F8\u540C; 2) key\u662F\u4E00\u6837\u7684;\nexport function isSameVnode(n1: VNode, n2: VNode) {\n  return (n1.type === n2.type) && (n1.key === n2.key)\n}\n\nexport type ComponentRender = () => VNode\nexport type ComponentSetup = (props?: object, context?: object) => (ComponentRender | object)\nexport type VueComponent = {\n  data?: () => (object);//vue2\u4E2Ddata\u53EF\u4EE5\u662F\u51FD\u6570\u6216\u5BF9\u8C61;\u4F46vue3\u4E2Ddata\u53EA\u80FD\u662F\u51FD\u6570;\n  render?: ComponentRender;\n  props?: (() => (object)) | object;\n  setup?: ComponentSetup;\n  [propName: string]: any;//\u53EF\u4EE5\u5B9A\u4E49\u591A\u4F59\u5C5E\u6027;\n}\n\n//\u865A\u62DF\u8282\u70B9\u7684type\u7C7B\u578B;\nexport type VNodeType = string | Symbol | VueComponent\n\n//\u865A\u62DF\u8282\u70B9\u7684props\u7C7B\u578B;\nexport declare type VNodeProps = undefined | null | {\n  class?: null | undefined | object,\n  [property: string]: any,\n}\n\n//\u865A\u62DF\u8282\u70B9\u7684children\u7C7B\u578B;//\u5982\u679C\u662F\u5BF9\u8C61,\u5219\u4EE3\u7406\u662F\u7EC4\u4EF6\u7684\u63D2\u69FD;\nexport type VNodeChildren = undefined | null | ConvertibleVNode | Array<ConvertibleVNode> | object\n\n//\u865A\u62DF\u8282\u70B9\u7C7B\u578B,\u53EF\u4EE5\u8BA4\u4E3A\u5B83\u4E0D\u5305\u542Bnull\u4E0Eundefined;\nexport type VNode = {\n  type: VNodeType;\n  props: VNodeProps;\n  children: VNodeChildren;\n  el: null | HTMLElement | Text;//\u865A\u62DF\u8282\u70B9\u4E0A\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9,\u540E\u7EEDdiff\u7B97\u6CD5\u4F18\u5316\u8981\u7528\u5230;\n  key: any;\n  __v_isVnode: boolean;\n  shapeFlag: number;\n  patchFlag: PatchFlags;//\u52A8\u6001\u865A\u62DF\u8282\u70B9\u6807\u8BC6;\n  dynamicChildren?: VNode[];//\u52A8\u6001\u8282\u70B9\u8282\u70B9\u7C7B\u578B;\n}\n\n//\u53EF\u8F6C\u5316\u4E3A\u865A\u62DF\u8282\u70B9\u7684\u7C7B\u578B;\nexport type ConvertibleVNode = string | VNode | number\n\n//\u865A\u62DF\u8282\u70B9\u6709\u5F88\u591A:\u7EC4\u4EF6\u7684,\u5143\u7D20\u7684,\u6587\u672C\u7684\u7B49; //h('h1);\nexport function createVnode(type: VNodeType, props: VNodeProps, children: VNodeChildren = null, patchFlag: PatchFlags = 0): VNode {\n  //\u7EC4\u5408\u65B9\u6848 shapeFlag;\n  //\u60F3\u77E5\u9053\u4E00\u4E2A\u5143\u7D20\u4E2D\u5305\u542B\u7684\u662F\u591A\u4E2A\u513F\u5B50\u8FD8\u662F\u4E00\u4E2A\u513F\u5B50;\n  //\u6807\u8BC6;\n\n  //debugger\n  let shapeFlag = isString(type) ?\n    ShapeFlags.ELEMENT :\n    isObject(type) ? ShapeFlags.STATEFUL_COMPONENT : 0;\n\n  //\u865A\u62DFDOM\u5C31\u662F\u4E00\u4E2A\u5BF9\u8C61,\u7528\u4E8Ediff\u7B97\u6CD5\u7B49\u7684\u4F18\u5316;\u771F\u5B9EDOM\u7684\u5C5E\u6027\u6BD4\u8F83\u591A;\n  const vnode: VNode = {//key;\n    type,\n    props,\n    children,\n    el: null,//\u865A\u62DF\u8282\u70B9\u4E0A\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9,\u540E\u7EEDdiff\u7B97\u6CD5\u4F18\u5316\u8981\u7528\u5230;\n    key: props?.['key'],\n    __v_isVnode: true,\n    shapeFlag,\n    patchFlag,\n  }\n  if (children) {\n    let type = 0;\n    if (isArray(children)) {\n      //\u8BF4\u660E\u662F\u5B50\u8282\u70B9\u5217\u8868;\n      type = ShapeFlags.ARRAY_CHILDREN;\n    } else if (isObject(children)) {\n      //\u8BF4\u660E\u662F\u7EC4\u4EF6\u7684\u63D2\u69FD;\n      type = ShapeFlags.SLOTS_CHILDREN;//\u8BF4\u660E\u8FD9\u4E2A\u7EC4\u4EF6\u662F\u5E26\u6709\u63D2\u69FD\u7684;\n    } else {\n      //\u8BF4\u660E\u662F\u5355\u72EC\u7684\u4E00\u4E2A\u5B50\u8282\u70B9;\n      children = String(children)\n      type = ShapeFlags.TEXT_CHILDREN\n    }\n    //vnode.shapeFlag |= type\n    vnode.shapeFlag = vnode.shapeFlag | type\n  }\n\n  if (currentBlock && vnode.patchFlag > 0) {\n    currentBlock.push(vnode)\n  }\n  return vnode\n\n}\n\n//\u521B\u5EFA\u865A\u62DF\u8282\u70B9,\u4E0EcreateVnode\u4E00\u6837;\n//\u628AcreateVnode\u91CD\u547D\u540D\u4E3AcreateElementVNode,\u5E76\u5BFC\u51FAcreateElementVNode;\nexport { createVnode as createElementVNode }\n\n//\u7528\u6765\u6536\u96C6\u591A\u4E2A\u52A8\u6001\u8282\u70B9\u7684\u6570\u7EC4;\nlet currentBlock: VNode[] | null = null;\n\n//\u7528\u4E00\u4E2A\u6570\u7EC4\u6765\u6536\u96C6\u591A\u4E2A\u52A8\u6001\u8282\u70B9;\nexport function openBlock() {\n  //\u7C7B\u4F3C\u4E8E: \u751F\u547D\u5468\u671F: \u7528instance \u6536\u96C6-> \u591A\u4E2Afn;\n  currentBlock = []\n\n}\nexport function createElementBlock(type: VNodeType, props: object, children: VNodeChildren, patchFlag: PatchFlags): VNode {\n  return setupBlock(createVnode(type, props, children, patchFlag))\n}\n\nfunction setupBlock(vnode: VNode): VNode {\n  vnode.dynamicChildren = currentBlock\n  currentBlock = null\n  return vnode;\n}\n/* //\u521B\u5EFA\u865A\u62DF\u8282\u70B9,\u5B9E\u9645\u4E0A\u5C31\u662FcreateVnode;\nexport function createElementVNode() {\n\n} */\nexport function toDisplayString(value: any) {\n  //debugger\n  return isString(value) ? value : value === undefined || value === null ? '' : isObject(value) ? JSON.stringify(value) : String(value)\n}", "const queue: Array<Function> = []//\u4EFB\u52A1\u961F\u5217,\u8981\u6267\u884C\u7684\u56DE\u8C03\u65B9\u6CD5\u7684\u961F\u5217;\nlet isFlushing = false;//\u662F\u5426\u6B63\u5728\u6267\u884C\u961F\u5217;\nconst resolvePromise = Promise.resolve()\n\nexport function queueJob(job: Function | null) {\n  if (!queue.includes(job)) {\n    queue.push(job)\n  }\n  if (!isFlushing) {\n    isFlushing = true\n    resolvePromise.then(() => {\n      isFlushing = false\n\n      const copy = queue.slice(0)//\u56E0\u4E3A\u5728\u6267\u884C\u65F6,\u53EF\u80FD\u4F1A\u628A\u4E00\u4E9B\u65B9\u6CD5\u4E22\u8FDBqueue\u4E2D,\u5BFC\u81F4queue\u6570\u7EC4\u957F\u5EA6\u4E00\u8D77\u53D8\u5316;\n      queue.length = 0//\u5148\u6E05\u7A7A\u4EFB\u52A1\u961F\u5217,\u56E0\u4E3A\u5728\u4E0B\u65B9\u7684\u5FAA\u73AF\u4E2D\u53EF\u80FD\u4F1A\u628A\u4E00\u4E9B\u4EFB\u52A1\u4E5F\u653E\u5230queue\u4E2D,\u5982\u679C\u662F\u653E\u540E\u9762,\u5C31\u4F1A\u4E22\u5931\u5FAA\u73AF\u65F6\u653E\u5230queue\u4E2D\u7684\u4EFB\u52A1;\n      for (let i = 0; i < copy.length; i++) {\n        const job = copy[i]\n        job()\n      }                                                     \n      //queue.length = 0\n      copy.length = 0\n    })\n  }\n}", "import { reactive } from \"@vue/reactivity\";\nimport { hasOwn } from \"@vue/shared\";\nimport { VueInstance } from \"./renderer\";\n\n//\u628A\u7528\u6237\u4F20\u5165\u7684rawProps\u4E2D\u7684\u5C5E\u6027\u533A\u5206\u6210props\u6216attrs,\u5E76\u6302\u8F7D\u5230\u5B9E\u4F8Binstance\u4E0A;\nexport function initProps(instance: VueInstance, rawProps: object) {\n  const props = {};//\u8981\u6302\u8F7D\u5230\u5B9E\u4F8B\u4E0Aprops;\n  const attrs = {};//\u8981\u6302\u8F7D\u5230\u5B9E\u4F8B\u4E0A\u7684attrs;\n  const options = instance.propsOptions || {}//\u7528\u6237\u8BBE\u7F6E\u7684props\u9009\u9879;\n\n  if (rawProps) {\n    for (const key in rawProps) {\n      const value = rawProps[key]\n      if (hasOwn(options, key)) {\n        props[key] = value\n      } else {\n        attrs[key] = value\n      }\n    }\n  }\n\n  //instance\u5B9E\u4F8B\u7684\u4E0Aprops\u5C31\u662F\u4E00\u4E2A\u65B0\u589E\u7684\u54CD\u5E94\u5F0F\u6570\u636E,\u5B83\u4F1A\u6536\u96C6instance.render()\u4E2D\u4F9D\u8D56\u7684effect;\n  instance.props = reactive(props)//\u7528\u7684\u5E94\u8BE5\u662FshallowReactive,\u4F46\u7531\u4E8E\u6CA1\u5199\u7528\u7684\u5E94\u8BE5\u662FshallowReactive\u8FD9\u4E2A\u65B9\u6CD5,\u6240\u4EE5\u7528reactive\u4EE3\u66FF\u5148;\n  instance.attrs = attrs;\n}\n\n//\u65B0\u65E7props\u662F\u5426\u53D1\u751F\u4E86\u53D8\u5316;\nexport const hasPropsChanged = (prevProps: object = {}, nextProps: object = {}): boolean => {\n  const nextKeys = Object.keys(nextProps)\n\n  //\u6BD4\u5BF9\u5C5E\u6027\u524D\u540E \u4E2A\u6570\u662F\u5426\u4E00\u81F4;\n  if (nextKeys.length !== Object.keys(prevProps).length) {\n    return true\n  }\n\n  //\u6BD4\u5BF9\u5C5E\u6027\u5BF9\u5E94\u7684\u503C\u662F\u5426\u4E00\u81F4; //\u5982: {a:{xxx:xxx}} \u4E0E {a:{qqq:qq}};\n  //vue2\u4E2D\u5B50\u7EC4\u4EF6\u4F20\u7ED9\u7236\u7EC4\u4EF6\u6D88\u606F: this.$emit('xxx',data);\u76F4\u63A5\u5C31\u4F20\u4E86\u4E2A\u65B0\u5BF9\u8C61;\n  for (let i = 0; i < nextKeys.length; i++) {\n    const key = nextKeys[i]\n    if (nextProps[key] !== prevProps[key]) {\n      return true\n    }\n  }\n  return false\n}\n\n//\u7528\u65B0\u7684props\u54CD\u5E94\u5F0F\u6570\u636E\u6765\u66F4\u65B0\u65E7\u7684props\u54CD\u5E94\u5F0F\u6570\u636E;\nexport function updateProps(prevProps: object, nextProps: object) {\n\n  //\u76F4\u63A5\u7528\u65B0props\u8FDB\u884C\u65B0\u589E\u5C5E\u6027\u6216\u91CD\u65B0\u8D4B\u503C;\n  for (const key in nextProps) {\n    prevProps[key] = nextProps[key];//\u6838\u5FC3;//\u8FD9\u91CC\u5C31\u4F1A\u89E6\u53D1effect\u66F4\u65B0,\u4F46\u7531\u4E8EactiveEffect\u90FD\u662F\u540C\u4E00\u4E2AReactiveEffect,\u6240\u4EE5\u6CA1\u6709\u591A\u6B21\u66F4\u65B0;\n  }\n\n  //\u65E7props\u4E4B\u524D\u6709\u7684,\u4F46\u65B0props\u7684\u6CA1\u6709\u4E86\u5219\u5220\u9664;\n  for (const key in prevProps) {\n    if (!hasOwn(nextProps, key)) {\n      delete prevProps[key]\n    }\n  }\n\n}", "import { proxyRefs, reactive } from \"@vue/reactivity\";\nimport { hasOwn, isFunction, isObject, ShapeFlags } from \"@vue/shared\";\nimport { ComponentRender, VNodeChildren, VueComponent } from \"vue\";\nimport { initProps } from \"./componentProps\";\nimport { RenderVNode, VueInstance } from \"./renderer\";\n\n//`\u5F53\u524D\u6267\u884Cvue\u7EC4\u4EF6\u5B9E\u4F8B`;\nexport let currentInstance: VueInstance | null = null;\n\n//\u8BBE\u7F6E\u4E00\u4E2Avue\u7EC4\u4EF6\u5B9E\u4F8B\u4E3A`\u5F53\u524D\u6267\u884Cvue\u7EC4\u4EF6\u5B9E\u4F8B`;\nexport const setCurrentInstance = (instance: VueInstance | null) => currentInstance = instance\n/* export const setCurrentInstance = (instance: VueInstance|null) => {\n  return currentInstance = instance\n} */\n\n//\u83B7\u53D6`\u5F53\u524D\u6267\u884Cvue\u7EC4\u4EF6\u5B9E\u4F8B`;\nexport const getCurrentInstance = () => currentInstance\n/* export const getCurrentInstance = (instance: VueInstance) => {\n  return currentInstance\n} */\n\n//\u4F7F\u7528VueComponent\u7C7B\u578B\u7684\u865A\u62DF\u8282\u70B9\u521B\u5EFA\u4E00\u4E2Avue\u7EC4\u4EF6\u5B9E\u4F8B;\nexport function createComponentInstance(vnode: RenderVNode) {\n  const instance: VueInstance = {//\u7EC4\u4EF6\u7684\u5B9E\u4F8B;\n    data: null,\n    vnode,\n    subTree: null,\n    isMounted: false,\n    update: null,\n    propsOptions: (vnode.type as VueComponent).props,\n    props: {},\n    attrs: {},\n    proxy: null,\n    render: null,\n    next: null,\n    setupState: {},\n    slots: {},\n  }\n  return instance\n}\n\n//\u4E00\u4E9Bvue\u4E2D\u7684\u516C\u5F00\u5C5E\u6027\u65B9\u6CD5;\nconst publictPropertyMap = {\n  $attrs: (instance: VueInstance) => instance.attrs,\n  $slots: (instance: VueInstance) => instance.slots,\n}\n\n//vue\u7EC4\u4EF6\u5B9E\u4F8B\u7684\u4EE3\u7406\u5BF9\u8C61;\nconst publicInstanceProxy = {\n  get(target: VueInstance, key: string | symbol) {\n    const { data, props, setupState } = target\n    //\u53D6\u503C\u987A\u5E8F\u7531\u4E0B\u65B9\u7684if()\u987A\u5E8F\u6765;\n    if (data && hasOwn(data, key)) {\n      //\u53D6data()\u4E0A\u7684\u503C\u7684\u6D41\u7A0B;\n      return data[key]\n    } else if (props && hasOwn(setupState, key)) {\n      //\u53D6setup()\u8FD4\u56DE\u51FA\u6765\u5BF9\u8C61\u7684\u503C\u7684\u6D41\u7A0B;\n      return setupState[key]\n    } else if (props && hasOwn(props, key)) {\n      //\u53D6props\u4E0A\u7684\u503C\u7684\u6D41\u7A0B;\n      return props[key]\n    }\n\n    //\u53D6this.$attrs\u7684\u5C5E\u6027\u7684\u6D41\u7A0B;\n    const getter = publictPropertyMap[key];//this.$attrs;\u5F97\u5230\u4E00\u4E2A\u53D6\u503C\u7684\u65B9\u6CD5;\n    if (getter) {\n      //console.log('getter(target)--->',getter(target))\n      return getter(target)\n    }\n  },\n  set(target: VueInstance, key: string | symbol, value: any) {\n\n    const { data, props, setupState } = target\n    //\u8D4B\u503C\u987A\u5E8F\u7531\u4E0B\u65B9\u7684if()\u987A\u5E8F\u6765;\n    if (data && hasOwn(data, key)) {\n      //\u8D4B\u503Cdata()\u4E0A\u7684\u503C\u7684\u6D41\u7A0B;\n      data[key] = value\n      //return true\n\n    } else if (props && hasOwn(setupState, key)) {\n      //\u8D4B\u503Csetup()\u8FD4\u56DE\u51FA\u6765\u5BF9\u8C61\u7684\u503C\u7684\u6D41\u7A0B;\n      setupState[key] = value\n      //return true\n    } else if (props && hasOwn(props, key)) {\n      //\u8D4B\u503Cprops\u4E0A\u7684\u503C\u7684\u6D41\u7A0B;\n\n      //\u7528\u6237\u64CD\u4F5C\u7684\u5C5E\u6027\u662F\u4EE3\u7406\u5BF9\u8C61,\u5728\u8FD9\u91CC\u9762\u88AB\u5C4F\u853D\u4E86;\n      //\u4F46\u662F\u53EF\u4EE5\u901A\u8FC7instance.props\u62FF\u5230\u771F\u5B9E\u7684props\u5E76\u4E14\u8FDB\u884C\u66F4\u6539;\n      console.warn('\u7981\u6B62\u4FEE\u6539props\u4E0A\u7684\u5C5E\u6027' + (key as string))\n      return false\n    }\n    return true\n  }\n}\n\n//\u521D\u59CB\u5316vue\u7EC4\u4EF6\u5B9E\u4F8B\u7684\u63D2\u69FD;\nfunction initSlots(instance: VueInstance, children: VNodeChildren) {\n  //\u5224\u65AD\u5B9E\u4F8B\u4E0A\u7684\u865A\u62DF\u8282\u70B9\u662F\u5426\u662F\u5E26\u63D2\u69FD\u7684;\n  if (instance.vnode.shapeFlag & ShapeFlags.SLOTS_CHILDREN) {\n    instance.slots = children as object //\u4FDD\u7559children,\u5F53\u6210\u63D2\u69FD\u7684render()\u51FD\u6570\u7528\u6765\u751F\u6210\u865A\u62DF\u8282\u70B9;\n  }\n}\n\n//\u7ED9vue\u7EC4\u4EF6\u5B9E\u4F8B\u8FDB\u884C\u8D4B\u503C\u53CA\u4EE3\u7406;\nexport function setupComponent(instance: VueInstance) {\n  const { props, type, children } = instance.vnode\n\n  initProps(instance, props);//\u7ED9\u5B9E\u4F8B\u8D4B\u4E0Aprops\u53CAattrs\u7684\u503C;\n  initSlots(instance, children)\n  instance.proxy = new Proxy(instance, publicInstanceProxy)\n\n  const data = (type as VueComponent).data\n\n  if (data) {\n    if (!isFunction(data)) {\n      return console.warn('vue3\u4E2D\u7EC4\u4EF6\u7684data\u53EA\u80FD\u662F\u51FD\u6570,\u4E0D\u80FD\u518D\u50CFvue2\u4E2D\u53EF\u4EE5\u662F\u5BF9\u8C61\u4E86');\n    }\n\n    //instance\u5B9E\u4F8B\u7684\u4E0Adata\u5C31\u662F\u4E00\u4E2A\u65B0\u589E\u7684\u54CD\u5E94\u5F0F\u6570\u636E,\u5B83\u4F1A\u6536\u96C6instance.render()\u4E2D\u4F9D\u8D56\u7684effect;\n    instance.data = reactive(data.call(instance.proxy))\n  }\n\n  const setup = (type as VueComponent).setup\n  if (setup) {\n\n    //\u4E0A\u4E0B\u6587;\n    const setupContext = {\n      //\u4E8B\u4EF6\u7684\u5B9E\u73B0\u539F\u7406;\n      //\u5178\u578B\u7684\u53D1\u5E03\u8BA2\u9605\u6A21\u5F0F;\n      //\u7236\u7EC4\u4EF6\u4E0A\u7528`@\u4E8B\u4EF6\u540D`\u6765\u5C06\u8BA2\u9605\u653E\u5230instance.vnode.props;\u5B50\u7EC4\u4EF6\u5185\u90E8\u5219\u7528emit()\u5C06\u4E8B\u4EF6\u540D\u5BF9\u5E94\u7684\u4E8B\u4EF6\u53D1\u5E03;\n      //\u7EC4\u4EF6\u5B9E\u4F8B\u4E0A\u7684\u865A\u62DF\u8282\u70B9\u7684props\u5C5E\u6027\u5373instance.vnode.props,\u5219\u662F\u4E00\u4E2A\u4E2D\u8F6C;\n      emit: (event: string, ...args) => {\n        //vue\u91CC\u9762,@\u7ED1\u5B9A\u7684\u4E8B\u4EF6,\u4F1A\u53D8\u6210`onX`,\u5373`\u524D\u9762\u52A0on,\u540C\u65F6\u4E8B\u4EF6\u540D\u9996\u5B57\u6BCD\u5927\u5199`;\n        //\u628A\u7528\u6237\u901A\u8FC7emit()\u4F20\u5165\u7684\u4E8B\u4EF6\u540D\u5904\u7406\u6210\u771F\u6B63\u7684props\u540D;\n        const eventName = `on${event[0].toUpperCase() + event.slice(1)}`\n\n        //\u627E\u5230\u865A\u62DF\u8282\u70B9\u7684\u5C5E\u6027\u5728\u5B58\u653Eprops,\u53D6\u51FA\u5728h()\u51FD\u6570\u4E2D\u7ED1\u5B9A\u7684\u4E8B\u4EF6;\n        const handler = instance.vnode.props[eventName]\n        if (handler) {\n          handler(...args)\n        }\n      },\n      attrs: instance.attrs,\n      slots: instance.slots,\n    }\n\n    setCurrentInstance(instance)\n    //\u8C03\u7528setup()\u65F6\u5FC5\u5B9A\u77E5\u9053\u5F53\u524D\u5B9E\u4F8B\u662F\u8C01;\n    //\u800C\u94A9\u5B50\u51FD\u6570\u9700\u8981\u7528\u5230\u5F53\u524D\u5B9E\u4F8B;\n    const setupResult = setup(instance.props, setupContext)\n    setCurrentInstance(null)\n\n\n    if (isFunction(setupResult)) {\n      instance.render = setupResult as ComponentRender\n    } else if (isObject(setupResult)) {\n      //\u5BF9\u5185\u90E8\u7684ref\u8FDB\u884C`\u53D6\u6D88.value`;\n      instance.setupState = proxyRefs(setupResult)\n    }\n  }\n\n  //\u4F9D\u65E7\u6CA1\u65B0\u5EFArender,\u4FBF\u76F4\u63A5\u53D6\u5B9E\u4F8B\u865A\u62DF\u8282\u70B9\u4E0A\u7684render();\n  if (!instance.render) {\n    instance.render = (type as VueComponent).render\n  }\n\n\n}\n\n", "import { reactive } from \"@vue/reactivity\";\nimport { hasOwn, invokeArrayFns, isArray, isNumber, isString, PatchFlags, ShapeFlags } from \"@vue/shared\";\nimport { ReactiveEffect } from \"@vue/reactivity\";\nimport { NodeOperateOptions } from \"packages/runtime-dom/src/nodeOps\";\nimport { getSequence } from \"./sequence\";\nimport { ComponentRender, ConvertibleVNode, createVnode, Fragment, isSameVnode, Text, VNode, VNodeChildren, VueComponent } from \"./vnode\"\nimport { queueJob } from \"./scheduler\";\nimport { hasPropsChanged, initProps, updateProps } from \"./componentProps\";\nimport { createComponentInstance, setupComponent } from \"./component\";\nimport { LifecycleHooks } from \"./apiLifecycle\";\n\n\nexport type RenderOptions = NodeOperateOptions & {\n  patchProp: (el: HTMLElement, key: string, prevValue: any, nextValue: unknown) => void\n}\n\nexport type RenderVNode = null | undefined | VNode & {\n  component?: null | undefined | VueInstance;\n}\ntype RenderContainer = HTMLElement & {\n  _vnode?: null | undefined | RenderVNode;\n};\n\nexport type VueInstance = {//\u7EC4\u4EF6\u7684\u5B9E\u4F8B;\n  data: null | object;//\u5B9E\u4F8B\u7684\u72B6\u6001;\n  vnode: VNode;  //vue2\u7684\u6E90\u7801\u4E2D\u7EC4\u4EF6\u7684\u865A\u62DF\u8282\u70B9\u53EB$vnode,\u6E32\u67D3\u7684\u5185\u5BB9\u53EB_vnode;//vue3\u4E2D\u7684\u865A\u62DF\u8282\u70B9\u5C31\u53EBvnode;\n  subTree: VNode | null;//vnode:\u7EC4\u4EF6\u7684\u865A\u62DF\u8282\u70B9; subTree:\u6E32\u67D3\u7684\u7EC4\u4EF6\u5185\u5BB9,\u5373render\u8FD4\u56DE\u7684\u865A\u62DF\u8282\u70B9\u6216\u6A21\u677F\u7F16\u8BD1\u51FA\u6765\u7684\u865A\u62DF\u8282\u70B9?\n  isMounted: boolean;//\u7EC4\u4EF6\u662F\u5426\u5DF2\u7ECF\u6302\u8F7D\u4E86;\n  update: null | Function;//\u8BA9\u7EC4\u4EF6\u5F3A\u5236\u8FDB\u884C\u66F4\u65B0\u66F4\u65B0\u7684\u65B9\u6CD5;\n  propsOptions: object;//\u7EC4\u4EF6\u4E0A\u7684props\u5C5E\u6027;//\u5982VueComponent.props\u5373vnode.type.props;//vnode.VueComponent\u5B9E\u9645\u4E0A\u5C31\u662F\u7528\u6237\u5728h()\u4E2D\u4F20\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570;\n  props: object;//\u7EC4\u4EF6\u7684props,\u5373\u7279\u610F\u58F0\u660E\u7684props;\n  attrs: object;//\u7EC4\u4EF6\u7684attrs,\u5373\u4E0D\u58F0\u660E\u7684\u5C5E\u6027;\n  proxy: object | null;//\u4EE3\u7406\u5BF9\u8C61,\u7528\u6765\u5F53\u6210\u7EC4\u4EF6\u7684render()\u7684this;\n  next: null | VNode,//\u4E0B\u6B21\u66F4\u65B0\u9700\u8981\u4F7F\u7528\u7684\u65B0\u7684\u865A\u62DF\u8282\u70B9,\u662F\u4E00\u4E2A\u4E34\u65F6\u53D8\u91CF,\u66F4\u65B0\u65F6\u5C31\u4F1A\u91CD\u65B0\u6E05\u7A7A;\n  render?: ComponentRender | null;//\u7528\u6237\u5728h()\u51FD\u6570\u7B2C\u4E00\u4E2A\u5165\u53C2\u7684render()\u65B9\u6CD5;\n  setupState: object,//\u7528\u6237\u5728h()\u51FD\u6570\u7B2C\u4E00\u4E2A\u5165\u53C2\u7684render()\u65B9\u6CD5\u8FD0\u884C\u540E\u8FD4\u56DE\u7684\u5BF9\u8C61;\n  slots: object,//\u7EC4\u4EF6\u7684\u63D2\u69FD\u76F8\u5173\u5185\u5BB9;\n} & {\n    [lifecycle in LifecycleHooks]?: Array<Function>;//\u7EC4\u4EF6\u751F\u547D\u5468\u671F\u94A9\u5B50\u51FD\u6570;\n  };\n\nexport function createRenderer(renderOptions: RenderOptions) {\n  const {\n    //\u63D2\u5165\u8282\u70B9;\n    insert: hostInsert,\n\n    //remove-\u5220\u9664\u8282\u70B9;\n    remove: hostRemove,\n\n    //\u4FEE\u6539\u5143\u7D20\u4E2D\u7684\u6587\u672C;-\u5F53\u4F20\u5165\u7684\u662F\u5143\u7D20\u65F6;\n    setElementText: hostSetElementText,\n    //\u8BBE\u7F6E\u6587\u672C\u8282\u70B9;-\u5F53\u4F20\u5165\u7684\u662F\u6587\u672C\u8282\u70B9\u65F6;\n    setText: hostSetText,\n\n    //\u67E5\u8BE2\u5143\u7D20;\n    querySelector: hostQuerySelector,\n    //\u67E5\u8BE2\u7236\u8282\u70B9;\n    parentNode: hostParentNode,\n    //\u67E5\u8BE2\u5144\u5F1F\u8282\u70B9;\n    nextSibling: hostNextSibling,\n\n    //\u521B\u5EFA\u5143\u7D20\u8282\u70B9;\n    createElement: hostCreateElement,\n    //\u521B\u5EFA\u6587\u672C\u8282\u70B9;\n    createText: hostCreateText,\n    patchProp: hostPatchProp,\n  } = renderOptions\n\n  //\u628A\u6570\u5B57\u6216\u5B57\u7B26\u4E32\u8F6C\u6210VNode,\u5F71\u54CD\u5230\u539F\u5B50\u8282\u70B9\u6570\u7EC4;\n  const normalize = (child: ConvertibleVNode[], index: number): VNode => {\n    //\u662F\u5B57\u7B26\u4E32\u6216\u6570\u5B57\u65F6;\n    if (isString(child[index]) || isNumber(child[index])) {\n      const vnode = createVnode(Text, null, String(child[index]))\n      child[index] = vnode\n    }\n\n    //\u4E3A\u865A\u62DF\u8282\u70B9\u65F6;\n    return (child[index] as VNode)\n  }\n\n  /* //\u6302\u8F7D\u5B50\u8282\u70B9\u5217\u8868\u5230\u5BB9\u5668\u4E0A;\n  //\u6839\u636E`\u865A\u62DF\u8282\u70B9\u5217\u8868children`\u5FAA\u73AF\u5BF9\u6BD4\u65B0\u65E7\u865A\u62DF\u8282\u70B9,\u5E76\u521B\u5EFA\u51FA`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`,\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u865A\u62DF\u8282\u70B9\u4E0A,\u540C\u65F6\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u5BB9\u5668\u4E0A; */\n  const mountChildren = (children: Array<ConvertibleVNode>, container: HTMLElement) => {\n    for (let index = 0; index < children?.length; index++) {\n      //debugger\n      const child = normalize(children, index)//\u5904\u7406\u540E\u8981\u8FDB\u884C\u66FF\u6362,\u5426\u5219children\u4E2D\u5B58\u653E\u7684\u4F9D\u65E7\u662F\u5B57\u7B26\u4E32;\n      patch(null, child, container)\n    }\n  }\n\n  /* //\u521B\u5EFA\u51FA`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`,\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u865A\u62DF\u8282\u70B9\u4E0A,\u540C\u65F6\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u5BB9\u5668\u4E0A;\n  //1.\u5148\u521B\u5EFA`\u865A\u62DF\u8282\u70B9type\u5BF9\u5E94DOM\u5143\u7D20`,\u540C\u65F6\u5C06`\u865A\u62DF\u8282\u70B9type\u5BF9\u5E94DOM\u5143\u7D20`\u6302\u8F7D\u5230`\u865A\u62DF\u8282\u70B9`\u4E0A;\n  //2.\u518D\u7528`\u865A\u62DF\u8282\u70B9props`\u5728`\u865A\u62DF\u8282\u70B9type\u5BF9\u5E94DOM\u5143\u7D20`\u4E0A\u521B\u5EFA`DOM\u5143\u7D20\u5404\u9879\u5C5E\u6027`;\n  //3.\u518D\u7528`\u865A\u62DF\u8282\u70B9children`\u5728`\u865A\u62DF\u8282\u70B9type\u5BF9\u5E94DOM\u5143\u7D20`\u4E0A\u521B\u5EFA`DOM\u5143\u7D20\u5B50\u5143\u7D20`; */\n  const mountElement = (vnode: RenderVNode, container: RenderContainer, anchor: HTMLElement | Text | null | undefined = null) => {\n    const { type, props, children, shapeFlag } = vnode\n\n    //\u5148\u521B\u5EFA\u7236\u5143\u7D20,\u5E76\u6302\u8F7D\u5230vnode\u4E0A;\n    vnode.el = hostCreateElement(type as string)//\u5C06\u771F\u5B9E\u5143\u7D20\u6302\u8F7D\u5230\u8FD9\u4E2A\u865A\u62DF\u8282\u70B9\u4E0A,\u540E\u7EED\u7528\u4E8E\u590D\u7528\u8282\u70B9\u548C\u66F4\u65B0\u8282\u70B9;\n    const el = vnode.el\n\n    //\u6DFB\u52A0\u5C5E\u6027;//\u7ED9\u7236\u5143\u7D20\u6DFB\u52A0\u5C5E\u6027;\n    if (props) {\n      for (const key in props) {\n        hostPatchProp(el, key, null, props[key])\n      }\n    }\n\n    //\u662F\u5426\u5B50\u8282\u70B9;//\u5904\u7406\u7236\u5143\u7D20\u7684\u5B50\u8282\u70B9;\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {//\u6587\u672C;\n      hostSetElementText(el, children as string)\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {//\u6570\u7EC4;\n      //\u8FD9\u91CC\u4EE3\u8868\u5B50\u8282\u70B9\u662F\u4E00\u4E2A\u6570\u7EC4;\n      //debugger\n      mountChildren(children as ConvertibleVNode[], el)\n    }\n\n    //\u5904\u7406\u5B8C\u4E4B\u540E,\u628A\u6574\u4E2A\u5143\u7D20\u4E22\u5230\u5BB9\u5668\u91CC;\n    hostInsert(el, container, anchor)\n\n\n  }\n\n  const processText = (n1: RenderVNode, n2: RenderVNode, container: RenderContainer) => {\n    if (n1 === null) {\n      //hostInsert((n2.el = hostCreateText(n2.children as string)),container)\n\n      n2.el = hostCreateText(n2.children as string)\n      hostInsert(n2.el, container)\n    } else {\n      //\u6587\u672C\u7684\u5185\u5BB9\u53D8\u5316\u4E86,\u53EF\u4EE5\u590D\u7528\u8001\u7684\u8282\u70B9(\u4E0A\u7684DOM\u5143\u7D20);\n      //n2.el = n1.el\n      //const el = n2.el\n      const el = n2.el = n1.el//\u590D\u7528DOM\u5143\u7D20,\u51CF\u5C11\u6027\u80FD\u635F\u5931;//\u8FD9\u91CC\u7684DOM\u5143\u7D20\u5FC5\u5B9A\u4E3A\u6587\u672C\u8282\u70B9;\n\n      //\u5982\u679C\u65B0\u65E7\u6587\u672C\u8282\u70B9\u7684\u5B50\u8282\u70B9\u4E0D\u4E00\u6837,\u5219\u76F4\u63A5\u66F4\u65B0;\n      if (n1.children !== n2.children) {\n        hostSetText(el, n2.children as string)//\u6587\u672C\u7684\u66F4\u65B0;\n      }\n    }\n  }\n\n  const patchProps = (oldProps: object, newProps: object, el: HTMLElement) => {\n    //\u65B0\u7684\u91CC\u9762\u6709,\u76F4\u63A5\u7528\u65B0\u7684\u76D6\u6389\u5373\u53EF;\n    for (const key in newProps) {\n      hostPatchProp(el, key, oldProps[key], newProps[key])\n    }\n\n    //\u5982\u679C\u8001\u7684\u91CC\u9762\u6709\u800C\u65B0\u7684\u6CA1\u6709,\u5219\u662F\u5220\u9664;\n    for (const key in oldProps) {\n      //debugger\n      if (newProps[key] === null || newProps[key] === undefined) {\n        hostPatchProp(el, key, oldProps[key], undefined)\n      }\n    }\n  }\n\n  const unmountChildren = (children: VNode[]) => {\n    for (let index = 0; index < children.length; index++) {\n      //debugger\n      unmount(children[index])\n    }\n  }\n\n\n  const patchKeyedChildren = (c1: VNode[], c2: VNode[], el: HTMLElement) => {//\u6BD4\u8F83\u4E24\u4E2A\u5143\u7D20\n    let i = 0;//\u8868\u793A\u65B0\u65E7\u865A\u62DF\u8282\u70B9\u4ECE\u524D\u5411\u540E\u5FAA\u73AF\u65F6\u6700\u540E\u4E00\u4E2A\u76F8\u7B49\u7684\u89D2\u6807;\n    let e1 = c1.length - 1;//\u8868\u793A\u65E7\u865A\u62DF\u8282\u70B9\u4ECE\u524D\u5411\u540E\u5FAA\u73AF\u65F6\u6700\u540E\u4E00\u4E2A\u76F8\u7B49\u7684\u89D2\u6807;\n    let e2 = c2.length - 1;//\u8868\u793A\u65B0\u865A\u62DF\u8282\u70B9\u4ECE\u524D\u5411\u540E\u5FAA\u73AF\u65F6\u6700\u540E\u4E00\u4E2A\u76F8\u7B49\u7684\u89D2\u6807;\n\n    //\u7279\u6B8A\u5904\u7406...........\n    //\u7528\u4E8E\u51CF\u5C11\u8FDB\u884Cdiff\u7B97\u6CD5\u6BD4\u8F83\u7684\u8303\u56F4;\n    //\u5148\u5206\u522B\u6BD4\u8F83\u65B0\u865A\u62DF\u8282\u70B9\u4E0E\u65E7\u865A\u62DF\u8282\u70B9\u7684\u524D\u9762\u53CA\u540E\u9762\u7684\u540C\u7B49\u8282\u70B9;\u7559\u4E0B\u4E2D\u95F4\u4E0D\u540C\u7684\u4EE5\u4FBF\u4E71\u5E8F\u6BD4\u8F83;\n    //\u539F\u56E0\u662F\u56E0\u4E3A\u4E00\u4E2A\u6570\u7EC4\u53D8\u52A8\u524D\u540E,\u524D\u9762\u548C\u540E\u9762\u4F1A\u6709\u4E00\u5927\u5757\u7684\u5185\u5BB9\u4E0D\u6539\u53D8;\n\n    //sync from start;\u4ECE\u524D\u9762\u5F80\u540E\u6BD4;\n    for (; i <= e1 && i <= e2; i++) {//\u6709\u4EFB\u4F55\u4E00\u65B9\u505C\u6B62\u5FAA\u73AF,\u5219\u76F4\u63A5\u8DF3\u51FA;\n      const n1 = c1[i]\n      const n2 = c2[i]\n      if (isSameVnode(n1, n2)) {\n        //debugger\n        patch(n1, n2, el)//\u8FD9\u6837\u505A\u5C31\u662F\u6BD4\u8F83\u4E24\u4E2A\u8282\u70B9\u7684\u5C5E\u6027\u548C\u5B50\u8282\u70B9;\n      } else {\n        break\n      }\n    }\n\n    //sync from end;\u4ECE\u540E\u9762\u5F80\u524D\u6BD4;\n    for (; i <= e1 && i <= e2; e1--, e2--) {\n      const n1 = c1[e1]\n      const n2 = c2[e2]\n      if (isSameVnode(n1, n2)) {\n        patch(n1, n2, el)\n      } else {\n        break\n      }\n    }\n\n    //console.log('i--->', i, 'e1--->', e1, 'e2--->', e2)//\u5C3D\u53EF\u80FD\u51CF\u5C11\u6BD4\u8F83\u7684\u5185\u5BB9;\n\n    //\u6709\u4E00\u65B9\u5168\u90E8\u6BD4\u8F83\u5B8C\u6BD5\u4E86,\u8981\u4E48\u5C31\u5220\u9664,\u8981\u4E48\u5C31\u6DFB\u52A0;\n    if (i > e1) {\n      //common sequence + mount;\u540C\u5E8F\u5217\u6302\u8F7D;\n      //i\u6BD4e1\u5927,\u8BF4\u660E\u6709\u65B0\u589E\u7684;\n      //i\u548Ce2\u4E4B\u95F4\u7684\u662F\u65B0\u589E\u7684\u90E8\u4EFD;//\u5373[i,i+1,i+2,...,e2]\u4E2D\u5BF9\u5E94\u89D2\u6807\u662F\u8981\u65B0\u589E\u7684;\n      if (i <= e2) {\n        for (; i <= e2; i++) {\n          const nextPos = e2 + 1;//\u8868\u793Ae2\u7684\u4E0B\u4E00\u4E2A\u5143\u7D20;\n          //\u6839\u636E\u4E0B\u4E00\u4E2A\u4EBA\u7684\u7D22\u5F15\u6765\u770B\u53C2\u7167\u7269;\n          const anchor = nextPos < c2.length ? c2[nextPos].el : null\n          patch(null, c2[i], el, anchor)//\u521B\u5EFA\u65B0\u8282\u70B9,\u6254\u5230\u5BB9\u5668\u4E2D;\n        }\n      }\n    } else if (i > e2) {\n      //common sequence + unmount;\u540C\u5E8F\u5217\u5378\u8F7D;\n      //i\u6BD4e2\u5927,\u8BF4\u660E\u6709\u8981\u5378\u8F7D\u7684;\n      //i\u548Ce1\u4E4B\u95F4\u7684\u662F\u5378\u8F7D\u7684\u90E8\u4EFD;//\u5373[i,i+1,i+2,...,e1]\u4E2D\u5BF9\u5E94\u89D2\u6807\u662F\u8981\u5378\u8F7D\u7684;\n      if (i <= e1) {\n        for (; i <= e1; i++) {\n          unmount(c1[i])\n        }\n      }\n    }\n\n    //\u4F18\u5316\u5B8C\u6BD5-------------------------------------;\n\n    //\u4E71\u5E8F\u6BD4\u5BF9;\n\n    //\u601D\u8DEF:\n    //\u7528\u65B0\u865A\u62DF\u8282\u70B9\u4E71\u5E8F\u90E8\u4EFD\u7684key\u53CA\u65B0\u865A\u62DF\u8282\u70B9\u89D2\u6807\u505A\u4E00\u4E2A\u6620\u5C04\u8868;\n    //\u7528\u5FAA\u73AF\u65E7\u865A\u62DF\u8282\u70B9\u4E71\u5E8F\u90E8\u4EFD\u7684key\u4ECE\u6620\u5C04\u8868\u4E2D\u62FF\u5230\u5BF9\u5E94\u65B0\u865A\u62DF\u8282\u70B9;\u5982\u679C\u6CA1\u627E\u5230,\u8BF4\u660E\u8BE5\u65E7\u865A\u62DF\u8282\u70B9\u8981\u88AB\u5220\u9664;\u5982\u679C\u627E\u5230,\u7528\u4E00\u4E2A\u6570\u7EC4\u8BB0\u5F55\u4E0B\u65B0\u865A\u62DF\u8282\u70B9\u4E71\u5E8F\u90E8\u4EFD\u89D2\u6807\u53CA`\u65E7\u865A\u62DF\u8282\u70B9\u89D2\u6807+1`\u7684\u6620\u5C04\u5173\u7CFB,\u5E76\u6BD4\u5BF9\u65B0\u65E7\u865A\u62DF\u8282\u70B9\u5173\u7CFB;\n    //\u5BF9\u65B0\u865A\u62DF\u8282\u70B9\u4E71\u5E8F\u90E8\u4EFD\u5FAA\u73AF\u4E86\u4E00\u904D,\u6839\u636E\u65B0\u865A\u62DF\u8282\u70B9\u4E71\u5E8F\u90E8\u4EFD\u89D2\u6807\u53CA`\u65E7\u865A\u62DF\u8282\u70B9\u89D2\u6807+1`\u7684\u6620\u5C04\u5173\u7CFB\u6765\u5012\u53D9\u8FDB\u884C\u63D2\u5165\u6216\u521B\u5EFA;\n\n    //console.log('i--->', i, 'e1--->', e1, 'e2--->', e2)\n    // debugger\n    let s1 = i;\n    let s2 = i;\n\n    const keyToNewIndexMap: Map<any, number> = new Map()//key -> newIndex;\n    for (let index = s2; index <= e2; index++) {\n      keyToNewIndexMap.set(c2[index].key, index)\n    }\n\n    //\u5FAA\u73AF\u8001\u7684\u5143\u7D20 \u770B\u4E00\u4E0B\u65B0\u7684\u91CC\u9762\u6709\u6CA1\u6709,\u5982\u679C\u6709\u8BF4\u660E\u8981\u6BD4\u8F83\u5DEE\u5F02,\u6CA1\u6709\u8981\u6DFB\u52A0\u5230\u5217\u8868\u4E2D,\u8001\u7684\u6709\u65B0\u7684\u6CA1\u6709\u8981\u5220\u9664;\n    const toBePatched = e2 - s2 + 1;//\u65B0\u7684\u603B\u4E2A\u6570;\n    const newIndexToOldIndexMap: number[] = new Array(toBePatched).fill(0)//\u4E00\u4E2A\u8BB0\u5F55\u662F\u5426\u6BD4\u5BF9\u8FC7\u7684\u6620\u5C04\u8868;//\u65B0\u8282\u70B9\u603B\u4E2A\u6570\u4E2D\u987A\u5E8F\u5BF9\u5E94\u7740\u8001\u865A\u62DF\u8282\u70B9\u7684\u89D2\u6807;\n\n\n\n    for (let index = s1; index <= e1; index++) {\n      const oldChild = c1[index];//\u8001\u7684\u5B69\u5B50;\n      const newIndex = keyToNewIndexMap.get(oldChild.key)//\u7528\u8001\u7684\u5B69\u5B50\u53BB\u65B0\u7684\u91CC\u9762\u627E;\n      if (newIndex === undefined) {\n        unmount(oldChild)//\u591A\u4F59\u7684\u5220\u6389;\n      } else {\n        //\u65B0\u7684\u4F4D\u7F6E\u5BF9\u5E94\u7684\u8001\u7684\u4F4D\u7F6E; //\u5982\u679C\u6570\u7EC4\u91CC\u653E\u7684\u503C>0,\u8BF4\u660E\u5DF2\u7ECFpatch\u8FC7\u4E86;\n        newIndexToOldIndexMap[newIndex - s2] = index + 1;//\u7528\u6765\u6807\u8BB0\u5F53\u524D\u6240patch\u8FC7\u7684\u7ED3\u679C;\n        patch(oldChild, c2[newIndex], el)\n      }\n    }\n    //\u5230\u8FD9\u53EA\u662F\u65B0\u8001\u5C5E\u6027\u548C\u513F\u5B50\u7684\u6BD4\u5BF9,\u6CA1\u6709\u79FB\u52A8\u4F4D\u7F6E;//\u4E5F\u6CA1\u6709\u65B0\u589E\u8FC7\u65B0\u8282\u70B9\u4E2D\u591A\u4F59\u51FA\u6765\u7684\u8282\u70B9;\n    //console.log('newIndexToOldIndexMap--->', JSON.parse(JSON.stringify(newIndexToOldIndexMap)))\n\n\n    //\u83B7\u53D6\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217;\n    const increment = getSequence(newIndexToOldIndexMap)\n\n    //\u9700\u8981\u79FB\u52A8\u4F4D\u7F6E;\n    //\u76EE\u524D\u65E0\u8BBA\u5982\u4F55\u90FD\u505A\u4E86\u4E00\u904D\u5012\u53D9\u8FDB\u884C\u63D2\u5165\u6216\u521B\u5EFA;\n    let j = increment.length - 1\n    //console.log('increment--->', increment)\n    for (let theIndex = toBePatched - 1; theIndex >= 0; theIndex--) {//[3,2,1,0];\n      const index = theIndex + s2\n      const current = c2[index];//\u627E\u5230\u5F53\u524D\u8282\u70B9;(\u6700\u540E\u6CA1\u505A\u8FC7\u5904\u7406\u7684\u8981\u65B0\u589E\u7684\u5143\u7D20);\n      const anchor = index + 1 < c2.length ? c2[index + 1].el : null\n      if (newIndexToOldIndexMap[theIndex] === 0) {\n        //\u521B\u5EFA;\n        //\u4E4B\u524D\u7684\u8868\u7C7B\u4F3C\u4E8E[5,3,4,0];//\u503C\u4E3A0,\u8BF4\u660E\u6CA1patch\u8FC7,\u5C31\u8BF4\u660E\u8981\u521B\u5EFA;\n        patch(null, current, el, anchor)//\u521B\u5EFA\u65B0\u8282\u70B9;\n\n        //newIndexToOldIndexMap\u4E00\u822C\u4E3A[5,3,4,0]\u4F8B\u5982: \n        //[5,3,4,0] -> \u5BF9\u5E94\u89D2\u6807theIndex[0,1,2,3] -> \u6700\u957F\u9012\u589E\u89D2\u6807[1,2] -> \u5BF9\u5E94\u9012\u589E\u503C[3,4] -> \u8981\u6539\u7684\u503C\u4E3A[5]\u4E0E[0] -> \u8981\u6539\u7684\u503C\u5BF9\u5E94\u89D2\u6807theIndex\u4E3A[0]\u4E0E[3],\u5176\u4E2D[0]\u4E3A\u63D2\u5165\u4EE5\u6539\u53D8\u6392\u5E8F,[3]\u4E3A\u65B0\u589E\u5E76\u63D2\u5165;\n\n      } else {\n        //\u4E0D\u662F0,\u8BF4\u660E\u662F\u5DF2\u7ECF\u6BD4\u5BF9\u8FC7\u5C5E\u6027\u548C\u513F\u5B50\u7684\u4E86;\n\n        //console.log(theIndex,increment,j,increment[j])\n        if (theIndex !== increment[j]) {\n          hostInsert(current.el, el, anchor)\n        } else {\n          console.log('\u8FD9\u91CC\u4E0D\u505A\u63D2\u5165\u4E86;')\n          j-- //\u5982\u679Ci===increment[theIndex],\u5219\u8BF4\u660E\u8FD9\u4E2A\u8282\u70B9\u4E0D\u7528\u52A8;\u540C\u65F6j\u8981\u51CF\u4E00,\u7528\u4E8E\u4E0B\u6B21\u6BD4\u8F83;\n        }\n\n        //\u63D2\u5165;//\u590D\u7528\u4E86\u8282\u70B9;//\u4E0D\u8FC7\u8FD9\u4E9B\u8282\u70B9\u4E5F\u5DF2\u7ECF\u5728\u6807\u8BC6\u65F6patch\u8FC7\u4E86;\n        //\u76EE\u524D\u65E0\u8BBA\u5982\u4F55\u90FD\u505A\u4E86\u4E00\u904D\u5012\u53D9\u63D2\u5165,\u5176\u5B9E\u53EF\u4EE5\u4E0D\u7528\u5168\u90E8\u90FD\u63D2\u5165\u4E00\u904D;\n        //\u53EF\u4EE5\u6839\u636E\u521A\u624D\u7684\u6570\u7EC4\u6765\u51CF\u5C11\u63D2\u5165\u6B21\u6570;\n        //\u53EF\u4EE5\u7528\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u6765\u5B9E\u73B0,\u5904\u4E8E\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u4E2D\u7684\u6570\u636E,\u53EF\u4EE5\u4E0D\u7528\u63D2\u5165;\u53EA\u9700\u8981\u6539\u53D8\u4E0D\u662F\u5904\u4E8E\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u4E2D\u7684\u5143\u7D20\u5C31\u53EF\u4EE5\u4E86;\n        //hostInsert(current.el, el, anchor)\n      }\n\n      //\u8FD9\u91CC\u53D1\u73B0\u7F3A\u5931\u903B\u8F91,\u9700\u8981\u770B\u4E00\u4E0Bcurrent\u6709\u6CA1\u6709el,\u5982\u679C\u6CA1\u6709el\u8BF4\u660E\u662F\u65B0\u589E\u7684\u903B\u8F91;\n\n      //\u5F53\u524D\u7684\u8282\u70B9\u662F\u65B0\u589E\u7684\u6CA1\u6709\u6240\u8C13\u7684el;\n      //hostInsert(current.el,el,anchor);\n\n      //\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u6765\u5B9E\u73B0; //vue2\u5728\u79FB\u52A8\u5143\u7D20\u7684\u65F6\u5019\u4F1A\u6709\u6D6A\u8D39; //\u4F18\u5316,\u8FD9\u4E2A\u53EA\u662F\u4F18\u5316diff\u7B97\u6CD5\u4E2D\u4E71\u5E8F\u6BD4\u5BF9\u6570\u7EC4\u65F6\u7684\u521B\u5EFA\u53CA\u63D2\u5165\u7684\u6027\u80FD\u6D6A\u8D39;\n    }\n\n  }\n\n  //\u5168\u91CF\u6BD4\u8F83\u865A\u62DF\u8282\u70B9\u7684\u5B50\u8282\u70B9\u5217\u8868;\n  //\u6BD4\u8F83\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u7684\u5B50\u8282\u70B9\u7684\u5DEE\u5F02,el\u5C31\u662F\u5F53\u524D\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u7684\u771F\u5B9EDOM\u5143\u7D20;\n  const patchChildren = (n1: RenderVNode, n2: RenderVNode, el: HTMLElement) => {\n    const c1 = n1?.children || null//\u65E7\u865A\u62DF\u8282\u70B9\u7684\u5B50\u8282\u70B9\u5217\u8868;\n    const c2 = n2?.children || null//\u65B0\u865A\u62DF\u8282\u70B9\u7684\u5B50\u8282\u70B9\u5217\u8868;\n\n    const prevShapeFlag = n1.shapeFlag;//\u4E4B\u524D\u7684\u865A\u62DF\u8282\u70B9\u7684\u7C7B\u578B;\n    const shapeFlag = n2.shapeFlag;//\u4E4B\u540E\u7684\u865A\u62DF\u8282\u70B9\u7684\u7C7B\u578B;\n\n    /* //\u5B50\u8282\u70B9\u5217\u8868\u53EF\u80FD\u662F: \u6587\u672C, \u7A7A\u7684null, \u6570\u7EC4;\n      \u65B0\u5B50\u8282\u70B9\u5217\u8868\t\u65E7\u5B50\u8282\u70B9\u5217\u8868\t\u64CD\u4F5C\u65B9\u5F0F;\n      \u6587\u672C\t\u6570\u7EC4\t\uFF08\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868\uFF0C\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;\n      \u6587\u672C\t\u6587\u672C\t\uFF08\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;\n      \u6570\u7EC4\t\u6570\u7EC4\t\uFF08diff\u7B97\u6CD5\uFF09;\n      \u6570\u7EC4\t\u6587\u672C\t\uFF08\u6E05\u7A7A\u6587\u672C\uFF0C\u8FDB\u884C\u6302\u8F7D\uFF09;\n      \u7A7A\t\u6570\u7EC4\t\uFF08\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868\uFF09;\n      \u7A7A\t\u6587\u672C\t\uFF08\u6E05\u7A7A\u6587\u672C\uFF09;\n      \u65E7\u513F\u5B50\u4E3A\u7A7A\u65F6,processElement()\u91CC\u4E0D\u8C03\u7528patchElement(),\u540C\u65F6patchChildren()\u662F\u5728patchElement()\u91CC\u7684,\u8D70\u4E0D\u5230\u8FD9\u4E2A\u65B9\u6CD5;\n      \u6587\u672C\t\u7A7A\t\uFF08\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9);\n      \u6570\u7EC4\t\u7A7A\t\uFF08\u8FDB\u884C\u6302\u8F7D\uFF09;\n      \u7A7A\t\u7A7A\t\uFF08\u65E0\u9700\u5904\u7406\uFF09;\n     */\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {//\u5224\u65AD\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u6587\u672C;\n      //\u4E24\u79CD\u60C5\u51B5:\n      //\u6587\u672C\t\u6570\u7EC4\t\uFF08\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868\uFF0C\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;\n      //\u6587\u672C\t\u6587\u672C\t\uFF08\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;//\u66F4\u65B0\u6587\u672C\u76F8\u5F53\u4E8E\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9;\n      //\u8FD9\u91CC\u7684\u601D\u8DEF\u662F\u5982\u679C\u8001\u8282\u70B9\u662F\u6570\u7EC4,\u90A3\u4E48\u5C31\u5148\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868;\n      //\u4E4B\u540E\u4E0D\u7BA1\u8001\u8282\u70B9\u7684\u7C7B\u578B,\u53EA\u8981\u65B0\u8001\u8282\u70B9\u7684\u5B50\u8282\u70B9\u4E0D\u76F8\u7B49,\u7EDF\u4E00\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9;\n\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {//\u5224\u65AD\u8001\u8282\u70B9\u4E3A\u6570\u7EC4;\n        //\u5220\u9664\u6240\u6709\u5B50\u8282\u70B9;\n        unmountChildren(c1 as VNode[])//\u6587\u672C\t\u6570\u7EC4\t\uFF08\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868\uFF0C\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;\n      }\n\n      if (c1 !== c2) {\n        hostSetElementText(el, c2 as string)//\u6587\u672C\t\u6587\u672C\t\uFF08\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;\u5305\u62EC\u4E86\u6587\u672C\u548C\u7A7A;\n      }\n\n    } else {\n      //\u76EE\u524D\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u6570\u7EC4\u6216\u8005\u4E3A\u7A7A;\n\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) { //\u5224\u65AD\u8001\u865A\u62DF\u8282\u70B9\u4E3A\u6570\u7EC4;\n        //\u4E24\u79CD\u60C5\u51B5;\n        //\u6570\u7EC4\t\u6570\u7EC4\t\uFF08diff\u7B97\u6CD5\uFF09;\n        //\u7A7A\t\u6570\u7EC4\t\uFF08\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868\uFF09;\n        //\u8FD9\u91CC\u7684\u601D\u8DEF\u662F\u5982\u679C\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u6570\u7EC4,\u8FDB\u884C\u5B50\u8282\u70B9\u5217\u8868\u7684\u5BF9\u6BD4,\u91CC\u9762\u7528\u5230\u4E86diff\u7B97\u6CD5;\n        //\u5982\u679C\u65B0\u865A\u62DF\u8282\u70B9\u4E0D\u4E3A\u6570\u7EC4,\u5378\u8F7D\u6389\u6240\u6709\u7684\u65E7\u865A\u62DF\u8282\u70B9;\n\n        //\u5224\u65AD\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u6570\u7EC4;\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n          //diff\u7B97\u6CD5;\n          patchKeyedChildren(c1 as VNode[], c2 as VNode[], el)\n        } else {\n          //\u73B0\u5728\u65B0\u865A\u62DF\u8282\u70B9\u4E0D\u662F\u6570\u7EC4,\u5C31\u4EE3\u8868\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u7A7A? (\u6587\u672C\u548C\u7A7A \u5220\u9664\u4EE5\u524D\u7684);\n          unmountChildren(c1 as VNode[])\n        }\n      } else {\n        //\u4E24\u79CD\u60C5\u51B5;\n        //\u7A7A\t\u6587\u672C\t\uFF08\u6E05\u7A7A\u6587\u672C\uFF09;\n        //\u6570\u7EC4\t\u6587\u672C\t\uFF08\u6E05\u7A7A\u6587\u672C\uFF0C\u8FDB\u884C\u6302\u8F7D\uFF09;\n        //\u8FD9\u91CC\u7684\u601D\u8DEF\u662F\u5982\u679C\u8001\u8282\u70B9\u4E3A\u6587\u672C,\u90A3\u4E48\u4E0D\u7BA1\u5F53\u524D\u65B0\u8282\u70B9\u4E3A\u6570\u7EC4\u8FD8\u662F\u7A7A,\u90FD\u76F4\u63A5\u6E05\u7A7A\u5F53\u524D\u6587\u672C;\n        //\u5982\u679C\u5F53\u524D\u65B0\u8282\u70B9\u4E3A\u6570\u7EC4,\u90A3\u4E48\u5C31\u6302\u8F7D\u65B0\u8282\u70B9\u7684\u5B50\u8282\u70B9;\n\n        if (prevShapeFlag & ShapeFlags.TEXT_CHILDREN) {//\u5224\u65AD\u8001\u865A\u62DF\u8282\u70B9\u4E3A\u6587\u672C;\n          hostSetElementText(el, '')\n        }\n\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {//\u5224\u65AD\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u6570\u7EC4;\n          mountChildren(c2 as ConvertibleVNode[], el)\n        }\n\n      }\n    }\n\n  }\n\n  const patchBlockChildren = (n1: RenderVNode, n2: RenderVNode) => {\n    for (let i = 0; i < n2.dynamicChildren.length; i++) {\n      //\u4E4B\u524D\u662F\u6811\u7684\u9012\u5F52\u6BD4\u8F83,\u73B0\u5728\u662F\u6570\u7EC4\u7684\u6BD4\u8F83;\n      patchElement(n1.dynamicChildren[i], n2.dynamicChildren[i])\n    }\n  }\n\n  //\u7528\u4E8E\u8FDB\u884C\u865A\u62DF\u8282\u70B9\u4E3AHTML\u5143\u7D20\u7684\u6BD4\u5BF9;\n  //\u5982\u679C\u5143\u7D20\u4E00\u6837: \u5148\u590D\u7528\u8282\u70B9,\u518D\u6BD4\u8F83\u5C5E\u6027,\u518D\u6BD4\u8F83\u513F\u5B50(\u5B50\u8282\u70B9);\n  const patchElement = (n1: RenderVNode, n2: RenderVNode) => {\n    //\u590D\u7528\u8282\u70B9;\n    const el = n2.el = n1.el as HTMLElement //\u8FD9\u4E2A\u65B9\u6CD5\u5185\u7684el,\u5FC5\u5B9A\u4E3A\u5143\u7D20;\n\n    const oldProps = n1.props || {}//\u5BF9\u8C61;//\u8868\u793A\u65E7\u865A\u62DF\u8282\u70B9\u7684props;\n    const newProps = n2.props || {}//\u5BF9\u8C61;//\u8868\u793A\u65B0\u865A\u62DF\u8282\u70B9\u7684props;\n\n    //\u6BD4\u8F83\u5C5E\u6027;\n\n    const { patchFlag } = n2\n    //console.log('oldProps?.class--->', oldProps?.class, 'newProps?.class--->', newProps?.class,)\n    //console.log('patchFlag--->', patchFlag)\n    if (patchFlag & PatchFlags.CLASS) {\n      if (oldProps?.class !== newProps?.class) {\n        //debugger\n        hostPatchProp(el, 'class', null, newProps.class)\n      }\n      //\u50CFstyle .. \u4E0E\u4E8B\u4EF6\u7B49,\u90FD\u53EF\u4EE5\u4EFF\u7167\u8FD9\u4E2A\u6765\u8FDB\u884C\u9776\u5411\u66F4\u65B0;\n    } else {\n      //\u6BD4\u8F83\u6240\u6709\u5C5E\u6027;\n      patchProps(oldProps, newProps, el)\n    }\n\n    //\u6BD4\u8F83\u5B50\u8282\u70B9;\n    //debugger\n    //n2 = normalize(n2)//\u8FD9\u91CCn2\u7684\u5B50\u8282\u70B9\u53EF\u80FD\u8FD8\u662F\u4E2A\u6570\u7EC4,\u6570\u7EC4\u4E2D\u53EF\u80FD\u5E76\u4E0D\u662FVNode,\u8981\u628A\u5B50\u8282\u70B9\u8F6C\u6210VNode;\n    if (isArray(n2.children)) {\n      for (let index = 0; index < (n2.children as Array<ConvertibleVNode>)?.length; index++) {\n        //debugger\n        n2.children[index] = normalize(n2.children as Array<ConvertibleVNode>, index)//\u5904\u7406\u540E\u8981\u8FDB\u884C\u66FF\u6362,\u5426\u5219children\u4E2D\u5B58\u653E\u7684\u4F9D\u65E7\u662F\u5B57\u7B26\u4E32;\n      }\n    }\n\n    //\u8FD9\u91CC\u7684patchChildren()\u662F\u4E00\u4E2A\u5168\u91CF\u7684diff\u7B97\u6CD5;\n    //\u4E0D\u8FC7\u6709\u4E9B\u8282\u70B9\u662F\u975E\u52A8\u6001\u8282\u70B9,\u5B9E\u9645\u66F4\u65B0\u65F6,\u4E00\u822C\u53EA\u8981\u6BD4\u8F83\u52A8\u6001\u8282\u70B9\u5C31\u597D\u4E86;\n    //\u67E5\u770B\u65B0\u865A\u62DF\u8282\u70B9\u662F\u5426\u6709\u52A8\u6001\u8282\u70B9;\n    //\u6709\u52A8\u6001\u8282\u70B9\u6570\u7EC4,\u76F4\u63A5\u6BD4\u5BF9\u52A8\u6001\u8282\u70B9\u6570\u7EC4--\u6570\u7EC4\u7684\u6BD4\u8F83;\n    //\u6CA1\u52A8\u6001\u8282\u70B9\u6570\u7EC4,\u5C31\u548C\u4E4B\u524D\u4E00\u6837\u6BD4\u5BF9\u5B50\u8282\u70B9\u5217\u8868--\u6811\u7684\u9012\u5F52\u6BD4\u8F83;\n    if (n2.dynamicChildren) {\n      // debugger\n      //\u5143\u7D20\u4E4B\u95F4\u7684\u4F18\u5316--\u9776\u5411\u66F4\u65B0,\u53EA\u6BD4\u8F83\u52A8\u6001\u8282\u70B9\u4E86;\n      patchBlockChildren(n1, n2)\n    } else {\n      //h1\u8FD8\u5728\u8FD9\u5462;\n      patchChildren(n1, n2, el)\n    }\n\n  }\n\n  //\u5904\u7406\u5143\u7D20:\n  const processElement = (n1: RenderVNode, n2: RenderVNode, container: RenderContainer, anchor: HTMLElement | Text | null | undefined = null) => {\n    //\u65E7\u8282\u70B9n1\u4E3Anull,\u5C31\u521B\u5EFA\u65B0\u8282\u70B9\u5E76\u63D2\u5165\u5230\u5BB9\u5668\u4E0A;\n    if (n1 === null) {\n      mountElement(n2, container, anchor)\n    } else {\n      //\u5143\u7D20\u6BD4\u5BF9;\n      patchElement(n1, n2);\n    }\n\n  }\n\n  //\u5904\u7406\u7A7A\u6807\u7B7E;\n  const processFragment = (n1: RenderVNode, n2: RenderVNode, container: RenderContainer) => {\n    if (n1 === null || n1 === undefined) {\n      if (!isArray(n2.children)) {\n        console.log(\"\u4E0D\u662F\u6570\u7EC4,\u76F4\u63A5\u9000\u51FA\u6302\u8F7D\");\n        return\n      }\n      mountChildren(n2.children, container)//\u8D70\u7684\u662F\u65B0\u589E,\u76F4\u63A5\u628A\u5B50\u8282\u70B9\u6302\u8F7D\u5230\u5BB9\u5668\u4E2D;\n    } else {\n      //\u8D70\u7684\u662F\u6BD4\u5BF9,\u6BD4\u5BF9\u65B0\u65E7\u865A\u62DF\u8282\u70B9\u7684\u5B50\u8282\u70B9\u5217\u8868;\n\n      //debugger//\u8FD9\u91CCn2\u7684\u5B50\u8282\u70B9\u53EF\u80FD\u8FD8\u662F\u4E2A\u6570\u7EC4,\u6570\u7EC4\u4E2D\u53EF\u80FD\u5E76\u4E0D\u662FVNode,\u8981\u628A\u5B50\u8282\u70B9\u8F6C\u6210VNode;\n      if (isArray(n2.children)) {\n        for (let index = 0; index < (n2.children as Array<ConvertibleVNode>)?.length; index++) {\n          //debugger\n          n2.children[index] = normalize(n2.children as Array<ConvertibleVNode>, index)//\u5904\u7406\u540E\u8981\u8FDB\u884C\u66FF\u6362,\u5426\u5219children\u4E2D\u5B58\u653E\u7684\u4F9D\u65E7\u662F\u5B57\u7B26\u4E32;\n        }\n      }\n\n      patchChildren(n1, n2, container)//\u8D70\u7684\u662Fdiff\u7B97\u6CD5;\n    }\n  }\n\n\n\n  //\u628Avue\u7EC4\u4EF6\u6302\u8F7D\u5230\u5BB9\u5668\u4E0A;\n  const mountComponent = (vnode: RenderVNode, container: RenderContainer, anchor: HTMLElement | Text | null | undefined = null) => {\n    //1) \u8981\u521B\u9020\u4E00\u4E2A\u7EC4\u4EF6\u7684\u5B9E\u4F8B;\n    const instance = vnode.component = createComponentInstance(vnode)\n    //2) \u7ED9\u5B9E\u4F8B\u4E0A\u8D4B\u503C\u5E76\u8FDB\u884C\u4EE3\u7406;\n    setupComponent(instance)\n    //3) \u6839\u636Evue\u7EC4\u4EF6\u5B9E\u4F8B\u521B\u5EFA\u4E00\u4E2Aeffect,\u5E76\u8D4B\u503C\u5230vue\u7EC4\u4EF6\u5B9E\u4F8B\u4E0A;\n    setupRenderEffect(instance, container, anchor)\n  }\n\n  //vue\u7EC4\u4EF6\u5B9E\u4F8B\u5728\u8FD0\u884Crender()\u524D\u7684\u5904\u7406\u903B\u8F91;\n  const updateComponentPreRender = (instance: VueInstance, next: VNode) => {\n    instance.next = null;//\u6E05\u7A7Anext;\n    instance.vnode = next;//\u5B9E\u4F8B\u4E0A\u6700\u65B0\u7684\u865A\u62DF\u8282\u70B9;\n    updateProps(instance.props, next.props)\n  }\n\n  //\u6839\u636Evue\u7EC4\u4EF6\u5B9E\u4F8B\u521B\u5EFA\u4E00\u4E2Aeffect,\u5E76\u8D4B\u503C\u5230vue\u7EC4\u4EF6\u5B9E\u4F8B\u4E0A;//effect\u4E2D\u5C06\u521B\u5EFA\u4E00\u4E2A\u865A\u62DF\u8282\u70B9,\u5E76\u5C06\u865A\u62DF\u8282\u70B9\u6302\u8F7D\u5230\u5BB9\u5668\u4E0A;\n  const setupRenderEffect = (instance: VueInstance, container: RenderContainer, anchor: HTMLElement | Text | null | undefined = null) => {\n    const { render } = instance\n    const componentUpdateFn = () => {//\u533A\u5206\u662F\u521D\u59CB\u5316,\u8FD8\u662F\u8981\u66F4\u65B0;\n      //console.log('instance--->', instance)\n      if (!instance.isMounted) {\n        //\u521D\u59CB\u5316;\n\n        const { bm, m } = instance //\u751F\u547D\u5468\u671F;\n        //\u751F\u547D\u5468\u671F\u94A9\u5B50-onBeforeMount-\u7EC4\u4EF6\u5B9E\u4F8B\u6302\u8F7D\u524D;\n        if (bm) {\n          invokeArrayFns(bm)\n        }\n\n        const subTree: VNode = render.call(instance.proxy, instance.proxy);//\u5F97\u5230\u4E00\u4E2A\u865A\u62DF\u8282\u70B9;//\u4F5C\u4E3Athis,\u540E\u7EEDthis\u4F1A\u6539;\n        patch(null, subTree, container, anchor)//\u521B\u9020\u4E86subTree\u7684\u771F\u5B9E\u8282\u70B9\u5E76\u4E14\u63D2\u5165\u4E86\u5BB9\u5668;\n\n        //\u751F\u547D\u5468\u671F\u94A9\u5B50-onMounted-\u7EC4\u4EF6\u5B9E\u4F8B\u6302\u8F7D\u540E;\n        if (m) {\n          invokeArrayFns(m)\n        }\n\n        instance.subTree = subTree//\u5C06\u865A\u62DF\u8282\u70B9\u6302\u8F7D\u5230\u5B9E\u4F8B\u4E0A;\n        instance.isMounted = true\n      } else {\n        //\u7EC4\u4EF6\u5185\u90E8\u66F4\u65B0;\n\n        const { next } = instance\n        if (next) {\n          //\u66F4\u65B0\u524D,\u4E5F\u9700\u8981\u62FF\u5230\u6700\u65B0\u7684\u5C5E\u6027\u6765\u8FDB\u884C\u66F4\u65B0;\n          updateComponentPreRender(instance, next)\n        }\n\n        //console.log('\u7EC4\u4EF6\u5185\u90E8\u66F4\u65B0;')\n\n        const { bu, u } = instance //\u751F\u547D\u5468\u671F;\n        //\u751F\u547D\u5468\u671F\u94A9\u5B50-onBeforeUpdate-\u7EC4\u4EF6\u5B9E\u4F8B\u66F4\u65B0\u524D;\n        if (bu) {\n          invokeArrayFns(bu)\n        }\n\n        const subTree: VNode = render.call(instance.proxy, instance.proxy);//\u5F97\u5230\u4E00\u4E2A\u65B0\u7684\u8282\u70B9;\n        patch(instance.subTree, subTree, container, anchor)\n        instance.subTree = subTree//\u5C06\u65B0\u8282\u70B9\u4FDD\u5B58\u5230\u5B9E\u4F8B\u4E0A,\u53D8\u6210\u4E0B\u6B21\u66F4\u65B0\u65F6\u7684\u8001\u8282\u70B9;\n\n        //\u751F\u547D\u5468\u671F\u94A9\u5B50-onUpdated-\u7EC4\u4EF6\u5B9E\u4F8B\u66F4\u65B0\u540E;\n        if (u) {\n          invokeArrayFns(u)\n        }\n      }\n    }\n\n    //\u7EC4\u4EF6\u7684\u5F02\u6B65\u66F4\u65B0;\n    const effect = new ReactiveEffect(componentUpdateFn, () => queueJob(instance.update as Function))//\u9ED8\u8BA4\u521B\u5EFA\u65F6\u662F\u4E0D\u4F1A\u8FD0\u884C\u7B2C\u4E00\u4E2A\u5165\u53C2\u7684\u51FD\u6570\u7684;\n\n    //\u5C06\u7EC4\u4EF6\u5F3A\u5236\u66F4\u65B0\u7684\u903B\u8F91\u4FDD\u5B58\u5230\u4E86\u7EC4\u4EF6\u7684\u5B9E\u4F8B\u4E0A,\u540E\u7EED\u53EF\u4EE5\u4F7F\u7528;\n    const update = instance.update = effect.run.bind(effect)//\u8C03\u7528effect.run()\u53EF\u4EE5\u8BA9\u7EC4\u4EF6\u5F3A\u5236\u91CD\u65B0\u6E32\u67D3; //\u6267\u884C\u8FD0\u884C\u7B2C\u4E00\u4E2A\u5165\u53C2\u7684\u51FD\u6570;\n    update()\n  }\n\n  //\u6BD4\u5BF9\u65B0\u65E7\u7EC4\u4EF6\u5BF9\u5E94\u7684\u865A\u62DF\u8282\u70B9,\u770B\u662F\u5426\u8981\u66F4\u65B0;\n  const shouldUpdateComponent = (n1: RenderVNode, n2: RenderVNode) => {\n    //\u63D2\u69FD\u5C31\u662Fchildren;\n    const { props: prevProps, children: prevChildren } = n1;\n    const { props: nextProps, children: nextChildren } = n2;\n    if (prevProps === nextProps) {\n      return false\n    }\n    //\u53EA\u8981\u6709\u63D2\u69FD\u5C31\u5F3A\u5236\u8FDB\u884C\u66F4\u65B0,\u4E0D\u7528\u6BD4\u5BF9;\n    if (prevChildren || nextChildren) {\n      return true\n    }\n    return hasPropsChanged(prevProps, nextProps)\n  }\n\n  //\u66F4\u65B0\u7EC4\u4EF6;\n  const updateComponent = (n1: RenderVNode, n2: RenderVNode) => {\n    //instance.props \u662F\u54CD\u5E94\u5F0F\u7684,\u800C\u4E14\u53EF\u4EE5\u66F4\u6539; \u5C5E\u6027\u7684\u66F4\u65B0\u4F1A\u5BFC\u81F4\u9875\u9762\u91CD\u65B0\u6E32\u67D3;\n    //debugger\n    const instance = (n2.component = n1.component)//\u5BF9\u4E8E\u5143\u7D20\u800C\u8A00,\u590D\u7528\u7684\u662Fdom\u8282\u70B9;\u5BF9\u4E8E\u7EC4\u4EF6\u6765\u8BF4,\u590D\u7528\u7684\u662F\u5B9E\u4F8B;//\u800C\u6267\u884C\u8FD9\u4E2A\u65B9\u6CD5,\u5FC5\u5B9A\u8981\u590D\u7528\u7EC4\u4EF6,\u51CF\u5C11\u82B1\u9500;\n\n    //\u5C5E\u6027\u66F4\u65B0;\n    //updateProps(instance, prevProps, nextProps)\n    //\u540E\u7EED\u63D2\u69FD\u53D1\u751F\u4E86\u53D8\u5316 \u903B\u8F91\u548CupdateProps()\u80AF\u5B9A\u662F\u4E0D\u4E00\u6837;\n\n    //\u6CA1\u5FC5\u8981\u5206\u522B\u6BD4\u5BF9props\u53CA\u63D2\u69FD,\u53EA\u8981\u4E00\u4E2A\u65B9\u6CD5\u786E\u5B9A\u662F\u5426\u8981\u66F4\u65B0,\u4E4B\u540E\u76F4\u63A5\u8C03\u7528vue\u7EC4\u4EF6\u5B9E\u4F8B\u7684\u66F4\u65B0\u65B9\u6CD5\u5C31\u53EF\u4EE5\u4E86;\n    //\u9700\u8981\u66F4\u65B0\u5C31\u5F3A\u5236\u8C03\u7528\u7EC4\u4EF6\u7684update()\u65B9\u6CD5;\n    if (shouldUpdateComponent(n1, n2)) {\n      instance.next = n2;//\u5C06\u65B0\u7684\u865A\u62DF\u8282\u70B9\u653E\u5230next\u5C5E\u6027\u4E0A;\n      //debugger\n      instance.update()//\u7EDF\u4E00\u8C03\u7528update()\u65B9\u6CD5\u6765\u8FDB\u884C\u66F4\u65B0;\n    }\n  }\n  //\u5904\u7406\u7EC4\u4EF6;\n  const processComponent = (n1: RenderVNode, n2: RenderVNode, container: RenderContainer, anchor: HTMLElement | Text | null | undefined = null) => {//\u7EDF\u4E00\u5904\u7406\u7EC4\u4EF6,\u91CC\u9762\u518D\u533A\u5206\u662F\u666E\u901A\u7684\u8FD8\u662F\u51FD\u6570\u5F0F\u7EC4\u4EF6;\n    //\u4E0D\u8FC7\u51FD\u6570\u5F0F\u7EC4\u4EF6\u5DF2\u7ECF\u4E0D\u5EFA\u8BAE\u4F7F\u7528\u4E86;[\u51FD\u6570\u5F0F\u7EC4\u4EF6-vue\u5B98\u65B9\u6587\u6863](https://v3.cn.vuejs.org/guide/migration/functional-components.html#\u51FD\u6570\u5F0F\u7EC4\u4EF6);\n\n    if (n1 === null) {\n      mountComponent(n2, container, anchor)//\u7EC4\u4EF6\u7684\u6302\u8F7D;\n    } else {\n      //\u7EC4\u4EF6\u66F4\u65B0\u9760\u7684\u662Fprops;\n      updateComponent(n1, n2)\n    }\n\n  }\n  //\u5BF9\u6BD4\u65B0\u65E7\u865A\u62DF\u8282\u70B9,\u5E76\u521B\u5EFA\u51FA`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`,\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u865A\u62DF\u8282\u70B9\u4E0A,\u540C\u65F6\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u5BB9\u5668\u4E0A;\n  const patch = (n1: RenderVNode, n2: RenderVNode, container: RenderContainer, anchor: HTMLElement | Text | null | undefined = null) => {\n    /* //\u6838\u5FC3\u7684patch\u65B9\u6CD5;\n      //\u5BF9\u6BD4\u65B0\u65E7\u865A\u62DF\u8282\u70B9:\n      //\u82E5\u65B0\u65E7\u8282\u70B9\u4E00\u81F4,\u5C31\u76F4\u63A5\u9000\u51FA;\n      //\u82E5\u65B0\u65E7\u8282\u70B9\u4E0D\u4E00\u81F4;\n      //\u82E5\u65B0\u8282\u70B9\u5143\u7D20\u7C7B\u578B\u4E3A\u6587\u672C,\u90A3\u4E48\u7528processText()\u521B\u5EFA\u6587\u672C\u8282\u70B9\u8FDB\u884C\u5904\u7406;\n      //\u82E5\u65B0\u8282\u70B9\u5143\u7D20\u7C7B\u578B\u4E0D\u4E3A\u6587\u672C,\u90A3\u4E48\u7528processElement()\u521B\u5EFA\u5BF9\u5E94\u5143\u7D20\u8FDB\u884C\u5904\u7406;\n  \n      //n2\u5982\u679C\u4EE3\u8868\u6570\u5B57,\u90A3\u4E48\u5E94\u8BE5\u4E3A`h(Text, '\u6587\u672C')`\u800C\u4E0D\u662F`h('\u6587\u672C')\u6216h(undefined,'\u6587\u672C')`;\n      //\u4E5F\u5C31\u662F\u8BF4,\u6587\u672C\u53EA\u4F1A\u51FA\u73B0\u5728`h('h1', {}, [h('span', '\u6587\u672C'),'\u6587\u672C\u4E8C'])`\u4E2D\u7684\u7B2C\u4E09\u4E2A\u53C2\u6570\u4E2D;\n      //\u800C`h()\u7B2C\u4E09\u4E2A\u53C2\u6570`\u7684\u5904\u7406\u4E00\u5B9A\u4F1A\u7ECF\u8FC7`mountChildren()`\u8FD9\u4E2A\u51FD\u6570;\n      //`mountChildren()`\u5185\u90E8\u8C03\u7528`normalize()`\u628A\u5B57\u7B26\u4E32\u8F6C\u6210\u7C7B\u578B\u4E3Asymbol\u7684VNode;\n     */\n\n\n    //\u65B0\u65E7\u8282\u70B9\u5B8C\u5168\u4E00\u81F4;\n    if (n1 === n2) {\n      return\n    }\n\n    //\u65E7\u8282\u70B9\u5B58\u5728,\u4F46\u65B0\u65E7\u8282\u70B9\u5143\u7D20\u7C7B\u578B\u4E0D\u4E00\u81F4;\n    //\u5224\u65AD\u4E24\u4E2A\u8282\u70B9\u662F\u5426\u76F8\u540C,\u4E0D\u76F8\u540C\u5C31\u5378\u8F7D\u518D\u6DFB\u52A0;\n    //debugger\n    if (n1 && !isSameVnode(n1, n2)) {\n      unmount(n1)//\u5220\u9664\u8001\u7684;\n      n1 = null;//\u65E7\u8282\u70B9\u7F6E\u4E3Anull,\u518D\u8D70\u540E\u7EED\u7684\u65B0\u589E\u6D41\u7A0B;\n    }\n\n\n    //\u865A\u62DF\u8282\u70B9\u7C7B\u578B\u4E3A\u5143\u7D20\u65F6\u6BD4\u5BF9: \u5143\u7D20\u7C7B\u578B,\u5143\u7D20\u5C5E\u6027,\u5143\u7D20\u5B50\u8282\u70B9;\n    //\u865A\u62DF\u8282\u70B9\u7C7B\u578B\u4E3A\u6587\u672C\u65F6\u6BD4\u5BF9: \u6587\u672C\u5185\u90E8(\u5176\u5B9E\u5C31\u662F\u5143\u7D20\u5B50\u8282\u70B9);\n    //\u865A\u62DF\u8282\u70B9\u7C7B\u578B\u4E3A\u7EC4\u4EF6\u65F6\u6BD4\u5BF9: \u7EC4\u4EF6\u5C5E\u6027,\u63D2\u69FD;\n    const { type, shapeFlag } = n2\n    switch (type) {\n      case Text://\u6587\u672C\u7684\u6807\u7B7E;\n        processText(n1, n2, container)\n        break;\n\n      case Fragment://\u65E0\u7528\u7684\u6807\u7B7E;\n        processFragment(n1, n2, container)\n        break\n      default: //\u5143\u7D20\u7684\u6807\u7B7E;\n        if (shapeFlag & ShapeFlags.ELEMENT) {\n          //debugger\n          processElement(n1, n2, container, anchor)\n        } else if (shapeFlag & ShapeFlags.COMPONENT) {\n          //\u6587\u6863\u4E00\u822C\u53EA\u80FD\u5728\u4F1A\u7684\u65F6\u5019\u770B,\u4E0D\u4F1A\u7684\u65F6\u5019\u5F88\u96BE\u770B\u61C2;\n          processComponent(n1, n2, container, anchor)\n        }\n        break\n    }\n  }\n\n\n  const unmount = (vnode: RenderVNode) => {\n    hostRemove(vnode.el)//\u5220\u9664\u6389\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u7684DOM\u5143\u7D20;\n  }\n\n  //\u7528\u65B0\u4F20\u5165\u7684\u865A\u62DF\u8282\u70B9,\u5E76\u628A\u865A\u62DF\u8282\u70B9\u6302\u8F7D\u5230\u5BB9\u5668\u4E0A;\n  const render = (vnode: RenderVNode, container: RenderContainer) => {//\u6E32\u67D3\u8FC7\u7A0B\u662F\u7528\u4F20\u5165\u7684`renderOptions`\u6765\u8FDB\u884C\u6E32\u67D3;\n    //console.log('vnode--->', vnode, '\\n container--->', container)\n\n    //\u5982\u679C\u5F53\u524Dvnode\u662F\u7A7A\u7684\u8BDD;\n    if (vnode === null || vnode === undefined) {\n      //\u5378\u8F7D\u903B\u8F91;\n\n      //\u4E4B\u524D\u786E\u5B9E\u6E32\u67D3\u8FC7\u4E86,\u90A3\u4E48\u5C31\u5378\u8F7D\u6389dom;\n      if (container._vnode) {\n        unmount(container._vnode)\n      }\n\n    } else {\n      //\u8FD9\u91CC\u5373\u6709\u521D\u59CB\u5316\u7684\u903B\u8F91,\u53C8\u6709\u66F4\u65B0\u7684\u903B\u8F91;\n      patch(container._vnode || null, vnode, container)\n    }\n    container._vnode = vnode\n  }\n  return {\n    render\n  }\n}\n\n//\u6587\u672C\u7684\u5904\u7406,\u9700\u8981\u81EA\u5DF1\u589E\u52A0\u7C7B\u578B;\u56E0\u4E3A\u4E0D\u80FD\u901A\u8FC7`document.createElement('\u6587\u672C')`\u521B\u5EFA\u6587\u672C\u5143\u7D20;\n//\u6839\u539F\u56E0\u662Fh()\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\u53EA\u80FD\u662F\u5B57\u7B26\u4E32,\u4F46\u8FD9\u4E2A\u5B57\u7B26\u4E32\u4E0D\u80FD\u5224\u65AD\u5B83\u4E3ADOM\u7C7B\u578B\u540D\u8FD8\u662F\u6587\u672C;\n//\u800C\u6587\u672C\u5FC5\u5B9A\u662F`h()`\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u6216\u7B2C\u4E09\u4E2A\u53C2\u6570\u4E2D\u7684,\u5728\u5904\u7406\u5B50\u8282\u70B9\u65F6\u5904\u7406\u5305\u88C5\u4E00\u4E0B\u6587\u672C\u4E3AVNode\u8282\u70B9\u5C31\u597D\u4E86;\n//\u5982\u679C`render()\u7B2C\u4E00\u4E2A\u53C2\u6570`\u4F20\u5165null\u7684\u65F6\u5019\u5728\u6E32\u67D3\u65F6,\u5219\u662F\u5378\u8F7D\u903B\u8F91,\u9700\u8981\u5C06DOM\u8282\u70B9\u5220\u6389;", "\n/* //\u53EF\u4EE5\u628Ah()\u51FD\u6570\u5F53\u6210\u4E00\u4E2A\u865A\u62DF\u8282\u70B9\u5C31\u597D\u4E86;\n//h()\u51FD\u6570\u7684\u7528\u6CD5: \n//h('div');\n\n//h('div',null,'\u6587\u672C\u8282\u70B9\u4E00');\n//h('div',null,h('span'));\n//h('div',null,h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C'));\n//h('div',null,[h('span'),h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C')]);\n//h('div',null,['\u6587\u672C\u8282\u70B9\u4E00',h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C')]);\n//h('div',null,'\u6587\u672C\u8282\u70B9\u4E00','\u6587\u672C\u8282\u70B9\u4E8C');\n//h('div',null,'\u6587\u672C\u8282\u70B9\u4E00',h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C'));\n\n//h('div',{},'\u6587\u672C\u8282\u70B9\u4E00');\n//h('div',{},h('span'));\n//h('div',{},h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C'));\n//h('div',{},[h('span'),h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C')]);\n//h('div',{},['\u6587\u672C\u8282\u70B9\u4E00',h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C')]);\n//h('div',{},'\u6587\u672C\u8282\u70B9\u4E00','\u6587\u672C\u8282\u70B9\u4E8C');\n//h('div',{},'\u6587\u672C\u8282\u70B9\u4E00',h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C'));\n\n//h('div',h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E00\u7684\u6587\u672C'),h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E8C\u7684\u6587\u672C'));//\u8FD9\u79CD\u5199\u6CD5\u4E0D\u884C;\u867D\u7136\u80FD\u7F16\u8BD1,\u4F46`\u7B2C\u4E8C\u4E2A\u53C2\u6570h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E00\u7684\u6587\u672C')`\u4E0D\u4F1A\u7F16\u8BD1\u51FA\u6765;\u540C\u65F6\u4F1A\u628A`\u7B2C\u4E8C\u4E2A\u53C2\u6570h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E00\u7684\u6587\u672C')`\u5F53\u6210`props`;\n */\n\nimport { isArray, isObject, isString } from \"@vue/shared\"\nimport { createVnode, isVnode, VNode, VNodeChildren, VNodeProps } from \"./vnode\"\n\n\n\nexport function h(type: string, propsChildren: VNodeProps | VNodeChildren, children: VNodeChildren): VNode {//\u5176\u5B9E\u7684\u9664\u4E863\u4E2A\u4E4B\u5916\u7684\u80AF\u5B9A\u662F\u5B69\u5B50(\u5B50\u8282\u70B9);\n  const theLength = arguments.length\n\n\n  //h('div',{style:{'color':'red'}});\n  //h('div',h('span'));\n  //h('div',[h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E00\u7684\u6587\u672C'),h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E8C\u7684\u6587\u672C')]);\n  //h('div','\u6587\u672C\u8282\u70B9\u4E00');\n  if (theLength === 2) {//\u4E3A\u4EC0\u4E48\u8981\u5C06\u5B50\u8282\u70B9\u5305\u88C5\u6210\u6570\u7EC4,\u56E0\u4E3A\u5143\u7D20\u53EF\u4EE5\u5FAA\u73AF\u521B\u5EFA;//\u4F46\u6587\u672C\u5C31\u4E0D\u9700\u8981\u5305\u88C5\u4E86;\n    if (isObject(propsChildren) && !isArray(propsChildren)) {\n      //\u662F\u5BF9\u8C61\u4F46\u4E0D\u662F\u6570\u7EC4\u5C31\u8D70\u4E0B\u9762;\n\n      if (isVnode(propsChildren)) {//\u865A\u62DF\u8282\u70B9\u5C31\u5305\u88C5\u6210\u6570\u7EC4;\n        return createVnode(type, null, [propsChildren as (string | number | VNode)])\n      }\n\n      //\u4E0D\u662F\u6570\u7EC4,\u5C31\u4EE3\u8868\u5B83\u662F\u5BF9\u8C61?\n      return createVnode(type, propsChildren as VNodeProps)//\u4E0D\u662F\u865A\u62DF\u8282\u70B9\u7684\u5BF9\u8C61,\u5C31\u8BA4\u4E3A\u5B83\u662F\u5C5E\u6027;\n    } else {\n      return createVnode(type, null, propsChildren as VNodeChildren)//\u662F\u6570\u7EC4\u6216\u6587\u672C;\n    }\n  } else {\n    if (theLength > 3) {\n      children = Array.from(arguments).slice(2)\n    } else if (theLength === 3 && isVnode(children)) {//h('div',{},h('span'));\n      //\u7B49\u4E8E3\u4E2A;\n      children = [children as VNode]\n    }\n\n    /* //\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u5B57\u7B26\u4E32\u65F6;\n    if(isString(propsChildren)){\n      return createVnode(type, null,[propsChildren, children])\n    } */\n\n\n    //\u5176\u5B83;\n    //\u5982\u679C\u6709\u4E09\u4E2A\u53C2\u6570,\u9ED8\u8BA4\u7B2C\u4E8C\u4E2A\u53C2\u6570\u5C31\u662Fprops;\n    return createVnode(type, propsChildren as object, children)//children\u7684\u60C5\u51B5\u6709\u4E24\u79CD--\u6587\u672C\u6216\u6570\u7EC4;\n  }\n}\n\n/* function h(type, propsOrChildren, children) {\n  const l = arguments.length;\n  if (l === 2) {\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n      // single vnode without props\n      if (isVNode(propsOrChildren)) {\n        return createVNode(type, null, [propsOrChildren]);\n      }\n      // props without children\n      return createVNode(type, propsOrChildren);\n    }\n    else {\n      // omit props\n      return createVNode(type, null, propsOrChildren);\n    }\n  }\n  else {\n    if (l > 3) {\n      children = Array.prototype.slice.call(arguments, 2);\n    }\n    else if (l === 3 && isVNode(children)) {\n      children = [children];\n    }\n    return createVNode(type, propsOrChildren, children);\n  }\n} */", "import { currentInstance, setCurrentInstance } from \"./component\"\nimport { VueInstance } from \"./renderer\"\n\n//\u5B9A\u4E49\u4E00\u4E9B\u751F\u547D\u5468\u671F\u76F8\u5173\u7684\u679A\u4E3E;\nexport const enum LifecycleHooks {\n  BEFORE_MOUNT = 'bm',//\u6302\u8F7D\u524D;\n  MOUNTED = 'm',//\u6302\u8F7D\u540E;\n  BEFORE_UPDATE = 'bu',//\u66F4\u65B0\u524D;\n  UPDATED = 'u',//\u66F4\u65B0\u540E;\n}\n\ntype HookFunction = (hook: Function) => any\n\nfunction createHook(type: string): HookFunction {\n  //\u8FD4\u56DE\u51FA\u53BB\u7684\u51FD\u6570\u662F\u4E2A\u95ED\u5305;\n  //\u95ED\u5305\u91CC\u7684\u5FC5\u5B9A\u6709\u5F53\u65F6\u7684\u53D8\u91CFtarget,\u800C\u53D8\u91CFtarget\u5219\u6307\u5411\u51FD\u6570\u521B\u5EFA\u65F6\u7684currentInstance\u53D8\u91CF,\u800CcurrentInstance\u53D8\u91CF\u5219\u6307\u5411\u4E00\u4E2Avue\u7EC4\u4EF6\u5B9E\u4F8B\u7684\u5F15\u7528\u5730\u5740;\n  //\u6545\u800Ctarget\u4E00\u76F4\u6307\u5411createHook()\u88AB\u8C03\u7528\u65F6vue\u7EC4\u4EF6\u5B9E\u4F8B;\n  //\u867D\u7136currentInstance\u4E00\u76F4\u5728\u53D8null\u6216\u53E6\u4E00\u4E2A\u7EC4\u4EF6,\u4F46target\u5219\u53EA\u662FcurrentInstance\u5728\u8FD4\u56DE\u51FA\u53BB\u7684HookFunction\u7B2C\u4E00\u6B21\u88AB\u8C03\u7528\u65F6\u6240\u5F15\u7528\u7684`\u5F53\u524D\u6267\u884Cvue\u7EC4\u4EF6\u5B9E\u4F8B`;\n  return (hook: Function, target: VueInstance = currentInstance) => {\n    //hook\u9700\u8981\u7ED1\u5B9A\u5230\u5BF9\u5E94\u7684\u5B9E\u4F8B\u4E0A;\n    //\u4E4B\u524D\u5199\u7684\u4F9D\u8D56\u6536\u96C6,\u4EFF\u5B83\u7684\u903B\u8F91,\u628A\u5F53\u524D\u5B9E\u4F8B\u653E\u5230\u5168\u5C40\u73AF\u5883\u4E0A;\n    //debugger\n\n    //\u8981\u786E\u4FDD\u662F\u5728vue\u7EC4\u4EF6\u5B9E\u4F8B\u7684setup()\u4E2D\u624D\u6267\u884C;\n    if (target) {\n      //\u5173\u8054\u6B64currentInstance\u548Chook;\n\n      const hooks: Array<Function> = target[type] || (target[type] = [])\n      // if(!target[type]){\n      //   target[type] = []\n      // }\n      // const hooks = target[type]\n\n      //hooks.push(hook)//\u7A0D\u540E\u6267\u884Chook\u7684\u65F6\u5019,\u8FD9\u4E2Ainstance\u6307\u4EE3\u7684\u662F\u8C01\u5462?//\u5373hook\u4E2D\u901A\u8FC7getCurrentInstance()\u5F97\u5230\u7684\u5F53\u524D\u5B9E\u4F8B\u7684instance\u6307\u4EE3\u662F\u8C01?\n      //console.log('hooks--->', hooks)\n\n      //\u7528\u4E8E\u5728\u8C03\u7528\u94A9\u5B50\u51FD\u6570\u524D,\u628A`\u5F53\u524D\u6267\u884Cvue\u7EC4\u4EF6\u5B9E\u4F8B`\u8BBE\u7F6E\u4E3Ahook\u88AB\u521B\u5EFA\u65F6\u7684vue\u7EC4\u4EF6\u5B9E\u4F8B;\n      const wrappedHook = () => {\n        setCurrentInstance(target)\n        hook()//\u5C06\u5F53\u524D\u5B9E\u4F8B\u4FDD\u5B58\u5230currentInstance\u4E0A;\n        setCurrentInstance(null)\n      }\n\n      hooks.push(wrappedHook)\n\n\n    }\n  }\n}\n//hooks.forEach()//\u5373hook\u4E2D\u901A\u8FC7getCurrentInstance()\u5F97\u5230\u7684\u5F53\u524D\u5B9E\u4F8B\u7684instance\u6307\u4EE3\u662F\u8C01?\n\n\n//\u5DE5\u5382\u6A21\u5F0F;\n//\u751F\u547D\u5468\u671F\u94A9\u5B50-onBeforeMount-\u7EC4\u4EF6\u5B9E\u4F8B\u6302\u8F7D\u524D;\nexport const onBeforeMount = createHook(LifecycleHooks.BEFORE_MOUNT)\n\n//\u751F\u547D\u5468\u671F\u94A9\u5B50-onMounted-\u7EC4\u4EF6\u5B9E\u4F8B\u6302\u8F7D\u540E;\nexport const onMounted = createHook(LifecycleHooks.MOUNTED)\n\n//\u751F\u547D\u5468\u671F\u94A9\u5B50-onBeforeUpdate-\u7EC4\u4EF6\u5B9E\u4F8B\u66F4\u65B0\u524D;\nexport const onBeforeUpdate = createHook(LifecycleHooks.BEFORE_UPDATE)\n\n//\u751F\u547D\u5468\u671F\u94A9\u5B50-onUpdated-\u7EC4\u4EF6\u5B9E\u4F8B\u66F4\u65B0\u540E;\nexport const onUpdated = createHook(LifecycleHooks.UPDATED)\n\n//a -> h(B) -> b ->h(c); \n//JavaScript\u662F\u5355\u7EBF\u7A0B\u7684,\u6240\u4EE5h()\u5FC5\u5B9A\u662F\u4F9D\u6B21\u6267\u884C\u7684,\u6545\u800Ch()\u4E2D\u7684setup()\u4E5F\u662F\u4F9D\u6B21\u5355\u5411\u6267\u884C\u7684;\n//\u6545\u800C\u4E0D\u4F1A\u8BA9\u7EC4\u4EF6A\u4E2D\u7684setup()\u6267\u884C\u8FC7\u7A0B\u4E2D\u8FD8\u6267\u884C\u7EC4\u4EF6B\u7684h()\u4E2D\u7684setup();", "\nexport type NodeOperateOptions = {\n  insert(child: Node, parent: Element, anchor?: Node): void;\n  remove(child: Node): void;\n  setElementText(el: Element, text: string): void;\n  setText(node: Node, text: string): void;\n  querySelector(selector: any): any;\n  parentNode(node: Node): ParentNode;\n  nextSibling(node: Node): ChildNode;\n  createElement(tagName: string): HTMLElement;\n  createText(text: string): Text;\n}\nexport const nodeOps: NodeOperateOptions = {\n  //\u589E\u52A0 \u5220\u9664 \u4FEE\u6539 \u67E5\u8BE2\n\n  //\u63D2\u5165\u8282\u70B9;\n  insert(child: Node, parent: Element, anchor: Node = null) {\n    parent.insertBefore(child, anchor)//insertBefore\u53EF\u4EE5\u7B49\u4EF7\u4E8EappendChild;\n  },\n\n  //remove-\u5220\u9664\u8282\u70B9;\n  remove(child: Node) {\n    const parentNode = child.parentNode;\n    if (parentNode) {\n      parentNode.removeChild(child)\n    }\n  },\n\n  //\u6587\u672C\u8282\u70B9,\u5143\u7D20\u4E2D\u7684\u5185\u5BB9;\n\n  //\u4FEE\u6539\u5143\u7D20\u4E2D\u7684\u6587\u672C;-\u5F53\u4F20\u5165\u7684\u662F\u5143\u7D20\u65F6;\n  setElementText(el: Element, text: string) {\n    el.textContent = text\n  },\n  //\u8BBE\u7F6E\u6587\u672C\u8282\u70B9;-\u5F53\u4F20\u5165\u7684\u662F\u6587\u672C\u8282\u70B9\u65F6;\n  setText(node: Node, text: string) {\n    node.nodeValue = text\n  },\n\n  //\u67E5\u8BE2\u5143\u7D20;\n  querySelector(selector) {\n    return document.querySelector(selector)\n  },\n  //\u67E5\u8BE2\u7236\u8282\u70B9;\n  parentNode(node: Node) {\n    return node.parentNode\n  },\n  //\u67E5\u8BE2\u5144\u5F1F\u8282\u70B9;\n  nextSibling(node: Node) {\n    return node.nextSibling\n  },\n\n  //\u521B\u5EFA\u5143\u7D20\u8282\u70B9;\n  createElement(tagName: string) {\n    return document.createElement(tagName)\n  },\n  //\u521B\u5EFA\u6587\u672C\u8282\u70B9;\n  createText(text: string) {\n    return document.createTextNode(text)\n  }\n\n\n}\n/* //\u8981\u5199\u7684\u65B9\u6CD5;\nconst fang = {\n  insert: hostInsert,//\u63D2\u5165\u8282\u70B9;\n  remove: hostRemove,//\u5220\u9664\u8282\u70B9;\n  patchProp: hostPatchProp,//\u5C5E\u6027\u64CD\u4F5C,\u8981\u5355\u72EC\u53BB\u5199;//patch\u5B9E\u9645\u4E0A\u5C31\u662F\u8865\u4E01\u6216\u6BD4\u5BF9\u7684\u610F\u601D;//\u56E0\u4E3A\u8FD9\u4E2A\u65B9\u6CD5\u5373\u8981\u80FD\u521B\u5EFA,\u53C8\u8981\u80FD\u4FEE\u6539,\u8FD8\u8981\u80FD\u79FB\u9664;\n  createElement: hostCreateElement,//\u521B\u5EFA\u5143\u7D20;\n  createText: hostCreateText,//\u521B\u5EFA\u6587\u672C;\n  createComment: hostCreateComment,//\u521B\u5EFA\u6CE8\u91CA;\n  setText: hostSetText,//\u8BBE\u7F6E\u6587\u672C\u8282\u70B9\u6587\u672C;\n  setElementText: hostSetElementText,//\u8BBE\u7F6E\u5143\u7D20\u8282\u70B9\u6587\u672C;\n  parentNode: hostParentNode,//\u83B7\u53D6\u7236\u8282\u70B9;\n  nextSibling: hostNextSibling,//\u83B7\u53D6\u5144\u5F1F\u8282\u70B9;\n  setScopeId: hostSetScopeId = NOOP,//`NOOP`\u5C31\u662F\u7A7A\u51FD\u6570\u7684\u610F\u601D;\n  cloneNode: hostCloneNode,//\u628A\u8282\u70B9\u62F7\u8D1D;\n  insertStaticContent: hostInsertStaticContent,//\u63D2\u5165\u9759\u6001\u5185\u5BB9;\n} */", "//\u6BD4\u5BF9\u666E\u901A\u5C5E\u6027;\nexport function patchAttr(el: HTMLElement, key: string, nextValue: string) {\n  if (nextValue) {\n    el.setAttribute(key, nextValue)\n  } else {\n    el.removeAttribute(key)\n  }\n}", "//\u6BD4\u5BF9\u7C7B\u540D;\nexport function patchClass(el: HTMLElement, nextValue: string | null) {\n\n  if (nextValue === null) {\n    el.removeAttribute('class')//\u5982\u679C\u4E0D\u9700\u8981class,\u76F4\u63A5\u79FB\u9664;\n  } else {\n    el.className = nextValue\n  }\n}", "function createInvoker<T extends Function | Array<Function>>(callback: T) {\n  if (typeof callback !== 'function') {\n    //\u4E0D\u662F\u51FD\u6570\u65F6;(\u6682\u65F6\u4E0D\u5199)\n    const invoker = (event: any) => {\n      for (let index = 0; index < (invoker.value as Array<Function>).length; index++) {\n        invoker.value[index](event)\n      }\n    };\n    invoker.value = callback\n    return invoker\n\n  }\n\n  const invoker = (event: any) => (invoker.value as Function)(event);\n  invoker.value = callback\n  return invoker\n}\n\n\n//\u6BD4\u5BF9\u4E8B\u4EF6;\n//\u7B2C\u4E00\u6B21\u7ED1\u5B9AonClick\u4E8B\u4EF6-->\u4E8B\u4EF6a; //el._vei = {}; el._vei = {onClick:invoker\u51FD\u6570} invoker\u51FD\u6570.value\u4E3A\u4E8B\u4EF6a; el.addEventListener('click', (event) => invoker.value(event)); el.addEventListener('click', (event) => a(event));\n//\u7B2C\u4E8C\u6B21\u7ED1\u5B9AonClick\u4E8B\u4EF6-->\u4E8B\u4EF6b; //el._vei = {onClick:invoker\u51FD\u6570} invoker\u51FD\u6570.value\u4E3A\u4E8B\u4EF6b; el.addEventListener('click', (event) => invoker.value(event)); el.addEventListener('click', (event) => b(event));\n//\u7B2C\u4E09\u6B21\u7ED1\u5B9AonClick\u4E8B\u4EF6-->null(\u65E0\u4E8B\u4EF6); //el.addEventListener('click', (event) => invoker.value(event)); el._vei = {};\n//\u7B2C\u56DB\u6B21\u7ED1\u5B9AonClick\u4E8B\u4EF6-->[\u4E8B\u4EF6c,\u4E8B\u4EF6d];\n//\u7B2C\u56DB\u6B21\u7ED1\u5B9AonClick\u4E8B\u4EF6-->\u4E8B\u4EF6e;\nexport function patchEvent(el: HTMLElement & { _vei?: object }, eventName: string, nextValue: Function | Array<Function> | null) {\n  //\u4E8B\u4EF6\u7ED1\u5B9A\u90FD\u7F13\u5B58\u5230\u4E86\u5F53\u524DDOM\u4E0A;\n\n\n  //\u53EF\u4EE5\u5148\u79FB\u9664\u6389\u4E8B\u4EF6,\u518D\u91CD\u65B0\u7ED1\u5B9A\u4E8B\u4EF6;\n  //remove -> add ===> add + \u81EA\u5B9A\u4E49\u4E8B\u4EF6(\u91CC\u9762\u8C03\u7528\u7ED1\u5B9A\u7684\u65B9\u6CD5);\n\n  //const invokers = el._vei || (el._vei = {})\n  if (!el._vei) {\n    el._vei = {}\n  }\n  const invokers = el._vei\n\n  const exits = invokers[eventName]//\u5148\u770B\u6709\u6CA1\u6709\u7F13\u5B58\u8FC7;\n\n  //\u76EE\u524D\u8FD9\u91CC\u53EA\u8003\u8651\u5230nextValue\u53EA\u4E3AFunction\u7684\u5904\u7406;\n  //\u6CA1\u6709\u8003\u8651\u5230\u53EF\u80FD\u4E00\u6B21\u4E3AFunction,\u53E6\u4E00\u6B21\u4E3AArray<Function>\u7684\u60C5\u51B5;\n  if (exits && nextValue) {//\u5DF2\u7ECF\u7ED1\u5B9A\u8FC7\u4E8B\u4EF6\u4E86;\n    exits.value = nextValue//\u6CA1\u6709\u5378\u8F7D\u51FD\u6570,\u53EA\u662F\u6539\u4E86invoker.value\u5C5E\u6027;\n  } else {\n    //\u8FD8\u6CA1\u7ED1\u5B9A\u8FC7\u4E8B\u4EF6;\n    //onClick=click;\n    const eventLower = eventName.slice(2).toLowerCase();\n    if (nextValue) {\n      //const invoker = invokers[eventName] = createInvoker(nextValue)\n      invokers[eventName] = createInvoker(nextValue)\n      const invoker = invokers[eventName]\n\n      el.addEventListener(eventLower, invoker)\n    } else if (exits) {\n      //\u5982\u679C\u6709\u8001\u503C,\u9700\u8981\u5C06\u8001\u7684\u7ED1\u5B9A\u4E8B\u4EF6\u79FB\u9664\u6389;\n      el.removeEventListener(eventLower, exits)\n      invokers[eventName] = undefined\n    }\n  }\n\n}", "//\u6BD4\u5BF9\u6837\u5F0F;\nexport function patchStyle(el: HTMLElement, prevValue: object | null | undefined = {}, nextValue: object | null | undefined = {}) {\n  //debugger\n  //\u6837\u5F0F\u9700\u8981\u6BD4\u5BF9\u5DEE\u5F02;\n  //1. \u65B0\u5BF9\u8C61\u7684\u76F4\u63A5\u8D4B\u503C;\n  //2. \u8001\u5BF9\u8C61\u7684\u7528key\u770B\u65B0\u7684\u6709\u6CA1\u6709\u540C\u540Dkey,\u5982\u679C\u6CA1\u6709,\u5219\u4EE3\u8868\u8981\u628A\u8001\u5BF9\u8C61\u7684key\u5C5E\u6027\u53BB\u9664;\n\n  //\u5176\u5B9E\u4E5F\u53EF\u4EE5\u5148\u6E05\u7A7A\u8001\u5BF9\u8C61\u4E0A\u7684\u6240\u6709key,\u518D\u8D4B\u503C\u4E0A\u65B0\u5BF9\u8C61\u7684\u6240\u6709key;\n  /* //\u786E\u4FDD\u5FC5\u5B9A\u4E3A\u5BF9\u8C61;\n  if (!prevValue) {\n    prevValue = {}\n  }\n  if (!nextValue) {\n    nextValue = {}\n  } */\n\n  for (const key in nextValue) {\n    //\u7528\u65B0\u7684\u76F4\u63A5\u8986\u76D6\u5373\u53EF;\n    el.style[key] = nextValue[key]\n  }\n\n  if (!prevValue) {\n    return\n  }\n  for (const key in prevValue) {\n    //console.log('nextValue[key]--->', nextValue[key])\n    if (!(nextValue[key] === undefined || nextValue[key] === null)) {\n      continue\n    }\n    el.style[key] = null\n  }\n}", "\n//null,\u503C;\n//\u503C,\u503C;\n//\u503C,null;\n\nimport { patchAttr } from \"./modules/attr\";\nimport { patchClass } from \"./modules/class\";\nimport { patchEvent } from \"./modules/event\";\nimport { patchStyle } from \"./modules/style\";\n\n//patch\u5B9E\u9645\u4E0A\u5C31\u662F\u8865\u4E01\u6216\u6BD4\u5BF9\u7684\u610F\u601D;\n//\u56E0\u4E3A\u8FD9\u4E2A\u65B9\u6CD5\u5373\u8981\u80FD\u521B\u5EFA,\u53C8\u8981\u80FD\u4FEE\u6539,\u8FD8\u8981\u80FD\u79FB\u9664;\n//dom\u5C5E\u6027\u7684\u64CD\u4F5Capi;\n\n\nexport function patchProp(el: HTMLElement, key: string, prevValue: any, nextValue: unknown) {\n\n  //[vue\u6A21\u5757\u89E3\u6790](https://vue-next-template-explorer.netlify.app/);\u7528\u6765\u770B\u6A21\u677F\u8F6C\u6210VNode;\n\n  //\u8981\u5355\u72EC\u5904\u7406\u7684:\n  if (key === 'class') {//\u7C7B\u540D-el.className;\n    //class=\"a\" class=\"a b\" class;\n    patchClass(el, nextValue as string | null)\n  } else if (key === 'style') {//\u6837\u5F0F-el.style;\n    //style {color:'red',fontSize:'12'} {color:'blue',background:'red'};\n    patchStyle(el, prevValue as object | null, nextValue as object | null)\n  } else if (/^[o][n][^a-z]/.test(key)) {//\u4E8B\u4EF6-events;addEventListener;\n    //\u4E00\u822C\u6A21\u677F\u4E2D`<div @xx>\u6587\u672C</div>`\u4F1A\u8F6C\u6210`[\"div\", { onXx: () => {} }, \"\u6587\u672C\"]`;\n    //\u5373\u5C5E\u6027\u540D\u4EE5\u5C0F\u5199on\u5F00\u5934,\u540E\u65B9\u5982\u679C\u662F\u5B57\u6BCD,\u5219\u8F6C\u4E3A\u5927\u5199;\n    patchEvent(el, key, nextValue as Function | Array<Function> | null)\n  } else {//\u666E\u901A\u5C5E\u6027;//\u6B63\u5E38\u5C5E\u6027\u53EF\u4EE5\u7528el.setAttribute();\n    patchAttr(el, key, nextValue as string)\n  }\n\n\n}\n//\u865A\u62DFDOM;\n//\u5982\u4F55\u521B\u5EFA\u771F\u5B9EDOM;\n//dom-diff \u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217;\n//\u7EC4\u4EF6\u7684\u5B9E\u73B0;\u6A21\u677F\u6E32\u67D3; \u6838\u5FC3\u7684\u7EC4\u4EF6\u66F4\u65B0\u7B49\u7B49; \u7EC4\u4EF6 ....;\n//\u6A21\u677F\u7F16\u8BD1-\u7F16\u8BD1\u539F\u7406 + \u4EE3\u7801\u8F6C\u5316 + \u4EE3\u7801\u751F\u6210 + (\u7F16\u8BD1\u4F18\u5316);\n\n/* //\u4E00\u6B21\u6BD4\u5BF9\u591A\u4E2A\u5C5E\u6027;\nfor (const key in obj) {\n  patchProp(el, key, null, obj[key])\n} */"],
  "mappings": "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",
  "names": []
}
