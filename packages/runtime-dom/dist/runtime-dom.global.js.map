{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/index.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/renderer.ts", "../../runtime-core/src/h.ts", "../src/nodeOps.ts", "../src/modules/attr.ts", "../src/modules/class.ts", "../src/modules/event.ts", "../src/modules/style.ts", "../src/patchProp.ts"],
  "sourcesContent": ["\nimport { createRenderer } from '@vue/runtime-core'\nimport { RenderOptions } from 'packages/runtime-core/src/renderer';\nimport { nodeOps } from \"./nodeOps\";\nimport { patchProp } from \"./patchProp\";\n\n\nconst renderOptions: RenderOptions = Object.assign(nodeOps, { patchProp })//domAPI \u5C5E\u6027api;\n//console.log('renderOptions--->', renderOptions)\n\n\n\n//createRenderer(renderOptions).render(h('h1','hello'),document.getElementById('app'));\nexport function render(vnode, container: HTMLElement) {\n  //\u5728\u521B\u5EFA\u6E32\u67D3\u5668\u7684\u65F6\u5019\u4F20\u5165\u9009\u9879;\n  createRenderer(renderOptions).render(vnode, container);\n}\nexport * from '@vue/runtime-core'", "export const isObject = (value: any): boolean => {\n  return typeof value === 'object' && value !== null\n}\n\nexport const isString = (value: any): boolean => {\n  return typeof value === 'string'\n}\nexport const isNumber = (value: any): boolean => {\n  return typeof value === 'number'\n}\n\nexport const isFunction = (value: any): boolean => {\n  return typeof value === 'function'\n}\nexport const isArray = Array.isArray;\nexport const assign = Object.assign;\n\n//ShapeFlags\u8868\u793A\u8282\u70B9\u81EA\u8EAB\u7C7B\u578B,\u5E76\u4E14\u5B50\u8282\u70B9\u662F\u6570\u7EC4\u8FD8\u662F\u5B57\u7B26\u4E32;\nexport const enum ShapeFlags {\n  ELEMENT = 1, //1<<0; //\u5143\u7D20; \n  FUNCTIONAL_COMPONENT = 2, //1<<1; //;\n  STATEFUL_COMPONENT = 4, //1<<2; //;\n  TEXT_CHILDREN = 8, //1<<3; //;\n  ARRAY_CHILDREN = 16, //1<<4; //;\n  SLOTS_CHILDREN = 32, //1<<5; //;\n  TELEPORT = 64, //1<<6; //;\n  SUSPENSE = 128, //1<<7; //;\n  COMPONENT_SHOULD_KEEP_ALIVE = 256, //1<<8; //;\n  COMPONENT_KEPT_ALIVE = 512, //1<<9; //;\n  COMPONENT = 6 //COMPONENT = ShapeFlags.FUNCTIONAL_COMPONENT | ShapeFlags.STATEFUL_COMPONENT; //\u5373: COMPONENT = 2 | 4;\n}\n/* //\u4F4D\u8FD0\u7B97:&,|\u9002\u5408\u6743\u9650\u7684\u7EC4\u5408;\n//let user= \u589E\u52A0 | \u5220\u9664;//user&\u589E\u52A0 > 0\u5C31\u8BF4\u660E\u6709\u6743\u9650;\nconst \u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20 = ShapeFlags.ELEMENT | ShapeFlags.ARRAY_CHILDREN//1|16=17;\nconsole.log('\u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20--->',\u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20)\nconst \u662F\u5426\u5305\u542B\u5B50\u5143\u7D20\u6570\u7EC4 = ShapeFlags.ARRAY_CHILDREN & \u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20\nconsole.log('\u662F\u5426\u5305\u542B\u5B50\u5143\u7D20\u6570\u7EC4--->',\u662F\u5426\u5305\u542B\u5B50\u5143\u7D20\u6570\u7EC4) */", "//type,\u5373\u8282\u70B9\u7C7B\u578B;props,\u5C5E\u6027;children,\u5B50\u8282\u70B9;\n\nimport { isArray, isString, ShapeFlags } from \"@vue/shared\";\n\n\nexport const Text = Symbol('Text')//\u7528\u4E8Eh()\u51FD\u6570\u5185\u90E8\u521B\u5EFA\u6587\u672C\u7684\u6807\u8BC6;\n\n//\u5224\u65AD\u4E00\u4E2A\u53D8\u91CF\u662F\u5426\u4E3A\u865A\u62DFDOM;\nexport function isVnode(value) {\n  return !!value?.__v_isVnode\n}\n\n//\u5224\u65AD\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u662F\u5426\u662F\u76F8\u540C\u8282\u70B9;\n//\u601D\u8DEF\u662F: 1) \u6807\u7B7E\u540D\u76F8\u540C; 2) key\u662F\u4E00\u6837\u7684;\nexport function isSameVnode(n1: VNode, n2: VNode) {\n  return (n1.type === n2.type) && (n1.key === n2.key)\n}\n\n//\u865A\u62DF\u8282\u70B9\u7684type\u7C7B\u578B;\nexport type VNodeType = string | Symbol\n\n//\u865A\u62DF\u8282\u70B9\u7684props\u7C7B\u578B;\nexport declare type VNodeProps = object | undefined | null\n\n//\u865A\u62DF\u8282\u70B9\u7684children\u7C7B\u578B;\nexport type VNodeChildren = undefined | null | ConvertibleVNode | Array<ConvertibleVNode>\n\n//\u865A\u62DF\u8282\u70B9\u7C7B\u578B,\u53EF\u4EE5\u8BA4\u4E3A\u5B83\u4E0D\u5305\u542Bnull\u4E0Eundefined;\nexport type VNode = {\n  type: VNodeType;\n  props: VNodeProps;\n  children: VNodeChildren;\n  el: null | HTMLElement | Text;//\u865A\u62DF\u8282\u70B9\u4E0A\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9,\u540E\u7EEDdiff\u7B97\u6CD5\u4F18\u5316\u8981\u7528\u5230;\n  key: any;\n  __v_isVnode: boolean;\n  shapeFlag: number;\n}\n\n//\u53EF\u8F6C\u5316\u4E3A\u865A\u62DF\u8282\u70B9\u7684\u7C7B\u578B;\nexport type ConvertibleVNode = string | VNode | number\n\n//\u865A\u62DF\u8282\u70B9\u6709\u5F88\u591A:\u7EC4\u4EF6\u7684,\u5143\u7D20\u7684,\u6587\u672C\u7684\u7B49; //h('h1);\nexport function createVnode(type: VNodeType, props: VNodeProps, children: VNodeChildren = null): VNode {\n  //\u7EC4\u5408\u65B9\u6848 shapeFlag;\n  //\u60F3\u77E5\u9053\u4E00\u4E2A\u5143\u7D20\u4E2D\u5305\u542B\u7684\u662F\u591A\u4E2A\u513F\u5B50\u8FD8\u662F\u4E00\u4E2A\u513F\u5B50;\n  //\u6807\u8BC6;\n  let shapeFlag = isString(type) ? ShapeFlags.ELEMENT : 0;\n\n  //\u865A\u62DFDOM\u5C31\u662F\u4E00\u4E2A\u5BF9\u8C61,\u7528\u4E8Ediff\u7B97\u6CD5\u7B49\u7684\u4F18\u5316;\u771F\u5B9EDOM\u7684\u5C5E\u6027\u6BD4\u8F83\u591A;\n  const vnode: VNode = {//key;\n    type,\n    props,\n    children,\n    el: null,//\u865A\u62DF\u8282\u70B9\u4E0A\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9,\u540E\u7EEDdiff\u7B97\u6CD5\u4F18\u5316\u8981\u7528\u5230;\n    key: props?.['key'],\n    __v_isVnode: true,\n    shapeFlag\n  }\n  if (children) {\n    let type = 0;\n    if (isArray(children)) {\n      type = ShapeFlags.ARRAY_CHILDREN;\n    } else {\n      children = String(children)\n      type = ShapeFlags.TEXT_CHILDREN\n    }\n    //vnode.shapeFlag |= type\n    vnode.shapeFlag = vnode.shapeFlag | type\n  }\n  return vnode\n\n}", "import { isNumber, isString, ShapeFlags } from \"@vue/shared\";\nimport { NodeOperateOptions } from \"packages/runtime-dom/src/nodeOps\";\nimport { ConvertibleVNode, createVnode, isSameVnode, Text, VNode, VNodeChildren } from \"./vnode\"\n\n\nexport type RenderOptions = NodeOperateOptions & {\n  patchProp: (el: HTMLElement, key: string, prevValue: any, nextValue: unknown) => void\n}\n\ntype RenderVNode = VNode | null | undefined\ntype RenderContainer = HTMLElement & {\n  _vnode?: RenderVNode | null | undefined\n};\n\nexport function createRenderer(renderOptions: RenderOptions) {\n  const {\n    //\u63D2\u5165\u8282\u70B9;\n    insert: hostInsert,\n\n    //remove-\u5220\u9664\u8282\u70B9;\n    remove: hostRemove,\n\n    //\u4FEE\u6539\u5143\u7D20\u4E2D\u7684\u6587\u672C;-\u5F53\u4F20\u5165\u7684\u662F\u5143\u7D20\u65F6;\n    setElementText: hostSetElementText,\n    //\u8BBE\u7F6E\u6587\u672C\u8282\u70B9;-\u5F53\u4F20\u5165\u7684\u662F\u6587\u672C\u8282\u70B9\u65F6;\n    setText: hostSetText,\n\n    //\u67E5\u8BE2\u5143\u7D20;\n    querySelector: hostQuerySelector,\n    //\u67E5\u8BE2\u7236\u8282\u70B9;\n    parentNode: hostParentNode,\n    //\u67E5\u8BE2\u5144\u5F1F\u8282\u70B9;\n    nextSibling: hostNextSibling,\n\n    //\u521B\u5EFA\u5143\u7D20\u8282\u70B9;\n    createElement: hostCreateElement,\n    //\u521B\u5EFA\u6587\u672C\u8282\u70B9;\n    createText: hostCreateText,\n    patchProp: hostPatchProp,\n  } = renderOptions\n\n  //\u628A\u6570\u5B57\u6216\u5B57\u7B26\u4E32\u8F6C\u6210VNode,\u5F71\u54CD\u5230\u539F\u5B50\u8282\u70B9\u6570\u7EC4;\n  const normalize = (child: ConvertibleVNode[], index: number): VNode => {\n    //\u662F\u5B57\u7B26\u4E32\u65F6;\n    if (isString(child[index])) {\n      const vnode = createVnode(Text, null, child[index] as string)\n      child[index] = vnode\n    }\n\n    //\u662F\u6570\u5B57\u65F6;\n    if (isNumber(child[index])) {\n      const vnode = createVnode(Text, null, String(child[index] as number))\n      child[index] = vnode\n    }\n\n    //\u4E3A\u865A\u62DF\u8282\u70B9\u65F6;\n    return (child[index] as VNode)\n  }\n\n  /* //\u6302\u8F7D\u5B50\u8282\u70B9\u5217\u8868\u5230\u5BB9\u5668\u4E0A;\n  //\u6839\u636E`\u865A\u62DF\u8282\u70B9\u5217\u8868children`\u5FAA\u73AF\u5BF9\u6BD4\u65B0\u65E7\u865A\u62DF\u8282\u70B9,\u5E76\u521B\u5EFA\u51FA`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`,\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u865A\u62DF\u8282\u70B9\u4E0A,\u540C\u65F6\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u5BB9\u5668\u4E0A; */\n  const mountChildren = (children: Array<ConvertibleVNode>, container: HTMLElement) => {\n    for (let index = 0; index < children?.length; index++) {\n      //debugger\n      const child = normalize(children, index)//\u5904\u7406\u540E\u8981\u8FDB\u884C\u66FF\u6362,\u5426\u5219children\u4E2D\u5B58\u653E\u7684\u4F9D\u65E7\u662F\u5B57\u7B26\u4E32;\n      patch(null, child, container)\n    }\n  }\n\n  /* //\u521B\u5EFA\u51FA`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`,\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u865A\u62DF\u8282\u70B9\u4E0A,\u540C\u65F6\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u5BB9\u5668\u4E0A;\n  //1.\u5148\u521B\u5EFA`\u865A\u62DF\u8282\u70B9type\u5BF9\u5E94DOM\u5143\u7D20`,\u540C\u65F6\u5C06`\u865A\u62DF\u8282\u70B9type\u5BF9\u5E94DOM\u5143\u7D20`\u6302\u8F7D\u5230`\u865A\u62DF\u8282\u70B9`\u4E0A;\n  //2.\u518D\u7528`\u865A\u62DF\u8282\u70B9props`\u5728`\u865A\u62DF\u8282\u70B9type\u5BF9\u5E94DOM\u5143\u7D20`\u4E0A\u521B\u5EFA`DOM\u5143\u7D20\u5404\u9879\u5C5E\u6027`;\n  //3.\u518D\u7528`\u865A\u62DF\u8282\u70B9children`\u5728`\u865A\u62DF\u8282\u70B9type\u5BF9\u5E94DOM\u5143\u7D20`\u4E0A\u521B\u5EFA`DOM\u5143\u7D20\u5B50\u5143\u7D20`; */\n  const mountElement = (vnode: RenderVNode, container: RenderContainer, anchor: HTMLElement | Text | null | undefined = null) => {\n    const { type, props, children, shapeFlag } = vnode\n\n    //\u5148\u521B\u5EFA\u7236\u5143\u7D20,\u5E76\u6302\u8F7D\u5230vnode\u4E0A;\n    vnode.el = hostCreateElement(type as string)//\u5C06\u771F\u5B9E\u5143\u7D20\u6302\u8F7D\u5230\u8FD9\u4E2A\u865A\u62DF\u8282\u70B9\u4E0A,\u540E\u7EED\u7528\u4E8E\u590D\u7528\u8282\u70B9\u548C\u66F4\u65B0\u8282\u70B9;\n    const el = vnode.el\n\n    //\u6DFB\u52A0\u5C5E\u6027;//\u7ED9\u7236\u5143\u7D20\u6DFB\u52A0\u5C5E\u6027;\n    if (props) {\n      for (const key in props) {\n        hostPatchProp(el, key, null, props[key])\n      }\n    }\n\n    //\u662F\u5426\u5B50\u8282\u70B9;//\u5904\u7406\u7236\u5143\u7D20\u7684\u5B50\u8282\u70B9;\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {//\u6587\u672C;\n      hostSetElementText(el, children as string)\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {//\u6570\u7EC4;\n      //\u8FD9\u91CC\u4EE3\u8868\u5B50\u8282\u70B9\u662F\u4E00\u4E2A\u6570\u7EC4;\n      //debugger\n      mountChildren(children as ConvertibleVNode[], el)\n    }\n\n    //\u5904\u7406\u5B8C\u4E4B\u540E,\u628A\u6574\u4E2A\u5143\u7D20\u4E22\u5230\u5BB9\u5668\u91CC;\n    hostInsert(el, container, anchor)\n\n\n  }\n\n  const processText = (n1: RenderVNode, n2: RenderVNode, container: RenderContainer) => {\n    if (n1 === null) {\n      //hostInsert((n2.el = hostCreateText(n2.children as string)),container)\n\n      n2.el = hostCreateText(n2.children as string)\n      hostInsert(n2.el, container)\n    } else {\n      //\u6587\u672C\u7684\u5185\u5BB9\u53D8\u5316\u4E86,\u53EF\u4EE5\u590D\u7528\u8001\u7684\u8282\u70B9(\u4E0A\u7684DOM\u5143\u7D20);\n      //n2.el = n1.el\n      //const el = n2.el\n      const el = n2.el = n1.el//\u590D\u7528DOM\u5143\u7D20,\u51CF\u5C11\u6027\u80FD\u635F\u5931;//\u8FD9\u91CC\u7684DOM\u5143\u7D20\u5FC5\u5B9A\u4E3A\u6587\u672C\u8282\u70B9;\n\n      //\u5982\u679C\u65B0\u65E7\u6587\u672C\u8282\u70B9\u7684\u5B50\u8282\u70B9\u4E0D\u4E00\u6837,\u5219\u76F4\u63A5\u66F4\u65B0;\n      if (n1.children !== n2.children) {\n        hostSetText(el, n2.children as string)//\u6587\u672C\u7684\u66F4\u65B0;\n      }\n    }\n  }\n\n  const patchProps = (oldProps: object, newProps: object, el: HTMLElement) => {\n    //\u65B0\u7684\u91CC\u9762\u6709,\u76F4\u63A5\u7528\u65B0\u7684\u76D6\u6389\u5373\u53EF;\n    for (const key in newProps) {\n      hostPatchProp(el, key, oldProps[key], newProps[key])\n    }\n\n    //\u5982\u679C\u8001\u7684\u91CC\u9762\u6709\u800C\u65B0\u7684\u6CA1\u6709,\u5219\u662F\u5220\u9664;\n    for (const key in oldProps) {\n      //debugger\n      if (newProps[key] === null || newProps[key] === undefined) {\n        hostPatchProp(el, key, oldProps[key], undefined)\n      }\n    }\n  }\n\n  const unmountChildren = (children: VNode[]) => {\n    for (let index = 0; index < children.length; index++) {\n      //debugger\n      unmount(children[index])\n    }\n  }\n\n\n  const patchKeyedChildren = (c1: VNode[], c2: VNode[], el: HTMLElement) => {//\u6BD4\u8F83\u4E24\u4E2A\u5143\u7D20\n    let i = 0;//\u8868\u793A\u65B0\u65E7\u865A\u62DF\u8282\u70B9\u4ECE\u524D\u5411\u540E\u5FAA\u73AF\u65F6\u6700\u540E\u4E00\u4E2A\u76F8\u7B49\u7684\u89D2\u6807;\n    let e1 = c1.length - 1;//\u8868\u793A\u65E7\u865A\u62DF\u8282\u70B9\u4ECE\u524D\u5411\u540E\u5FAA\u73AF\u65F6\u6700\u540E\u4E00\u4E2A\u76F8\u7B49\u7684\u89D2\u6807;\n    let e2 = c2.length - 1;//\u8868\u793A\u65B0\u865A\u62DF\u8282\u70B9\u4ECE\u524D\u5411\u540E\u5FAA\u73AF\u65F6\u6700\u540E\u4E00\u4E2A\u76F8\u7B49\u7684\u89D2\u6807;\n\n    //\u7279\u6B8A\u5904\u7406...........\n    //\u7528\u4E8E\u51CF\u5C11\u8FDB\u884Cdiff\u7B97\u6CD5\u6BD4\u8F83\u7684\u8303\u56F4;\n    //\u5148\u5206\u522B\u6BD4\u8F83\u65B0\u865A\u62DF\u8282\u70B9\u4E0E\u65E7\u865A\u62DF\u8282\u70B9\u7684\u524D\u9762\u53CA\u540E\u9762\u7684\u540C\u7B49\u8282\u70B9;\u7559\u4E0B\u4E2D\u95F4\u4E0D\u540C\u7684\u4EE5\u4FBF\u4E71\u5E8F\u6BD4\u8F83;\n    //\u539F\u56E0\u662F\u56E0\u4E3A\u4E00\u4E2A\u6570\u7EC4\u53D8\u52A8\u524D\u540E,\u524D\u9762\u548C\u540E\u9762\u4F1A\u6709\u4E00\u5927\u5757\u7684\u5185\u5BB9\u4E0D\u6539\u53D8;\n\n    //sync from start;\u4ECE\u524D\u9762\u5F80\u540E\u6BD4;\n    for (; i <= e1 && i <= e2; i++) {//\u6709\u4EFB\u4F55\u4E00\u65B9\u505C\u6B62\u5FAA\u73AF,\u5219\u76F4\u63A5\u8DF3\u51FA;\n      const n1 = c1[i]\n      const n2 = c2[i]\n      if (isSameVnode(n1, n2)) {\n        //debugger\n        patch(n1, n2, el)//\u8FD9\u6837\u505A\u5C31\u662F\u6BD4\u8F83\u4E24\u4E2A\u8282\u70B9\u7684\u5C5E\u6027\u548C\u5B50\u8282\u70B9;\n      } else {\n        break\n      }\n    }\n\n    //sync from end;\u4ECE\u540E\u9762\u5F80\u524D\u6BD4;\n    for (; i <= e1 && i <= e2; e1--, e2--) {\n      const n1 = c1[e1]\n      const n2 = c2[e2]\n      if (isSameVnode(n1, n2)) {\n        patch(n1, n2, el)\n      } else {\n        break\n      }\n    }\n\n    //console.log('i--->', i, 'e1--->', e1, 'e2--->', e2)//\u5C3D\u53EF\u80FD\u51CF\u5C11\u6BD4\u8F83\u7684\u5185\u5BB9;\n\n    //\u6709\u4E00\u65B9\u5168\u90E8\u6BD4\u8F83\u5B8C\u6BD5\u4E86,\u8981\u4E48\u5C31\u5220\u9664,\u8981\u4E48\u5C31\u6DFB\u52A0;\n    if (i > e1) {\n      //common sequence + mount;\u540C\u5E8F\u5217\u6302\u8F7D;\n      //i\u6BD4e1\u5927,\u8BF4\u660E\u6709\u65B0\u589E\u7684;\n      //i\u548Ce2\u4E4B\u95F4\u7684\u662F\u65B0\u589E\u7684\u90E8\u4EFD;//\u5373[i,i+1,i+2,...,e2]\u4E2D\u5BF9\u5E94\u89D2\u6807\u662F\u8981\u65B0\u589E\u7684;\n      if (i <= e2) {\n        for (; i <= e2; i++) {\n          const nextPos = e2 + 1;//\u8868\u793Ae2\u7684\u4E0B\u4E00\u4E2A\u5143\u7D20;\n          //\u6839\u636E\u4E0B\u4E00\u4E2A\u4EBA\u7684\u7D22\u5F15\u6765\u770B\u53C2\u7167\u7269;\n          const anchor = nextPos < c2.length ? c2[nextPos].el : null\n          patch(null, c2[i], el, anchor)//\u521B\u5EFA\u65B0\u8282\u70B9,\u6254\u5230\u5BB9\u5668\u4E2D;\n        }\n      }\n    } else if (i > e2) {\n      //common sequence + unmount;\u540C\u5E8F\u5217\u5378\u8F7D;\n      //i\u6BD4e2\u5927,\u8BF4\u660E\u6709\u8981\u5378\u8F7D\u7684;\n      //i\u548Ce1\u4E4B\u95F4\u7684\u662F\u5378\u8F7D\u7684\u90E8\u4EFD;//\u5373[i,i+1,i+2,...,e1]\u4E2D\u5BF9\u5E94\u89D2\u6807\u662F\u8981\u5378\u8F7D\u7684;\n      if (i <= e1) {\n        for (; i <= e1; i++) {\n          unmount(c1[i])\n        }\n      }\n    }\n\n    //\u4F18\u5316\u5B8C\u6BD5-------------------------------------;\n\n    //\u4E71\u5E8F\u6BD4\u5BF9;\n\n    //\u601D\u8DEF:\n    //\u7528\u65B0\u865A\u62DF\u8282\u70B9\u4E71\u5E8F\u90E8\u4EFD\u7684key\u53CA\u65B0\u865A\u62DF\u8282\u70B9\u89D2\u6807\u505A\u4E00\u4E2A\u6620\u5C04\u8868;\n    //\u7528\u5FAA\u73AF\u65E7\u865A\u62DF\u8282\u70B9\u4E71\u5E8F\u90E8\u4EFD\u7684key\u4ECE\u6620\u5C04\u8868\u4E2D\u62FF\u5230\u5BF9\u5E94\u65B0\u865A\u62DF\u8282\u70B9;\u5982\u679C\u6CA1\u627E\u5230,\u8BF4\u660E\u8BE5\u65E7\u865A\u62DF\u8282\u70B9\u8981\u88AB\u5220\u9664;\u5982\u679C\u627E\u5230,\u7528\u4E00\u4E2A\u6570\u7EC4\u8BB0\u5F55\u4E0B\u65B0\u865A\u62DF\u8282\u70B9\u4E71\u5E8F\u90E8\u4EFD\u89D2\u6807\u53CA`\u65E7\u865A\u62DF\u8282\u70B9\u89D2\u6807+1`\u7684\u6620\u5C04\u5173\u7CFB,\u5E76\u6BD4\u5BF9\u65B0\u65E7\u865A\u62DF\u8282\u70B9\u5173\u7CFB;\n    //\u5BF9\u65B0\u865A\u62DF\u8282\u70B9\u4E71\u5E8F\u90E8\u4EFD\u5FAA\u73AF\u4E86\u4E00\u904D,\u6839\u636E\u65B0\u865A\u62DF\u8282\u70B9\u4E71\u5E8F\u90E8\u4EFD\u89D2\u6807\u53CA`\u65E7\u865A\u62DF\u8282\u70B9\u89D2\u6807+1`\u7684\u6620\u5C04\u5173\u7CFB\u6765\u5012\u53D9\u8FDB\u884C\u63D2\u5165\u6216\u521B\u5EFA;\n\n    //console.log('i--->', i, 'e1--->', e1, 'e2--->', e2)\n    // debugger\n    let s1 = i;\n    let s2 = i;\n\n    const keyToNewIndexMap: Map<any, number> = new Map()//key -> newIndex;\n    for (let index = s2; index <= e2; index++) {\n      keyToNewIndexMap.set(c2[index].key, index)\n    }\n\n    //\u5FAA\u73AF\u8001\u7684\u5143\u7D20 \u770B\u4E00\u4E0B\u65B0\u7684\u91CC\u9762\u6709\u6CA1\u6709,\u5982\u679C\u6709\u8BF4\u660E\u8981\u6BD4\u8F83\u5DEE\u5F02,\u6CA1\u6709\u8981\u6DFB\u52A0\u5230\u5217\u8868\u4E2D,\u8001\u7684\u6709\u65B0\u7684\u6CA1\u6709\u8981\u5220\u9664;\n    const toBePatched = e2 - s2 + 1;//\u65B0\u7684\u603B\u4E2A\u6570;\n    const newIndexToOldIndexMap: number[] = new Array(toBePatched).fill(0)//\u4E00\u4E2A\u8BB0\u5F55\u662F\u5426\u6BD4\u5BF9\u8FC7\u7684\u6620\u5C04\u8868;//\u65B0\u8282\u70B9\u603B\u4E2A\u6570\u4E2D\u987A\u5E8F\u5BF9\u5E94\u7740\u8001\u865A\u62DF\u8282\u70B9\u7684\u89D2\u6807;\n    for (let index = s1; index <= e1; index++) {\n      const oldChild = c1[index];//\u8001\u7684\u5B69\u5B50;\n      const newIndex = keyToNewIndexMap.get(oldChild.key)//\u7528\u8001\u7684\u5B69\u5B50\u53BB\u65B0\u7684\u91CC\u9762\u627E;\n      if (newIndex === undefined) {\n        unmount(oldChild)//\u591A\u4F59\u7684\u5220\u6389;\n      } else {\n        //\u65B0\u7684\u4F4D\u7F6E\u5BF9\u5E94\u7684\u8001\u7684\u4F4D\u7F6E; //\u5982\u679C\u6570\u7EC4\u91CC\u653E\u7684\u503C>0,\u8BF4\u660E\u5DF2\u7ECFpatch\u8FC7\u4E86;\n        newIndexToOldIndexMap[newIndex - s2] = index + 1;//\u7528\u6765\u6807\u8BB0\u5F53\u524D\u6240patch\u8FC7\u7684\u7ED3\u679C;\n        patch(oldChild, c2[newIndex], el)\n      }\n    }\n    //\u5230\u8FD9\u53EA\u662F\u65B0\u8001\u5C5E\u6027\u548C\u513F\u5B50\u7684\u6BD4\u5BF9,\u6CA1\u6709\u79FB\u52A8\u4F4D\u7F6E;//\u4E5F\u6CA1\u6709\u65B0\u589E\u8FC7\u65B0\u8282\u70B9\u4E2D\u591A\u4F59\u51FA\u6765\u7684\u8282\u70B9;\n    console.log('newIndexToOldIndexMap--->', JSON.parse(JSON.stringify(newIndexToOldIndexMap)))\n\n    //\u9700\u8981\u79FB\u52A8\u4F4D\u7F6E;\n    //\u76EE\u524D\u65E0\u8BBA\u5982\u4F55\u90FD\u505A\u4E86\u4E00\u904D\u5012\u53D9\u8FDB\u884C\u63D2\u5165\u6216\u521B\u5EFA;\n    for (let theIndex = toBePatched - 1; theIndex >= 0; theIndex--) {\n      const index = theIndex + s2\n      const current = c2[index];//\u627E\u5230\u5F53\u524D\u8282\u70B9;(\u6700\u540E\u6CA1\u505A\u8FC7\u5904\u7406\u7684\u8981\u65B0\u589E\u7684\u5143\u7D20);\n      const anchor = index + 1 < c2.length ? c2[index + 1].el : null\n      if (newIndexToOldIndexMap[theIndex] === 0) {\n        //\u521B\u5EFA;\n        //\u4E4B\u524D\u7684\u8868\u7C7B\u4F3C\u4E8E[5,3,4,0];//\u503C\u4E3A0,\u8BF4\u660E\u6CA1patch\u8FC7,\u5C31\u8BF4\u660E\u8981\u521B\u5EFA;\n        patch(null, current, el, anchor)//\u521B\u5EFA\u65B0\u8282\u70B9;\n\n        //newIndexToOldIndexMap\u4E00\u822C\u4E3A[5,3,4,0]\u4F8B\u5982: \n        //[5,3,4,0] -> \u5BF9\u5E94\u89D2\u6807theIndex[0,1,2,3] -> \u6700\u957F\u9012\u589E\u89D2\u6807[1,2] -> \u5BF9\u5E94\u9012\u589E\u503C[3,4] -> \u8981\u6539\u7684\u503C\u4E3A[5]\u4E0E[0] -> \u8981\u6539\u7684\u503C\u5BF9\u5E94\u89D2\u6807theIndex\u4E3A[0]\u4E0E[3],\u5176\u4E2D[0]\u4E3A\u63D2\u5165\u4EE5\u6539\u53D8\u6392\u5E8F,[3]\u4E3A\u65B0\u589E\u5E76\u63D2\u5165;\n\n      } else {\n        //\u4E0D\u662F0,\u8BF4\u660E\u662F\u5DF2\u7ECF\u6BD4\u5BF9\u8FC7\u5C5E\u6027\u548C\u513F\u5B50\u7684\u4E86;\n\n        //\u63D2\u5165;//\u590D\u7528\u4E86\u8282\u70B9;//\u4E0D\u8FC7\u8FD9\u4E9B\u8282\u70B9\u4E5F\u5DF2\u7ECF\u5728\u6807\u8BC6\u65F6patch\u8FC7\u4E86;\n        //\u76EE\u524D\u65E0\u8BBA\u5982\u4F55\u90FD\u505A\u4E86\u4E00\u904D\u5012\u53D9\u63D2\u5165,\u5176\u5B9E\u53EF\u4EE5\u4E0D\u7528\u5168\u90E8\u90FD\u63D2\u5165\u4E00\u904D;\n        //\u53EF\u4EE5\u6839\u636E\u521A\u624D\u7684\u6570\u7EC4\u6765\u51CF\u5C11\u63D2\u5165\u6B21\u6570;\n        //\u53EF\u4EE5\u7528\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u6765\u5B9E\u73B0,\u5904\u4E8E\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u4E2D\u7684\u6570\u636E,\u53EF\u4EE5\u4E0D\u7528\u63D2\u5165;\u53EA\u9700\u8981\u6539\u53D8\u4E0D\u662F\u5904\u4E8E\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u4E2D\u7684\u5143\u7D20\u5C31\u53EF\u4EE5\u4E86;\n        hostInsert(current.el, el, anchor)\n      }\n\n      //\u8FD9\u91CC\u53D1\u73B0\u7F3A\u5931\u903B\u8F91,\u9700\u8981\u770B\u4E00\u4E0Bcurrent\u6709\u6CA1\u6709el,\u5982\u679C\u6CA1\u6709el\u8BF4\u660E\u662F\u65B0\u589E\u7684\u903B\u8F91;\n\n      //\u5F53\u524D\u7684\u8282\u70B9\u662F\u65B0\u589E\u7684\u6CA1\u6709\u6240\u8C13\u7684el;\n      //hostInsert(current.el,el,anchor);\n\n      //\u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217\u6765\u5B9E\u73B0; //vue2\u5728\u79FB\u52A8\u5143\u7D20\u7684\u65F6\u5019\u4F1A\u6709\u6D6A\u8D39; //\u4F18\u5316,\u8FD9\u4E2A\u53EA\u662F\u4F18\u5316diff\u7B97\u6CD5\u4E2D\u4E71\u5E8F\u6BD4\u5BF9\u6570\u7EC4\u65F6\u7684\u521B\u5EFA\u53CA\u63D2\u5165\u7684\u6027\u80FD\u6D6A\u8D39;\n    }\n\n  }\n\n  //\u6BD4\u8F83\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u7684\u5B50\u8282\u70B9\u7684\u5DEE\u5F02,el\u5C31\u662F\u5F53\u524D\u4E24\u4E2A\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u7684\u771F\u5B9EDOM\u5143\u7D20;\n  const patchChildren = (n1: RenderVNode, n2: RenderVNode, el: HTMLElement) => {\n    const c1 = n1?.children || null//\u65E7\u865A\u62DF\u8282\u70B9\u7684\u5B50\u8282\u70B9\u5217\u8868;\n    const c2 = n2?.children || null//\u65B0\u865A\u62DF\u8282\u70B9\u7684\u5B50\u8282\u70B9\u5217\u8868;\n\n    const prevShapeFlag = n1.shapeFlag;//\u4E4B\u524D\u7684\u865A\u62DF\u8282\u70B9\u7684\u7C7B\u578B;\n    const shapeFlag = n2.shapeFlag;//\u4E4B\u540E\u7684\u865A\u62DF\u8282\u70B9\u7684\u7C7B\u578B;\n\n    /* //\u5B50\u8282\u70B9\u5217\u8868\u53EF\u80FD\u662F: \u6587\u672C, \u7A7A\u7684null, \u6570\u7EC4;\n      \u65B0\u5B50\u8282\u70B9\u5217\u8868\t\u65E7\u5B50\u8282\u70B9\u5217\u8868\t\u64CD\u4F5C\u65B9\u5F0F;\n      \u6587\u672C\t\u6570\u7EC4\t\uFF08\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868\uFF0C\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;\n      \u6587\u672C\t\u6587\u672C\t\uFF08\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;\n      \u6570\u7EC4\t\u6570\u7EC4\t\uFF08diff\u7B97\u6CD5\uFF09;\n      \u6570\u7EC4\t\u6587\u672C\t\uFF08\u6E05\u7A7A\u6587\u672C\uFF0C\u8FDB\u884C\u6302\u8F7D\uFF09;\n      \u7A7A\t\u6570\u7EC4\t\uFF08\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868\uFF09;\n      \u7A7A\t\u6587\u672C\t\uFF08\u6E05\u7A7A\u6587\u672C\uFF09;\n      \u65E7\u513F\u5B50\u4E3A\u7A7A\u65F6,processElement()\u91CC\u4E0D\u8C03\u7528patchElement(),\u540C\u65F6patchChildren()\u662F\u5728patchElement()\u91CC\u7684,\u8D70\u4E0D\u5230\u8FD9\u4E2A\u65B9\u6CD5;\n      \u6587\u672C\t\u7A7A\t\uFF08\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9);\n      \u6570\u7EC4\t\u7A7A\t\uFF08\u8FDB\u884C\u6302\u8F7D\uFF09;\n      \u7A7A\t\u7A7A\t\uFF08\u65E0\u9700\u5904\u7406\uFF09;\n     */\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {//\u5224\u65AD\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u6587\u672C;\n      //\u4E24\u79CD\u60C5\u51B5:\n      //\u6587\u672C\t\u6570\u7EC4\t\uFF08\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868\uFF0C\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;\n      //\u6587\u672C\t\u6587\u672C\t\uFF08\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;//\u66F4\u65B0\u6587\u672C\u76F8\u5F53\u4E8E\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9;\n      //\u8FD9\u91CC\u7684\u601D\u8DEF\u662F\u5982\u679C\u8001\u8282\u70B9\u662F\u6570\u7EC4,\u90A3\u4E48\u5C31\u5148\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868;\n      //\u4E4B\u540E\u4E0D\u7BA1\u8001\u8282\u70B9\u7684\u7C7B\u578B,\u53EA\u8981\u65B0\u8001\u8282\u70B9\u7684\u5B50\u8282\u70B9\u4E0D\u76F8\u7B49,\u7EDF\u4E00\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9;\n\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {//\u5224\u65AD\u8001\u8282\u70B9\u4E3A\u6570\u7EC4;\n        //\u5220\u9664\u6240\u6709\u5B50\u8282\u70B9;\n        unmountChildren(c1 as VNode[])//\u6587\u672C\t\u6570\u7EC4\t\uFF08\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868\uFF0C\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;\n      }\n\n      if (c1 !== c2) {\n        hostSetElementText(el, c2 as string)//\u6587\u672C\t\u6587\u672C\t\uFF08\u8BBE\u7F6E\u6587\u672C\u5185\u5BB9\uFF09;\u5305\u62EC\u4E86\u6587\u672C\u548C\u7A7A;\n      }\n\n    } else {\n      //\u76EE\u524D\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u6570\u7EC4\u6216\u8005\u4E3A\u7A7A;\n\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) { //\u5224\u65AD\u8001\u865A\u62DF\u8282\u70B9\u4E3A\u6570\u7EC4;\n        //\u4E24\u79CD\u60C5\u51B5;\n        //\u6570\u7EC4\t\u6570\u7EC4\t\uFF08diff\u7B97\u6CD5\uFF09;\n        //\u7A7A\t\u6570\u7EC4\t\uFF08\u5220\u9664\u65E7\u8282\u70B9\u5217\u8868\uFF09;\n        //\u8FD9\u91CC\u7684\u601D\u8DEF\u662F\u5982\u679C\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u6570\u7EC4,\u8FDB\u884C\u5B50\u8282\u70B9\u5217\u8868\u7684\u5BF9\u6BD4,\u91CC\u9762\u7528\u5230\u4E86diff\u7B97\u6CD5;\n        //\u5982\u679C\u65B0\u865A\u62DF\u8282\u70B9\u4E0D\u4E3A\u6570\u7EC4,\u5378\u8F7D\u6389\u6240\u6709\u7684\u65E7\u865A\u62DF\u8282\u70B9;\n\n        //\u5224\u65AD\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u6570\u7EC4;\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n          //diff\u7B97\u6CD5;\n          patchKeyedChildren(c1 as VNode[], c2 as VNode[], el)\n        } else {\n          //\u73B0\u5728\u65B0\u865A\u62DF\u8282\u70B9\u4E0D\u662F\u6570\u7EC4,\u5C31\u4EE3\u8868\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u7A7A? (\u6587\u672C\u548C\u7A7A \u5220\u9664\u4EE5\u524D\u7684);\n          unmountChildren(c1 as VNode[])\n        }\n      } else {\n        //\u4E24\u79CD\u60C5\u51B5;\n        //\u7A7A\t\u6587\u672C\t\uFF08\u6E05\u7A7A\u6587\u672C\uFF09;\n        //\u6570\u7EC4\t\u6587\u672C\t\uFF08\u6E05\u7A7A\u6587\u672C\uFF0C\u8FDB\u884C\u6302\u8F7D\uFF09;\n        //\u8FD9\u91CC\u7684\u601D\u8DEF\u662F\u5982\u679C\u8001\u8282\u70B9\u4E3A\u6587\u672C,\u90A3\u4E48\u4E0D\u7BA1\u5F53\u524D\u65B0\u8282\u70B9\u4E3A\u6570\u7EC4\u8FD8\u662F\u7A7A,\u90FD\u76F4\u63A5\u6E05\u7A7A\u5F53\u524D\u6587\u672C;\n        //\u5982\u679C\u5F53\u524D\u65B0\u8282\u70B9\u4E3A\u6570\u7EC4,\u90A3\u4E48\u5C31\u6302\u8F7D\u65B0\u8282\u70B9\u7684\u5B50\u8282\u70B9;\n\n        if (prevShapeFlag & ShapeFlags.TEXT_CHILDREN) {//\u5224\u65AD\u8001\u865A\u62DF\u8282\u70B9\u4E3A\u6587\u672C;\n          hostSetElementText(el, '')\n        }\n\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {//\u5224\u65AD\u65B0\u865A\u62DF\u8282\u70B9\u4E3A\u6570\u7EC4;\n          mountChildren(c2 as ConvertibleVNode[], el)\n        }\n\n      }\n    }\n\n  }\n\n  //\u7528\u4E8E\u8FDB\u884C\u865A\u62DF\u8282\u70B9\u4E3AHTML\u5143\u7D20\u7684\u6BD4\u5BF9;\n  //\u5982\u679C\u5143\u7D20\u4E00\u6837: \u5148\u590D\u7528\u8282\u70B9,\u518D\u6BD4\u8F83\u5C5E\u6027,\u518D\u6BD4\u8F83\u513F\u5B50(\u5B50\u8282\u70B9);\n  const patchElement = (n1: RenderVNode, n2: RenderVNode) => {\n    //\u590D\u7528\u8282\u70B9;\n    const el = n2.el = n1.el as HTMLElement //\u8FD9\u4E2A\u65B9\u6CD5\u5185\u7684el,\u5FC5\u5B9A\u4E3A\u5143\u7D20;\n\n    const oldProps = n1.props || {}//\u5BF9\u8C61;//\u8868\u793A\u65E7\u865A\u62DF\u8282\u70B9\u7684props;\n    const newProps = n2.props || {}//\u5BF9\u8C61;//\u8868\u793A\u65B0\u865A\u62DF\u8282\u70B9\u7684props;\n\n    //\u6BD4\u8F83\u5C5E\u6027;\n    patchProps(oldProps, newProps, el)\n\n    //\u6BD4\u8F83\u5B50\u8282\u70B9;\n    patchChildren(n1, n2, el)\n  }\n\n  //\u6BD4\u5BF9\u5143\u7D20:\n  const processElement = (n1: RenderVNode, n2: RenderVNode, container: RenderContainer, anchor: HTMLElement | Text | null | undefined = null) => {\n    //\u65E7\u8282\u70B9n1\u4E3Anull,\u5C31\u521B\u5EFA\u65B0\u8282\u70B9\u5E76\u63D2\u5165\u5230\u5BB9\u5668\u4E0A;\n    if (n1 === null) {\n      mountElement(n2, container, anchor)\n    } else {\n      //\u5143\u7D20\u6BD4\u5BF9;\n      patchElement(n1, n2);\n    }\n\n  }\n\n  //\u5BF9\u6BD4\u65B0\u65E7\u865A\u62DF\u8282\u70B9,\u5E76\u521B\u5EFA\u51FA`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`,\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u865A\u62DF\u8282\u70B9\u4E0A,\u540C\u65F6\u628A`\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u771F\u5B9EDOM`\u6302\u8F7D\u5230\u5BB9\u5668\u4E0A;\n  const patch = (n1: RenderVNode, n2: RenderVNode, container: RenderContainer, anchor: HTMLElement | Text | null | undefined = null) => {\n    /* //\u6838\u5FC3\u7684patch\u65B9\u6CD5;\n      //\u5BF9\u6BD4\u65B0\u65E7\u865A\u62DF\u8282\u70B9:\n      //\u82E5\u65B0\u65E7\u8282\u70B9\u4E00\u81F4,\u5C31\u76F4\u63A5\u9000\u51FA;\n      //\u82E5\u65B0\u65E7\u8282\u70B9\u4E0D\u4E00\u81F4;\n      //\u82E5\u65B0\u8282\u70B9\u5143\u7D20\u7C7B\u578B\u4E3A\u6587\u672C,\u90A3\u4E48\u7528processText()\u521B\u5EFA\u6587\u672C\u8282\u70B9\u8FDB\u884C\u5904\u7406;\n      //\u82E5\u65B0\u8282\u70B9\u5143\u7D20\u7C7B\u578B\u4E0D\u4E3A\u6587\u672C,\u90A3\u4E48\u7528processElement()\u521B\u5EFA\u5BF9\u5E94\u5143\u7D20\u8FDB\u884C\u5904\u7406;\n\n      //n2\u5982\u679C\u4EE3\u8868\u6570\u5B57,\u90A3\u4E48\u5E94\u8BE5\u4E3A`h(Text, '\u6587\u672C')`\u800C\u4E0D\u662F`h('\u6587\u672C')\u6216h(undefined,'\u6587\u672C')`;\n      //\u4E5F\u5C31\u662F\u8BF4,\u6587\u672C\u53EA\u4F1A\u51FA\u73B0\u5728`h('h1', {}, [h('span', '\u6587\u672C'),'\u6587\u672C\u4E8C'])`\u4E2D\u7684\u7B2C\u4E09\u4E2A\u53C2\u6570\u4E2D;\n      //\u800C`h()\u7B2C\u4E09\u4E2A\u53C2\u6570`\u7684\u5904\u7406\u4E00\u5B9A\u4F1A\u7ECF\u8FC7`mountChildren()`\u8FD9\u4E2A\u51FD\u6570;\n      //`mountChildren()`\u5185\u90E8\u8C03\u7528`normalize()`\u628A\u5B57\u7B26\u4E32\u8F6C\u6210\u7C7B\u578B\u4E3Asymbol\u7684VNode;\n     */\n\n\n    //\u65B0\u65E7\u8282\u70B9\u5B8C\u5168\u4E00\u81F4;\n    if (n1 === n2) {\n      return\n    }\n\n    //\u65E7\u8282\u70B9\u5B58\u5728,\u4F46\u65B0\u65E7\u8282\u70B9\u5143\u7D20\u7C7B\u578B\u4E0D\u4E00\u81F4;\n    //\u5224\u65AD\u4E24\u4E2A\u8282\u70B9\u662F\u5426\u76F8\u540C,\u4E0D\u76F8\u540C\u5C31\u5378\u8F7D\u518D\u6DFB\u52A0;\n    //debugger\n    if (n1 && !isSameVnode(n1, n2)) {\n      unmount(n1)//\u5220\u9664\u8001\u7684;\n      n1 = null;//\u65E7\u8282\u70B9\u7F6E\u4E3Anull,\u518D\u8D70\u540E\u7EED\u7684\u65B0\u589E\u6D41\u7A0B;\n    }\n\n\n    //\u865A\u62DF\u8282\u70B9\u7C7B\u578B\u4E3A\u5143\u7D20\u65F6\u6BD4\u5BF9: \u5143\u7D20\u7C7B\u578B,\u5143\u7D20\u5C5E\u6027,\u5143\u7D20\u5B50\u8282\u70B9;\n    //\u865A\u62DF\u8282\u70B9\u7C7B\u578B\u4E3A\u6587\u672C\u65F6\u6BD4\u5BF9: \u6587\u672C\u5185\u90E8(\u5176\u5B9E\u5C31\u662F\u5143\u7D20\u5B50\u8282\u70B9);\n    //\u865A\u62DF\u8282\u70B9\u7C7B\u578B\u4E3A\u7EC4\u4EF6\u65F6\u6BD4\u5BF9: \u7EC4\u4EF6\u5C5E\u6027,\u63D2\u69FD;\n    const { type, shapeFlag } = n2\n    switch (type) {\n      case Text:\n        processText(n1, n2, container)\n        break;\n\n      default:\n        if (shapeFlag & ShapeFlags.ELEMENT) {\n          processElement(n1, n2, container, anchor)\n        }\n        break\n    }\n  }\n\n\n  const unmount = (vnode: RenderVNode) => {\n    hostRemove(vnode.el)//\u5220\u9664\u6389\u865A\u62DF\u8282\u70B9\u5BF9\u5E94\u7684DOM\u5143\u7D20;\n  }\n\n  //\u7528\u65B0\u4F20\u5165\u7684\u865A\u62DF\u8282\u70B9,\u5E76\u628A\u865A\u62DF\u8282\u70B9\u6302\u8F7D\u5230\u5BB9\u5668\u4E0A;\n  const render = (vnode: RenderVNode, container: RenderContainer) => {//\u6E32\u67D3\u8FC7\u7A0B\u662F\u7528\u4F20\u5165\u7684`renderOptions`\u6765\u8FDB\u884C\u6E32\u67D3;\n    //console.log('vnode--->', vnode, '\\n container--->', container)\n\n    //\u5982\u679C\u5F53\u524Dvnode\u662F\u7A7A\u7684\u8BDD;\n    if (vnode === null || vnode === undefined) {\n      //\u5378\u8F7D\u903B\u8F91;\n\n      //\u4E4B\u524D\u786E\u5B9E\u6E32\u67D3\u8FC7\u4E86,\u90A3\u4E48\u5C31\u5378\u8F7D\u6389dom;\n      if (container._vnode) {\n        unmount(container._vnode)\n      }\n\n    } else {\n      //\u8FD9\u91CC\u5373\u6709\u521D\u59CB\u5316\u7684\u903B\u8F91,\u53C8\u6709\u66F4\u65B0\u7684\u903B\u8F91;\n      patch(container._vnode || null, vnode, container)\n    }\n    container._vnode = vnode\n  }\n  return {\n    render\n  }\n}\n//\u6587\u672C\u7684\u5904\u7406,\u9700\u8981\u81EA\u5DF1\u589E\u52A0\u7C7B\u578B;\u56E0\u4E3A\u4E0D\u80FD\u901A\u8FC7`document.createElement('\u6587\u672C')`\u521B\u5EFA\u6587\u672C\u5143\u7D20;\n//\u6839\u539F\u56E0\u662Fh()\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\u53EA\u80FD\u662F\u5B57\u7B26\u4E32,\u4F46\u8FD9\u4E2A\u5B57\u7B26\u4E32\u4E0D\u80FD\u5224\u65AD\u5B83\u4E3ADOM\u7C7B\u578B\u540D\u8FD8\u662F\u6587\u672C;\n//\u800C\u6587\u672C\u5FC5\u5B9A\u662F`h()`\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u6216\u7B2C\u4E09\u4E2A\u53C2\u6570\u4E2D\u7684,\u5728\u5904\u7406\u5B50\u8282\u70B9\u65F6\u5904\u7406\u5305\u88C5\u4E00\u4E0B\u6587\u672C\u4E3AVNode\u8282\u70B9\u5C31\u597D\u4E86;\n//\u5982\u679C`render()\u7B2C\u4E00\u4E2A\u53C2\u6570`\u4F20\u5165null\u7684\u65F6\u5019\u5728\u6E32\u67D3\u65F6,\u5219\u662F\u5378\u8F7D\u903B\u8F91,\u9700\u8981\u5C06DOM\u8282\u70B9\u5220\u6389;", "\n/* //\u53EF\u4EE5\u628Ah()\u51FD\u6570\u5F53\u6210\u4E00\u4E2A\u865A\u62DF\u8282\u70B9\u5C31\u597D\u4E86;\n//h()\u51FD\u6570\u7684\u7528\u6CD5: \n//h('div');\n\n//h('div',null,'\u6587\u672C\u8282\u70B9\u4E00');\n//h('div',null,h('span'));\n//h('div',null,h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C'));\n//h('div',null,[h('span'),h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C')]);\n//h('div',null,['\u6587\u672C\u8282\u70B9\u4E00',h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C')]);\n//h('div',null,'\u6587\u672C\u8282\u70B9\u4E00','\u6587\u672C\u8282\u70B9\u4E8C');\n//h('div',null,'\u6587\u672C\u8282\u70B9\u4E00',h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C'));\n\n//h('div',{},'\u6587\u672C\u8282\u70B9\u4E00');\n//h('div',{},h('span'));\n//h('div',{},h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C'));\n//h('div',{},[h('span'),h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C')]);\n//h('div',{},['\u6587\u672C\u8282\u70B9\u4E00',h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C')]);\n//h('div',{},'\u6587\u672C\u8282\u70B9\u4E00','\u6587\u672C\u8282\u70B9\u4E8C');\n//h('div',{},'\u6587\u672C\u8282\u70B9\u4E00',h('span','\u865A\u62DF\u5B50\u8282\u70B9\u6570\u7EC4\u5185\u7684\u6587\u672C'));\n\n//h('div',h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E00\u7684\u6587\u672C'),h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E8C\u7684\u6587\u672C'));//\u8FD9\u79CD\u5199\u6CD5\u4E0D\u884C;\u867D\u7136\u80FD\u7F16\u8BD1,\u4F46`\u7B2C\u4E8C\u4E2A\u53C2\u6570h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E00\u7684\u6587\u672C')`\u4E0D\u4F1A\u7F16\u8BD1\u51FA\u6765;\u540C\u65F6\u4F1A\u628A`\u7B2C\u4E8C\u4E2A\u53C2\u6570h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E00\u7684\u6587\u672C')`\u5F53\u6210`props`;\n */\n\nimport { isArray, isObject, isString } from \"@vue/shared\"\nimport { createVnode, isVnode, VNode, VNodeChildren, VNodeProps } from \"./vnode\"\n\n\n\nexport function h(type: string, propsChildren: VNodeProps | VNodeChildren, children: VNodeChildren): VNode {//\u5176\u5B9E\u7684\u9664\u4E863\u4E2A\u4E4B\u5916\u7684\u80AF\u5B9A\u662F\u5B69\u5B50(\u5B50\u8282\u70B9);\n  const theLength = arguments.length\n\n\n  //h('div',{style:{'color':'red'}});\n  //h('div',h('span'));\n  //h('div',[h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E00\u7684\u6587\u672C'),h('span','\u865A\u62DF\u5B50\u8282\u70B9\u4E8C\u7684\u6587\u672C')]);\n  //h('div','\u6587\u672C\u8282\u70B9\u4E00');\n  if (theLength === 2) {//\u4E3A\u4EC0\u4E48\u8981\u5C06\u5B50\u8282\u70B9\u5305\u88C5\u6210\u6570\u7EC4,\u56E0\u4E3A\u5143\u7D20\u53EF\u4EE5\u5FAA\u73AF\u521B\u5EFA;//\u4F46\u6587\u672C\u5C31\u4E0D\u9700\u8981\u5305\u88C5\u4E86;\n    if (isObject(propsChildren) && !isArray(propsChildren)) {\n      //\u662F\u5BF9\u8C61\u4F46\u4E0D\u662F\u6570\u7EC4\u5C31\u8D70\u4E0B\u9762;\n\n      if (isVnode(propsChildren)) {//\u865A\u62DF\u8282\u70B9\u5C31\u5305\u88C5\u6210\u6570\u7EC4;\n        return createVnode(type, null, [propsChildren as (string | number | VNode)])\n      }\n\n      //\u4E0D\u662F\u6570\u7EC4,\u5C31\u4EE3\u8868\u5B83\u662F\u5BF9\u8C61?\n      return createVnode(type, propsChildren as VNodeProps)//\u4E0D\u662F\u865A\u62DF\u8282\u70B9\u7684\u5BF9\u8C61,\u5C31\u8BA4\u4E3A\u5B83\u662F\u5C5E\u6027;\n    } else {\n      return createVnode(type, null, propsChildren as VNodeChildren)//\u662F\u6570\u7EC4\u6216\u6587\u672C;\n    }\n  } else {\n    if (theLength > 3) {\n      children = Array.from(arguments).slice(2)\n    } else if (theLength === 3 && isVnode(children)) {//h('div',{},h('span'));\n      //\u7B49\u4E8E3\u4E2A;\n      children = [children as VNode]\n    }\n\n    /* //\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u5B57\u7B26\u4E32\u65F6;\n    if(isString(propsChildren)){\n      return createVnode(type, null,[propsChildren, children])\n    } */\n\n\n    //\u5176\u5B83;\n    //\u5982\u679C\u6709\u4E09\u4E2A\u53C2\u6570,\u9ED8\u8BA4\u7B2C\u4E8C\u4E2A\u53C2\u6570\u5C31\u662Fprops;\n    return createVnode(type, propsChildren as object, children)//children\u7684\u60C5\u51B5\u6709\u4E24\u79CD--\u6587\u672C\u6216\u6570\u7EC4;\n  }\n}\n\n/* function h(type, propsOrChildren, children) {\n  const l = arguments.length;\n  if (l === 2) {\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n      // single vnode without props\n      if (isVNode(propsOrChildren)) {\n        return createVNode(type, null, [propsOrChildren]);\n      }\n      // props without children\n      return createVNode(type, propsOrChildren);\n    }\n    else {\n      // omit props\n      return createVNode(type, null, propsOrChildren);\n    }\n  }\n  else {\n    if (l > 3) {\n      children = Array.prototype.slice.call(arguments, 2);\n    }\n    else if (l === 3 && isVNode(children)) {\n      children = [children];\n    }\n    return createVNode(type, propsOrChildren, children);\n  }\n} */", "\nexport type NodeOperateOptions = {\n  insert(child: Node, parent: Element, anchor?: Node): void;\n  remove(child: Node): void;\n  setElementText(el: Element, text: string): void;\n  setText(node: Node, text: string): void;\n  querySelector(selector: any): any;\n  parentNode(node: Node): ParentNode;\n  nextSibling(node: Node): ChildNode;\n  createElement(tagName: string): HTMLElement;\n  createText(text: string): Text;\n}\nexport const nodeOps: NodeOperateOptions = {\n  //\u589E\u52A0 \u5220\u9664 \u4FEE\u6539 \u67E5\u8BE2\n\n  //\u63D2\u5165\u8282\u70B9;\n  insert(child: Node, parent: Element, anchor: Node = null) {\n    parent.insertBefore(child, anchor)//insertBefore\u53EF\u4EE5\u7B49\u4EF7\u4E8EappendChild;\n  },\n\n  //remove-\u5220\u9664\u8282\u70B9;\n  remove(child: Node) {\n    const parentNode = child.parentNode;\n    if (parentNode) {\n      parentNode.removeChild(child)\n    }\n  },\n\n  //\u6587\u672C\u8282\u70B9,\u5143\u7D20\u4E2D\u7684\u5185\u5BB9;\n\n  //\u4FEE\u6539\u5143\u7D20\u4E2D\u7684\u6587\u672C;-\u5F53\u4F20\u5165\u7684\u662F\u5143\u7D20\u65F6;\n  setElementText(el: Element, text: string) {\n    el.textContent = text\n  },\n  //\u8BBE\u7F6E\u6587\u672C\u8282\u70B9;-\u5F53\u4F20\u5165\u7684\u662F\u6587\u672C\u8282\u70B9\u65F6;\n  setText(node: Node, text: string) {\n    node.nodeValue = text\n  },\n\n  //\u67E5\u8BE2\u5143\u7D20;\n  querySelector(selector) {\n    return document.querySelector(selector)\n  },\n  //\u67E5\u8BE2\u7236\u8282\u70B9;\n  parentNode(node: Node) {\n    return node.parentNode\n  },\n  //\u67E5\u8BE2\u5144\u5F1F\u8282\u70B9;\n  nextSibling(node: Node) {\n    return node.nextSibling\n  },\n\n  //\u521B\u5EFA\u5143\u7D20\u8282\u70B9;\n  createElement(tagName: string) {\n    return document.createElement(tagName)\n  },\n  //\u521B\u5EFA\u6587\u672C\u8282\u70B9;\n  createText(text: string) {\n    return document.createTextNode(text)\n  }\n\n\n}\n/* //\u8981\u5199\u7684\u65B9\u6CD5;\nconst fang = {\n  insert: hostInsert,//\u63D2\u5165\u8282\u70B9;\n  remove: hostRemove,//\u5220\u9664\u8282\u70B9;\n  patchProp: hostPatchProp,//\u5C5E\u6027\u64CD\u4F5C,\u8981\u5355\u72EC\u53BB\u5199;//patch\u5B9E\u9645\u4E0A\u5C31\u662F\u8865\u4E01\u6216\u6BD4\u5BF9\u7684\u610F\u601D;//\u56E0\u4E3A\u8FD9\u4E2A\u65B9\u6CD5\u5373\u8981\u80FD\u521B\u5EFA,\u53C8\u8981\u80FD\u4FEE\u6539,\u8FD8\u8981\u80FD\u79FB\u9664;\n  createElement: hostCreateElement,//\u521B\u5EFA\u5143\u7D20;\n  createText: hostCreateText,//\u521B\u5EFA\u6587\u672C;\n  createComment: hostCreateComment,//\u521B\u5EFA\u6CE8\u91CA;\n  setText: hostSetText,//\u8BBE\u7F6E\u6587\u672C\u8282\u70B9\u6587\u672C;\n  setElementText: hostSetElementText,//\u8BBE\u7F6E\u5143\u7D20\u8282\u70B9\u6587\u672C;\n  parentNode: hostParentNode,//\u83B7\u53D6\u7236\u8282\u70B9;\n  nextSibling: hostNextSibling,//\u83B7\u53D6\u5144\u5F1F\u8282\u70B9;\n  setScopeId: hostSetScopeId = NOOP,//`NOOP`\u5C31\u662F\u7A7A\u51FD\u6570\u7684\u610F\u601D;\n  cloneNode: hostCloneNode,//\u628A\u8282\u70B9\u62F7\u8D1D;\n  insertStaticContent: hostInsertStaticContent,//\u63D2\u5165\u9759\u6001\u5185\u5BB9;\n} */", "//\u6BD4\u5BF9\u666E\u901A\u5C5E\u6027;\nexport function patchAttr(el: HTMLElement, key: string, nextValue: string) {\n  if (nextValue) {\n    el.setAttribute(key, nextValue)\n  } else {\n    el.removeAttribute(key)\n  }\n}", "//\u6BD4\u5BF9\u7C7B\u540D;\nexport function patchClass(el: HTMLElement, nextValue: string | null) {\n\n  if (nextValue === null) {\n    el.removeAttribute('class')//\u5982\u679C\u4E0D\u9700\u8981class,\u76F4\u63A5\u79FB\u9664;\n  } else {\n    el.className = nextValue\n  }\n}", "function createInvoker<T extends Function | Array<Function>>(callback: T) {\n  if (typeof callback !== 'function') {\n    //\u4E0D\u662F\u51FD\u6570\u65F6;(\u6682\u65F6\u4E0D\u5199)\n    const invoker = (event: any) => {\n      for (let index = 0; index < (invoker.value as Array<Function>).length; index++) {\n        invoker.value[index](event)\n      }\n    };\n    invoker.value = callback\n    return invoker\n\n  }\n\n  const invoker = (event: any) => (invoker.value as Function)(event);\n  invoker.value = callback\n  return invoker\n}\n\n\n//\u6BD4\u5BF9\u4E8B\u4EF6;\n//\u7B2C\u4E00\u6B21\u7ED1\u5B9AonClick\u4E8B\u4EF6-->\u4E8B\u4EF6a; //el._vei = {}; el._vei = {onClick:invoker\u51FD\u6570} invoker\u51FD\u6570.value\u4E3A\u4E8B\u4EF6a; el.addEventListener('click', (event) => invoker.value(event)); el.addEventListener('click', (event) => a(event));\n//\u7B2C\u4E8C\u6B21\u7ED1\u5B9AonClick\u4E8B\u4EF6-->\u4E8B\u4EF6b; //el._vei = {onClick:invoker\u51FD\u6570} invoker\u51FD\u6570.value\u4E3A\u4E8B\u4EF6b; el.addEventListener('click', (event) => invoker.value(event)); el.addEventListener('click', (event) => b(event));\n//\u7B2C\u4E09\u6B21\u7ED1\u5B9AonClick\u4E8B\u4EF6-->null(\u65E0\u4E8B\u4EF6); //el.addEventListener('click', (event) => invoker.value(event)); el._vei = {};\n//\u7B2C\u56DB\u6B21\u7ED1\u5B9AonClick\u4E8B\u4EF6-->[\u4E8B\u4EF6c,\u4E8B\u4EF6d];\n//\u7B2C\u56DB\u6B21\u7ED1\u5B9AonClick\u4E8B\u4EF6-->\u4E8B\u4EF6e;\nexport function patchEvent(el: HTMLElement & { _vei?: object }, eventName: string, nextValue: Function | Array<Function> | null) {\n  //\u4E8B\u4EF6\u7ED1\u5B9A\u90FD\u7F13\u5B58\u5230\u4E86\u5F53\u524DDOM\u4E0A;\n\n\n  //\u53EF\u4EE5\u5148\u79FB\u9664\u6389\u4E8B\u4EF6,\u518D\u91CD\u65B0\u7ED1\u5B9A\u4E8B\u4EF6;\n  //remove -> add ===> add + \u81EA\u5B9A\u4E49\u4E8B\u4EF6(\u91CC\u9762\u8C03\u7528\u7ED1\u5B9A\u7684\u65B9\u6CD5);\n\n  //const invokers = el._vei || (el._vei = {})\n  if (!el._vei) {\n    el._vei = {}\n  }\n  const invokers = el._vei\n\n  const exits = invokers[eventName]//\u5148\u770B\u6709\u6CA1\u6709\u7F13\u5B58\u8FC7;\n\n  //\u76EE\u524D\u8FD9\u91CC\u53EA\u8003\u8651\u5230nextValue\u53EA\u4E3AFunction\u7684\u5904\u7406;\n  //\u6CA1\u6709\u8003\u8651\u5230\u53EF\u80FD\u4E00\u6B21\u4E3AFunction,\u53E6\u4E00\u6B21\u4E3AArray<Function>\u7684\u60C5\u51B5;\n  if (exits && nextValue) {//\u5DF2\u7ECF\u7ED1\u5B9A\u8FC7\u4E8B\u4EF6\u4E86;\n    exits.value = nextValue//\u6CA1\u6709\u5378\u8F7D\u51FD\u6570,\u53EA\u662F\u6539\u4E86invoker.value\u5C5E\u6027;\n  } else {\n    //\u8FD8\u6CA1\u7ED1\u5B9A\u8FC7\u4E8B\u4EF6;\n    //onClick=click;\n    const eventLower = eventName.slice(2).toLowerCase();\n    if (nextValue) {\n      //const invoker = invokers[eventName] = createInvoker(nextValue)\n      invokers[eventName] = createInvoker(nextValue)\n      const invoker = invokers[eventName]\n\n      el.addEventListener(eventLower, invoker)\n    } else if (exits) {\n      //\u5982\u679C\u6709\u8001\u503C,\u9700\u8981\u5C06\u8001\u7684\u7ED1\u5B9A\u4E8B\u4EF6\u79FB\u9664\u6389;\n      el.removeEventListener(eventLower, exits)\n      invokers[eventName] = undefined\n    }\n  }\n\n}", "//\u6BD4\u5BF9\u6837\u5F0F;\nexport function patchStyle(el: HTMLElement, prevValue: object | null | undefined = {}, nextValue: object | null | undefined = {}) {\n  //debugger\n  //\u6837\u5F0F\u9700\u8981\u6BD4\u5BF9\u5DEE\u5F02;\n  //1. \u65B0\u5BF9\u8C61\u7684\u76F4\u63A5\u8D4B\u503C;\n  //2. \u8001\u5BF9\u8C61\u7684\u7528key\u770B\u65B0\u7684\u6709\u6CA1\u6709\u540C\u540Dkey,\u5982\u679C\u6CA1\u6709,\u5219\u4EE3\u8868\u8981\u628A\u8001\u5BF9\u8C61\u7684key\u5C5E\u6027\u53BB\u9664;\n\n  //\u5176\u5B9E\u4E5F\u53EF\u4EE5\u5148\u6E05\u7A7A\u8001\u5BF9\u8C61\u4E0A\u7684\u6240\u6709key,\u518D\u8D4B\u503C\u4E0A\u65B0\u5BF9\u8C61\u7684\u6240\u6709key;\n  /* //\u786E\u4FDD\u5FC5\u5B9A\u4E3A\u5BF9\u8C61;\n  if (!prevValue) {\n    prevValue = {}\n  }\n  if (!nextValue) {\n    nextValue = {}\n  } */\n\n  for (const key in nextValue) {\n    //\u7528\u65B0\u7684\u76F4\u63A5\u8986\u76D6\u5373\u53EF;\n    el.style[key] = nextValue[key]\n  }\n\n  if (!prevValue) {\n    return\n  }\n  for (const key in prevValue) {\n    //console.log('nextValue[key]--->', nextValue[key])\n    if (!(nextValue[key] === undefined || nextValue[key] === null)) {\n      continue\n    }\n    el.style[key] = null\n  }\n}", "\n//null,\u503C;\n//\u503C,\u503C;\n//\u503C,null;\n\nimport { patchAttr } from \"./modules/attr\";\nimport { patchClass } from \"./modules/class\";\nimport { patchEvent } from \"./modules/event\";\nimport { patchStyle } from \"./modules/style\";\n\n//patch\u5B9E\u9645\u4E0A\u5C31\u662F\u8865\u4E01\u6216\u6BD4\u5BF9\u7684\u610F\u601D;\n//\u56E0\u4E3A\u8FD9\u4E2A\u65B9\u6CD5\u5373\u8981\u80FD\u521B\u5EFA,\u53C8\u8981\u80FD\u4FEE\u6539,\u8FD8\u8981\u80FD\u79FB\u9664;\n//dom\u5C5E\u6027\u7684\u64CD\u4F5Capi;\n\n\nexport function patchProp(el: HTMLElement, key: string, prevValue: any, nextValue: unknown) {\n\n  //[vue\u6A21\u5757\u89E3\u6790](https://vue-next-template-explorer.netlify.app/);\u7528\u6765\u770B\u6A21\u677F\u8F6C\u6210VNode;\n\n  //\u8981\u5355\u72EC\u5904\u7406\u7684:\n  if (key === 'class') {//\u7C7B\u540D-el.className;\n    //class=\"a\" class=\"a b\" class;\n    patchClass(el, nextValue as string | null)\n  } else if (key === 'style') {//\u6837\u5F0F-el.style;\n    //style {color:'red',fontSize:'12'} {color:'blue',background:'red'};\n    patchStyle(el, prevValue as object | null, nextValue as object | null)\n  } else if (/^[o][n][^a-z]/.test(key)) {//\u4E8B\u4EF6-events;addEventListener;\n    //\u4E00\u822C\u6A21\u677F\u4E2D`<div @xx>\u6587\u672C</div>`\u4F1A\u8F6C\u6210`[\"div\", { onXx: () => {} }, \"\u6587\u672C\"]`;\n    //\u5373\u5C5E\u6027\u540D\u4EE5\u5C0F\u5199on\u5F00\u5934,\u540E\u65B9\u5982\u679C\u662F\u5B57\u6BCD,\u5219\u8F6C\u4E3A\u5927\u5199;\n    patchEvent(el, key, nextValue as Function | Array<Function> | null)\n  } else {//\u666E\u901A\u5C5E\u6027;//\u6B63\u5E38\u5C5E\u6027\u53EF\u4EE5\u7528el.setAttribute();\n    patchAttr(el, key, nextValue as string)\n  }\n\n\n}\n//\u865A\u62DFDOM;\n//\u5982\u4F55\u521B\u5EFA\u771F\u5B9EDOM;\n//dom-diff \u6700\u957F\u9012\u589E\u5B50\u5E8F\u5217;\n//\u7EC4\u4EF6\u7684\u5B9E\u73B0;\u6A21\u677F\u6E32\u67D3; \u6838\u5FC3\u7684\u7EC4\u4EF6\u66F4\u65B0\u7B49\u7B49; \u7EC4\u4EF6 ....;\n//\u6A21\u677F\u7F16\u8BD1-\u7F16\u8BD1\u539F\u7406 + \u4EE3\u7801\u8F6C\u5316 + \u4EE3\u7801\u751F\u6210 + (\u7F16\u8BD1\u4F18\u5316);\n\n/* //\u4E00\u6B21\u6BD4\u5BF9\u591A\u4E2A\u5C5E\u6027;\nfor (const key in obj) {\n  patchProp(el, key, null, obj[key])\n} */"],
  "mappings": "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",
  "names": []
}
