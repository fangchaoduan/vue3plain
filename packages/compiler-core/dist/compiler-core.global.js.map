{
  "version": 3,
  "sources": ["../src/index.ts", "../src/runtimeHelpers.ts", "../src/ast.ts", "../src/parse.ts", "../src/transforms/transformElement.ts", "../src/transforms/transformExpression.ts", "../../shared/src/index.ts", "../src/transforms/transformText.ts", "../src/transform.ts"],
  "sourcesContent": ["import { parse } from \"./parse\";\nimport { transform } from \"./transform\";\n\n\n\nexport function compile(template: string) {\n  //\u5C06\u6A21\u677F\u8F6C\u6210\u62BD\u8C61\u8BED\u6CD5\u6811-ast\u8BED\u6CD5\u6811;\n  const ast = parse(template);//\u8FD9\u91CC\u9700\u8981\u5C06html\u8BED\u6CD5\u8F6C\u6362\u6210js\u8BED\u6CD5;--\u7F16\u8BD1\u539F\u7406;\n\n  //codegen \u4E3A\u4E86\u751F\u6210\u4EE3\u7801\u7684\u65F6\u5019\u66F4\u65B9\u4FBF,\u5728\u8F6C\u5316\u8FC7\u7A0B\u4E2D\u4F1A\u751F\u6210\u8FD9\u6837\u4E00\u4E2A\u5C5E\u6027;\n  //\u8FD9\u91CC\u8F6C\u5316,\u8981\u8FDB\u884C\u6536\u96C6\u6240\u9700\u7684\u65B9\u6CD5 \u5982: `createElementVnode toDisplayString`;\n  //\u8FD9\u91CC\u9700\u8981\u5728\u751F\u6210\u4EE3\u7801\u4E4B\u524D,\u518D\u505A\u4E00\u4E9B\u8F6C\u5316;\n  //\u6BD4\u5982: `<div>{{aa}} 123</div>` \u8981\u8F6C\u6210 `createElementVnode('div',toDisplayString(aa) + 123)`;\n\n  //\u76EE\u524D\u5C31\u4E3B\u8981\u9488\u5BF9: \u5143\u7D20,\u5C5E\u6027,\u8868\u8FBE\u5F0F,\u6587\u672C;\n  //\u4E3B\u8981\u5C31\u5728ast\u8BED\u6CD5\u6811\u4E0A\u6DFB\u52A0\u4E00\u4E9B\u5C5E\u6027;\n  transform(ast)\n\n\n  //console.log('ast--->', ast)\n  return ast\n  //\u5BF9ast\u8BED\u6CD5\u6811\u8FDB\u884C\u4E00\u4E9B\u9884\u5148\u5904\u7406;\n  // transform(ast);//\u4F1A\u751F\u6210\u4E00\u4E9B\u4FE1\u606F;\n\n  //\u4EE3\u7801\u751F\u6210;\n  // return generate(ast);//\u6700\u7EC8\u751F\u6210\u4EE3\u7801;\u548Cvue2\u7684\u8FC7\u7A0B\u4E00\u6837;\n}\n\n//`openBlock + (_)` \u8FD9\u4E00\u7C7B\u5B9E\u9645\u4E0A\u5C31\u662F\u624B\u52A8\u62FC\u5B57\u7B26\u4E32;\n\n\n", "export const TO_DISPLAY_STRING = Symbol(`toDisplayString`)\nexport const CREATE_TEXT = Symbol('createTextVNode')\nexport const CREATE_ELEMENT_VNODE = Symbol('createElementVnode')\nexport const OPEN_BLOCK = Symbol('openBlock')\nexport const CREATE_ELEMENT_BLOCK = Symbol('createElementBlock')\nexport const FRAGMENT = Symbol('fragment')\n\nexport const helperMap = {\n  [TO_DISPLAY_STRING]: `toDisplayString`,\n  [CREATE_TEXT]: 'createTextVNode',\n  [CREATE_ELEMENT_VNODE]: 'createElementVnode',\n  [OPEN_BLOCK]: 'openBlock',\n  [CREATE_ELEMENT_BLOCK]: 'createElementBlock',\n  [FRAGMENT]: 'fragment',\n}\n\n//\u540E\u9762\u53EF\u4EE5\u7528: helperMap[TO_DISPLAY_STRING] \u6765\u53D6\u5F97\u5B57\u7B26\u4E32`toDisplayString`;\n//const r = helperMap[TO_DISPLAY_STRING]\n", "import { PatchFlags } from \"@vue/shared\";\nimport { ParseNode } from \"./parse\";\nimport { CREATE_ELEMENT_VNODE, CREATE_TEXT } from \"./runtimeHelpers\";\nimport { TransformContext } from \"./transform\";\nimport { ChildrenNode, ElementCodegenNode, PropertyObject, PropsExpression } from \"./transforms/transformElement\";\nimport { TextCodegenNode } from \"./transforms/transformText\";\n\n//ast\u8BED\u6CD5\u6811\u76F8\u5173type;\nexport const enum NodeTypes {\n  ROOT, // \u6839\u8282\u70B9 Fragment;\n  ELEMENT, // \u5143\u7D20;\n  TEXT, // \u6587\u672C;\n  COMMENT, // \u6CE8\u91CA;\n  SIMPLE_EXPRESSION, // \u7B80\u5355\u8868\u8FBE\u5F0F--\u5982: :a=\"aaa\"\u4E2D\u7684aaa;\n  INTERPOLATION,  // \u63D2\u503C--\u6A21\u7248\u8868\u8FBE\u5F0F--\u5982{{aaa}};\n  ATTRIBUTE, // \u5C5E\u6027;\n  DIRECTIVE, // \u6307\u4EE4;\n  // containers\n  COMPOUND_EXPRESSION, // \u590D\u5408\u8868\u8FBE\u5F0F--\u5982:{{aa}}abc;\n  IF,//v-if?\n  IF_BRANCH, //if\u5206\u652F?\n  FOR,//v-for?\n  TEXT_CALL,//\u6587\u672C\u8C03\u7528;\n  //codegen;\n  VNODE_CALL,//\u5143\u7D20\u8C03\u7528;\n  JS_CALL_EXPRESSION,//js\u8C03\u7528\u8868\u8FBE\u5F0F;\n  //\u8FD8\u6709\u5F88\u591A,\u8FD9\u91CC\u6CA1\u5199\u5B8C;\n  JS_OBJECT_EXPRESSION,\n}\n\nexport function createCallExpression(context: TransformContext, args: (string | ParseNode | PatchFlags)[]): TextCodegenNode {\n  const callee = context.helper(CREATE_TEXT)\n  return {\n    callee,\n    type: NodeTypes.JS_CALL_EXPRESSION,\n    arguments: args,\n  }\n}\n\nexport function createObjectExpression(properties: PropertyObject[]): PropsExpression {\n  return {\n    type: NodeTypes.JS_OBJECT_EXPRESSION,\n    properties,\n  }\n}\n\nexport function createVnodeCall(context: TransformContext, vnodeTag: string | symbol, propsExpressio: PropsExpression, childrenNode: ChildrenNode): ElementCodegenNode {\n  context.helper(CREATE_ELEMENT_VNODE)\n  // console.log('context.helpers--->', context.helpers)\n  return {\n    type: NodeTypes.VNODE_CALL,\n    tag: vnodeTag,\n    props: propsExpressio,\n    children: childrenNode\n  }\n}\n\n//TEXT_CALL -> \u6587\u672C\u7684\u610F\u601D; JS_CALL_EXPRESSION \u8C03\u7528\u6587\u672C\u8868\u8FBE\u5F0F;\n//VNODE_CALL -> \u5143\u7D20; JS_OBJECT_EXPRESSION\u5C5E\u6027;", "//\u4E3B\u8981\u662F\u628Atemplate\u4E2D\u7684\u4EE3\u7801\u7F16\u8BD1\u6210render()\u51FD\u6570-render()\u51FD\u6570\u4E2DVNode\u7684\u662F\u7528\u6A21\u7248\u6765\u5199\u7684,\u800C\u4E0D\u662Fh()\u51FD\u6570\u751F\u6210\u7684;\n\nimport { PatchFlags } from \"@vue/shared\";\nimport { NodeTypes } from \"./ast\";\nimport { ElementCodegenNode } from \"./transforms/transformElement\";\nimport { TextCodegenNode } from \"./transforms/transformText\";\n\n/* type TemplateContext = {\n  line: number;//\u7B2C\u51E0\u884C;\n  column: number;//\u7B2C\u51E0\u5217;\n  offset: number;//\u504F\u79FB\u91CF;\n  source: string;//\u5F53\u524D\u8981\u88AB\u89E3\u6790\u6A21\u7248,\u6B64\u5B57\u6BB5\u4F1A\u88AB\u4E0D\u505C\u5730\u8FDB\u884C\u89E3\u6790,\u4F1Aslice()\u4E00\u76F4\u88AB\u622A\u77ED;//\u5185\u5BB9\u4E3A\u7A7A,\u8BF4\u660E\u5DF2\u7ECF\u89E3\u6790\u7ED3\u675F;\n  originalSource: string;//\u539F\u6A21\u7248,\u6B64\u5B57\u6BB5\u662F\u539F\u6A21\u7248,\u4E0D\u4F1A\u88AB\u89E3\u6790;\n} */\n\ntype TemplateContext = {\n  source: string;//\u5F53\u524D\u8981\u88AB\u89E3\u6790\u6A21\u7248,\u6B64\u5B57\u6BB5\u4F1A\u88AB\u4E0D\u505C\u5730\u8FDB\u884C\u89E3\u6790,\u4F1Aslice()\u4E00\u76F4\u88AB\u622A\u77ED;//\u5185\u5BB9\u4E3A\u7A7A,\u8BF4\u660E\u5DF2\u7ECF\u89E3\u6790\u7ED3\u675F;\n  originalSource: string;//\u539F\u6A21\u7248,\u6B64\u5B57\u6BB5\u662F\u539F\u6A21\u7248,\u4E0D\u4F1A\u88AB\u89E3\u6790;\n} & CursorObject\n//\u521B\u5EFA\u5F53\u524D\nfunction createParserContext(template: string): TemplateContext {\n  const theContext: TemplateContext = {\n    line: 1,\n    column: 1,\n    offset: 0,\n    source: template,\n    originalSource: template,\n  };\n  return theContext\n}\n\n\nfunction isEnd(context: TemplateContext) {\n  const source = context.source\n\n  //\u4EE5\u95ED\u5408\u6807\u7B7E\u4E3A\u5F00\u59CB\u65F6;\n  if (context.source.startsWith(`</`)) {\n    return true\n  }\n\n  return !source;//\u6CA1\u6709\u5185\u5BB9\u65F6;\n}\n\n//\u884C\u5217\u6E38\u6807\u4FE1\u606F,\u7528\u6765\u62A5\u9519\u4E4B\u7C7B\u7684\u7528\u5230;\ntype CursorObject = {\n  line: number;//\u7B2C\u51E0\u884C;\n  column: number;//\u7B2C\u51E0\u5217;\n  offset: number;//\u504F\u79FB\u91CF;\n}\n\n//\u5F97\u5230\u5F53\u524D\u4E0A\u4E0B\u6587\u7684\u6E38\u6807\u4FE1\u606F,\u7528\u4E8E\u62A5\u9519\u63D0\u793A\u4E4B\u7C7B\u7684;\n//getCursor \u83B7\u53D6\u4F4D\u7F6E\u7684\u4FE1\u606F,\u6839\u636E\u5F53\u524D\u7684\u4E0A\u4E0B\u6587;\nfunction getCursor(context: TemplateContext): CursorObject {\n  const { line, column, offset } = context\n  return { line, column, offset }\n}\n\n//\u66F4\u65B0\u6700\u65B0\u7684\u884C\u5217\u53CA\u504F\u79FB\u91CF\u4FE1\u606F\u53CA\u6E90\u5185\u5BB9\u548C\u66F4\u65B0\u540E\u5185\u5BB9;\n//advancePositionWithMutation \u66F4\u65B0\u4FE1\u606F;\nfunction advancePositionWithMutation(context: CursorObject | TemplateContext, source: string, endIndex: number) {\n  let linesCount = 0;\n  let linePos = -1;\n  for (let i = 0; i < endIndex; i++) {\n    if (source.charCodeAt(i) === 10) {\n      //console.log('i--->', i)\n      linesCount++\n\n      linePos = i;\n    }\n  }\n  context.line = context.line + linesCount\n\n  //\u504F\u79FB\u91CF,\u5220\u6389\u591A\u5C11\u52A0\u591A\u5C11;\n  context.offset = context.offset + endIndex\n\n  //\u7B49\u4E8E-1,\u8BF4\u660E\u6CA1\u6709\u6362\u884C\u8FC7;\u800C\u8FD9\u4E9B\u6587\u672C\u524D,\u53EF\u80FD\u5C31\u662F\u4E2A\u6807\u7B7E,\u6240\u4EE5\u8981\u52A0\u4E4B\u524D\u7684;\n  //\u5982\u679C\u6362\u884C\u8FC7,\u90A3\u4E48linePos\u5FC5\u5B9A\u662F\u4E0A\u4E00\u884C\u4E2D\u6362\u884C\u7B26\u7684\u89D2\u6807;\n  context.column = linePos === -1 ? context.column + endIndex : endIndex - linePos\n  //console.log('linePos--->', linePos)\n  // debugger\n}\n/* 12312321231\n    123456789\n\n12312321231123456789    */\n\n//\u628A\u5F53\u524D\u4E0A\u4E0B\u6587\u7684\u5F53\u524D\u6A21\u7248\u5728\u7ED3\u675F\u89D2\u6807\u524D\u7684\u6587\u672C\u622A\u53BB;\n//advanceBy \u4F1A\u8FDB\u884C\u524D\u8FDB\u5220\u9664;\nfunction advanceBy(context: TemplateContext, endIndex: number) {\n  //\u6BCF\u6B21\u5220\u6389\u5185\u5BB9\u7684\u65F6\u5019,\u90FD\u8981\u66F4\u65B0\u6700\u65B0\u7684\u884C\u5217\u548C\u504F\u79FB\u91CF\u4FE1\u606F;\n  const source = context.source\n  advancePositionWithMutation(context, source, endIndex)\n  context.source = source.slice(endIndex)\n}\n\n\n//\u622A\u53D6\u5F53\u524D\u4E0A\u4E0B\u6587\u7684\u6587\u672C\u5185\u5BB9;\n//parseTextData \u5904\u7406\u6587\u672C\u5185\u5BB9,\u5E76\u4E14\u4F1A\u66F4\u65B0\u6700\u65B0\u7684\u504F\u79FB\u91CF\u4FE1\u606F;\nfunction parseTextData(context: TemplateContext, endIndex: number) {\n  const rawText = context.source.slice(0, endIndex)\n  advanceBy(context, endIndex)\n  // debugger\n  return rawText\n}\n\n//\u4F4D\u7F6E\u4FE1\u606F;\ntype SelectionObject = {\n  start: CursorObject;//\u7B2C\u51E0\u884C;\n  end: CursorObject;\n  source: string;\n}\n//getSelection \u83B7\u53D6\u5F53\u524D\u5F00\u5934\u548C\u7ED3\u5C3E\u7684\u4F4D\u7F6E;\nfunction getSelection(context: TemplateContext, start: CursorObject, end?: CursorObject) {\n  end = end || getCursor(context)\n  //console.log(start.offset, end.offset)\n  const theReturn: SelectionObject = {\n    start,\n    end,\n    source: context.originalSource.slice(start.offset, end.offset)\n  }\n  return theReturn\n}\n\nexport type ParseNode = {\n  type: NodeTypes;//\u8282\u70B9\u7C7B\u578B;\n  content?: string | ParseNode;//\u8282\u70B9\u5185\u5BB9;\n  tag?: string;//\u6807\u7B7E\u7C7B\u578B;\n  isSelfClosing?: boolean;//\u662F\u5426\u6807\u7B7E\u81EA\u95ED\u5408;\n  children?: ParseNode[],//\u513F\u5B50\u8282\u70B9;//\u5728COMPOUND_EXPRESSION\u65F6,string\u662F\u7528\u4E8E\u62FC\u63A5\u7684;\n  props?: ElementProp[],//\u5C5E\u6027;\n  loc?: SelectionObject;//\u4F4D\u7F6E\u4FE1\u606F;//\u5728COMPOUND_EXPRESSION\u65F6,\u6CA1\u6709loc?\n  codegenNode?: TextCodegenNode | ElementCodegenNode,\n  helpers?: symbol[];\n}\n\nfunction parseText(context: TemplateContext) {\n  //\u5728\u89E3\u6790\u6587\u672C\u7684;\n  const endTokens = [`<`, `{{`]//\u7ED3\u675F\u6807\u8BC6\u5217\u8868;\n  //asafs{{d<jfhlaksdjhalkjfhd;sjfh;\n  let endIndex = context.source.length//\u9ED8\u8BA4\u4E3A\u5230\u6700\u540E\u7ED3\u675F;\n  for (let i = 0; i < endTokens.length; i++) {\n    //\u770B\u7ED3\u675F\u6807\u8BC6\u7B2C\u4E00\u6B21\u51FA\u73B0\u7684\u5730\u65B9;\n    //\u56E0\u4E3A\u8FDB\u5165parseText\u7684\u7B2C\u4E00\u4E2A\u89D2\u68070,\u5FC5\u5B9A\u4E0D\u662F\u7ED3\u675F\u6807\u8BC6;\n    const index = context.source.indexOf(endTokens[i], 1)\n    //\u627E\u5230\u4E86,\u5E76\u4E14\u7B2C\u4E00\u6B21\u6BD4\u6574\u4E2A\u5B57\u7B26\u4E32\u5C0F;\n    if (index !== -1 && endIndex > index) {\n      endIndex = index\n    }\n  }\n\n  //\u521B\u5EFA \u884C\u5217\u4FE1\u606F;\n  const start = getCursor(context)//\u5F00\u59CB;\n\n  //\u53D6\u5185\u5BB9;\n  const content = parseTextData(context, endIndex)\n  //debugger\n  const theParseNode: ParseNode = {\n    type: NodeTypes.TEXT,//\u7C7B\u578B;\n    content: content,//\u5185\u5BB9;\n    loc: getSelection(context, start),//\u4F4D\u7F6E\u4FE1\u606F;\n  }\n\n  return theParseNode\n  //\u518D\u83B7\u53D6\u7ED3\u675F\u7684\u4F4D\u7F6E;\n\n  //debugger\n}\n\n\n//getCursor \u83B7\u53D6\u4F4D\u7F6E\u7684\u4FE1\u606F,\u6839\u636E\u5F53\u524D\u7684\u4E0A\u4E0B\u6587;\n//parseTextData \u5904\u7406\u6587\u672C\u5185\u5BB9,\u5E76\u4E14\u4F1A\u66F4\u65B0\u6700\u65B0\u7684\u504F\u79FB\u91CF\u4FE1\u606F;\n//advancePositionWithMutation \u66F4\u65B0\u4FE1\u606F;\n//getSelection \u83B7\u53D6\u5F53\u524D\u5F00\u5934\u548C\u7ED3\u5C3E\u7684\u4F4D\u7F6E;\n//advanceBy \u4F1A\u8FDB\u884C\u524D\u8FDB\u5220\u9664;\n\n//\u5904\u7406\u8868\u8FBE\u5F0F\u7684\u4FE1\u606F;\nfunction parseInterpolation(context: TemplateContext) {\n  const start = getCursor(context)//`{{  xxx  }}`;\n  //const closeIndex = context.source.indexOf('}}', '{{'.length)//\u67E5\u627E\u7ED3\u675F\u7684\u5927\u62EC\u53F7;\n  const closeIndex = context.source.indexOf('}}', 2)//\u67E5\u627E\u7ED3\u675F\u7684\u5927\u62EC\u53F7;\n\n  advanceBy(context, 2);//`  xxx  }}`;\n\n  const innerStart = getCursor(context);//\u7528\u6765\u8BB0\u5F55\u8868\u8FBE\u5F0F\u53BB\u6389\u4E86`{{`\u65F6\u7684\u6E38\u6807;\n  const innerEnd = getCursor(context);//\u540E\u9762\u518D: advancePositionWithMutation;\n\n  //\u62FF\u5230\u539F\u59CB\u7684\u5185\u5BB9;\n  const rawContentLength = closeIndex - 2;//\u539F\u59CB\u5185\u5BB9\u7684\u957F\u5EA6,\u8FD9\u4E2A\u662F\u51CF\u53BB\u4E86`  xxx  }}`\u4E2D\u7684`}}`;\n  const preContent = parseTextData(context, rawContentLength)//`  xxx  `;//\u53EF\u4EE5\u8FD4\u56DE\u6587\u672C\u5185\u5BB9,\u5E76\u4E14\u662F\u53EF\u4EE5\u66F4\u65B0\u4FE1\u606F;//\u6B64\u65F6context\u4E3A`}}`;\n  const content = preContent.trim()//`xxx`;\n  const startOffset = preContent.indexOf(content)\n\n  if (startOffset > 0) {\n    advancePositionWithMutation(innerStart, preContent, startOffset)\n  }\n  const endOffset = startOffset + content.length\n  advancePositionWithMutation(innerEnd, preContent, endOffset)\n\n  advanceBy(context, 2)\n\n  const theParseNode: ParseNode = {\n    type: NodeTypes.INTERPOLATION,//\u8868\u8FBE\u5F0F;\n    content: {\n      type: NodeTypes.SIMPLE_EXPRESSION,\n      content,\n      loc: getSelection(context, innerStart, innerEnd)\n    },\n    loc: getSelection(context, start),//\u4F4D\u7F6E\u4FE1\u606F;\n  }\n\n  return theParseNode\n}\n\n//\u4E0A\u4E0B\u6587\u53BB\u6389\u524D\u65B9\u7684\u7A7A\u683C\u7B49\u7A7A\u5B57\u7B26;\nfunction advanceBySpaces(context: TemplateContext) {\n  //const theRegExp = /^[ \\t\\r\\n]{1,}/\n  const theRegExp = /^[ \\t\\r\\n]+/\n  const match = theRegExp.exec(context.source)\n  if (match) {\n    advanceBy(context, match[0].length)\n  }\n}\n\nfunction parseAttributeValue(context: TemplateContext) {\n  const start = getCursor(context)\n  const quote = context.source[0];\n  let content: string\n  if (quote === `\"` || quote === `'`) {\n    // debugger\n    //\u6709\u5F15\u53F7\u7684;\n    advanceBy(context, 1)//\u53BB\u9664\u524D\u5F15\u53F7;\n    const endIndex = context.source.indexOf(quote)\n    content = parseTextData(context, endIndex)\n    advanceBy(context, 1)//\u53BB\u9664\u540E\u5F15\u53F7;\n  }/*  else {\n    //\u6CA1\u5F15\u53F7\u7684\u6682\u65F6\u4E0D\u8003\u8651;\n    const endIndex1 = context.source.indexOf(`/`)\n    const endIndex2 = context.source.indexOf(`>`)\n    const endIndex3 = context.source.indexOf(` `)\n    const endIndex4 = context.source.indexOf(`\\n`)\n    const endIndex5 = context.source.indexOf(`\\r`)\n    const endIndex = [endIndex1, endIndex2, endIndex3, endIndex4, endIndex5].sort()[0]\n    content = parseTextData(context, endIndex)\n  } */\n\n  return {\n    content,\n    loc: getSelection(context, start)\n  }\n}\n\n\ntype ElementProp = {\n  type: NodeTypes;\n  name: string;//\u5C5E\u6027\u540D\u79F0;\n  value: {\n    content: string;//\u5C5E\u6027\u503C\u5185\u5BB9;\n    loc: SelectionObject;\n    type: NodeTypes;\n  };\n  loc: SelectionObject;\n}\n//\u5904\u7406\u5355\u4E2A\u8282\u70B9;\nfunction parseAttribute(context: TemplateContext) {\n  const start = getCursor(context)\n\n  //\u5C5E\u6027\u7684\u540D\u5B57;\n  const match = /^[^\\t\\r\\n\\f />][^\\t\\r\\n\\f />=]*/.exec(context.source)\n\n  const name = match[0]\n\n  //\u5355\u5C5E\u6027\u7684 \u5982disabeld`\u4E0D\u8003\u8651\u5148; \u8003\u8651`a=1`\u8FD9\u79CD;\n  advanceBy(context, name.length)//\u6709\u53EF\u80FD `a = 1`?\u4E5F\u6709\u53EF\u80FD`a = '1'`;\u4E5F\u6709\u53EF\u80FD`a = \"1\"`;\n  // debugger\n  advanceBySpaces(context)\n  advanceBy(context, 1)//\u5220\u9664\u7B49\u53F7?\n  const value = parseAttributeValue(context)\n\n  //debugger\n  const theReturn: ElementProp = {\n    type: NodeTypes.ATTRIBUTE,\n    name,\n    value: {\n      type: NodeTypes.TEXT,\n      ...value,\n    },\n    loc: getSelection(context, start)\n  }\n  return theReturn\n\n\n}\n//\u5904\u7406\u591A\u4E2A\u5C5E\u6027;\nfunction parseAttributes(context: TemplateContext) {//`a=1 b=2 >`;\n  const props: ElementProp[] = []\n\n  //\u76EE\u524D\u4E0D\u8003\u8651\u5982`<div asdsad=1/>` input\u8FD9\u7C7B\u6807\u7B7E\u4E86;\n  //\u65E0\u5185\u5BB9\u65F6\u505C\u6B62\u5FAA\u73AF,\u521D\u59CB\u4E3A`>`\u65F6\u505C\u6B62\u5FAA\u73AF;\n  while (context.source.length > 0 && !context.source.startsWith(`>`) && !context.source.startsWith(`/>`)) {\n    const prop = parseAttribute(context)\n    //debugger\n    props.push(prop)\n    advanceBySpaces(context)\n  }\n\n\n  return props;\n}\n\n/* type ElementNode = {\n  type: NodeTypes;\n  tag: string;\n  isSelfClosing: boolean;\n  loc: SelectionObject;\n} */\nfunction parseTag(context: TemplateContext) {\n  //\u8FDB\u5165\u8FDB\u6765\u6807\u7B7E\u82E5\u4E3A: `<div    />`;\u5219\u5148\u5220\u9664`<div`,\u518D\u5220\u9664`    `,\u518D\u5220\u9664`/>`;\n  const start = getCursor(context)\n  //\u6B63\u5219\u53EF\u4EE5\u5728: [\u6B63\u5219\u8868\u8FBE\u5F0F\u793A\u610F\u56FE\u67E5\u770B\u7F51\u7AD9](https://regexper.cn/)\u4E0A\u770B;\n  //const theRegExp = /^<\\/?([a-z][^ \\t\\r\\n/>]*)/;\n  //const theRegExp = /^[<][/]{0,1}([a-z][^ \\t\\r\\n/>]*)/;\n  const theRegExp = /^[<][/]{0,1}([a-z][^ \\t\\r\\n/>]*)/;\n  const match = theRegExp.exec(context.source)\n  const tag = match[1];//\u6807\u7B7E\u540D: div <div  aa=1  >;\n  advanceBy(context, match[0].length);//\u5220\u9664\u6574\u4E2A\u6807\u7B7E;\n  advanceBySpaces(context)\n\n  //\u6807\u7B7E\u6709\u4E24\u79CD: `<div></div>` `<div/>`;\n  //\u53EF\u80FD\u6709\u5C5E\u6027;\n  const props = parseAttributes(context)\n\n\n\n  const isSelfClosing = context.source.startsWith(`/>`)//\u662F\u5426\u662F\u81EA\u95ED\u5408\u6807\u7B7E;\n  advanceBy(context, isSelfClosing ? 2 : 1)//\u81EA\u95ED\u5408\u6807\u7B7E\u52202\u4E2A\u5B57\u7B26,\u975E\u81EA\u95ED\u5408\u5220\u96641\u4E2A;\n\n  const theReturn: ParseNode = {\n    type: NodeTypes.ELEMENT,\n    tag: tag,\n    isSelfClosing,\n    children: [],\n    props,\n    loc: getSelection(context, start)\n  }\n\n  return theReturn\n\n  //`<div></div>`;\n\n}\n\n//\u5904\u7406\u6807\u7B7E\u7684\u4FE1\u606F;\nfunction parseElement(context: TemplateContext) {\n  //\u89E3\u6790\u6807\u7B7E: \u6709: `<br/>` `<div asdsad=\"333\" disabled >  </div>`\n\n  //\u5047\u8BBE\u6709: `<div></div>`;\n  const ele = parseTag(context)//\u5148\u5E72\u6389`<div></div>`\u4E2D\u7684`<div>`;\n\n  //\u513F\u5B50;\n  const children = parseChildren(context)//\u5904\u7406\u513F\u5B50\u7684\u65F6\u5019,\u53EF\u80FD\u6CA1\u6709\u513F\u5B50;\n\n  //`</div>`;\n  if (context.source.startsWith(`</`)) {\n    //\u76F4\u63A5\u5E72\u6389\u5982: `<div></div>`\u4E2D\u7684`</div>`;\n    //\u5176\u5B9E\u4E5F\u6709\u8FD4\u56DE\u7684,\u4F46\u6CA1\u6709\u7528\u5230\u5B83\u7684\u8FD4\u56DE;\n    parseTag(context)\n  }\n\n  ele.loc = getSelection(context, ele.loc.start)//\u8BA1\u7B97\u6700\u65B0\u7684\u4F4D\u7F6E\u4FE1\u606F;\n  ele.children = children;//\u6302\u8F7D\u513F\u5B50\u8282\u70B9;\n\n\n  const theParseNode: ParseNode = ele\n\n  return theParseNode\n}\n\n\n\n//\u5C06html\u8BED\u6CD5\u8F6C\u6362\u6210js\u8BED\u6CD5;\n//\u56E0\u4E3Avue\u6709\u81EA\u5DF1\u7684\u6307\u4EE4,\u63D2\u69FD,\u52A8\u6001\u8868\u793A\u5982{{}},\u6240\u4EE5vue\u81EA\u5DF1\u5B9E\u73B0\u4E86,\u4E5F\u66F4\u8BE6\u7EC6\u53CA\u7CBE\u7EC6\u4E00\u4E9B;\nexport function parse(template: string) {\n  //\u521B\u5EFA\u4E00\u4E2A\u89E3\u6790\u7684\u4E0A\u4E0B\u6587\u6765\u8FDB\u884C\u5904\u7406;\n  const context = createParserContext(template)\n  //debugger\n\n  //return parseChildren(context)\n\n  const start = getCursor(context)//\u672A\u89E3\u6790\u524D\u7684\u6E38\u6807;\n  const children = parseChildren(context)//\u89E3\u6790\u5F53\u524D\u6A21\u677F,\u4F1A\u6539\u53D8context;\n  const theLoc = getSelection(context, start)//\u89E3\u6790\u540E\u7684\u4F4D\u7F6E\u4FE1\u606F;\n  const node = createRoot(children, theLoc)\n  return node\n}\n\n//\u7ED9\u5B50\u8282\u70B9\u5217\u8868\u5305\u4E00\u5C42\u6839\u8282\u70B9-Fragment\u7C7B\u578B\u7684\u8282\u70B9;\nfunction createRoot(children: ParseNode[], loc: SelectionObject) {\n  const theParseNode: ParseNode = {\n    type: NodeTypes.ROOT,//Fragment;\n    children,\n    loc,\n  }\n  return theParseNode\n}\n\nfunction parseChildren(context: TemplateContext) {\n  //< \u5143\u7D20;\n  //{{}} \u8BF4\u660E\u8868\u8FBE\u5F0F;\n  //\u5176\u5B83\u5C31\u662F\u6587\u672C;\n  //\u76EE\u524D\u4E0D\u8003\u8651\u5176\u5B83;\u5982\u52A8\u6001\u6307\u4EE4,\u52A8\u6001\u4E8B\u4EF6,\u52A8\u6001\u6307\u4EE4\u4E4B\u7C7B\u7684\u76EE\u524D\u4E0D\u8003\u8651;\n  const nodes: ParseNode[] = []\n  while (!isEnd(context)) {\n    const source = context.source\n    let node: ParseNode\n    if (source.startsWith('{{')) {\n      //\u8BF4\u660E\u8868\u8FBE\u5F0F;\n      //{{  xxx   }};\n      /* {{  \n        \n        xxx   \n      \n      }}; */\n      node = parseInterpolation(context)\n    } else if (source[0] === '<') {\n      //\u5143\u7D20-\u6807\u7B7E;\n      //break\n      node = parseElement(context)\n    }\n\n    //\u6587\u672C;\n    //\u6682\u65F6\u4E0D\u8003\u8651\u5176\u5B83,\u5982\u6CE8\u91CA\u4E4B\u7C7B\u7684;\n    if (!node) {//`  {{aa}}  aaa {{bbb}}  `\n      node = parseText(context)\n      //break\n    }\n    nodes.push(node)\n    //console.log(nodes)\n    //break\n  }\n  //console.log(nodes)\n\n  //\u53BB\u9664\u4E3A\u5168\u4E3A\u7A7A\u683C\u4E4B\u7C7B\u7684\u6587\u672C\u8282\u70B9;\n  nodes.forEach((item, index) => {\n    if (item.type === NodeTypes.TEXT) {\n      //const theRegExp = /^\\t\\r\\n\\f /;//\u4E2A\u4EBA\u611F\u89C9\u4E0D\u592A\u5BF9;\n      // debugger\n      const theRegExp = /^[\\t\\r\\n\\f ]{1,}$/;\n      //\u4E2A\u4EBA\u89C9\u5F97`!/[^\\t\\r\\n\\f ]/.test(item.content as string)`\u4E0D\u592A\u597D\u8BB0,\u5B83\u7684\u610F\u601D\u662F`\u975E \u62E5\u6709\u9664\u7A7A\u683C\u4E4B\u5916\u5176\u5B83\u5B57\u7B26\u7684 \u5B57\u7B26\u4E32`;\n      if (theRegExp.test(item.content as string)) {\n        nodes[index] = null\n      }\n    }\n  })\n\n  const theReturn = nodes.filter(Boolean)\n  //Boolean\u662F\u4E00\u4E2A\u51FD\u6570;Boolean(vaue)=>boolean;\n  //\u76F8\u5F53\u4E8E`nodes.filter(Boolean)` -> `nodes.filter(Boolean(item))` -> `nodes.filter((item)=>Boolean(item))` -> `nodes.filter((item)=>{return Boolean(item)})`;\n\n  return theReturn\n}", "import { createObjectExpression, createVnodeCall, NodeTypes } from \"../ast\"\nimport { ParseNode } from \"../parse\"\nimport { TransformContext } from \"../transform\"\n\n\nexport type PropertyObject = {\n  key: string;\n  value: string;\n}\nexport type PropsExpression = {\n  type: NodeTypes;\n  properties: PropertyObject[];\n}\n\n\nexport type ElementCodegenNode = {\n  type: NodeTypes;\n  tag: string | symbol;\n  props: PropsExpression;\n  children: ChildrenNode;\n  isBlock?: boolean;//\u662F\u5426\u662Fblock\u8282\u70B9;\n}\n\nexport type ChildrenNode = null | ParseNode | (string | ParseNode)[]\n//\u7528\u4E8E\u8F6C\u5316\u5143\u7D20\u7684;\nexport function transformElement(node: ParseNode, context: TransformContext) {//\u7C7B\u4F3C\u4E8E: patchClass\u4E0EpatchStyle;\n  //\u53EF\u4EE5\u5224\u65AD\u5165\u53C2\u91CF\u662F\u4E0D\u662F\u5143\u7D20;\n  //console.log('transformElement--->', node, context)\n\n  //\u671F\u671B \u7ED9\u6240\u6709\u513F\u5B50\u5904\u7406\u5B8C\u540E,\u7ED9\u5143\u7D20\u91CD\u65B0\u6DFB\u52A0children\u5C5E\u6027;\n\n  // console.log(`\u8FDB\u51651`)\n  if (node.type === NodeTypes.ELEMENT) {\n    //\u9000\u51FA\u51FD\u6570;\n    return () => {\n      // console.log(`\u9000\u51FA1`)\n\n      //createElementVnode('div',{},\u5B69\u5B50);\n\n      const vnodeTag = `\"${node.tag}\"`\n\n      //debugger\n\n      const properties: PropertyObject[] = []\n      const props = node.props\n      for (let i = 0; i < props.length; i++) {\n        const theProperty: PropertyObject = {\n          key: props[i].name,\n          value: props[i].value.content\n        }\n        properties.push(theProperty)\n      }\n      // console.log('props--->', props)\n      // console.log('properties--->', properties)\n\n      //debugger\n\n      //\u521B\u5EFA\u4E00\u4E2A\u5C5E\u6027\u7684\u8868\u8FBE\u5F0F;\n      const propsExpression = properties.length > 0 ? createObjectExpression(properties) : null\n\n      //\u9700\u8981\u8003\u8651\u5B69\u5B50\u7684\u60C5\u51B5 \u76F4\u63A5\u662F\u4E00\u4E2A\u8282\u70B9;\n      // debugger\n      if (node.children.length === 1) {\n        const child = node.children[0]\n      }\n\n      let childrenNode: ChildrenNode = null\n      if (node.children.length === 1) {\n        childrenNode = node.children[0] as ParseNode\n      } else if (node.children.length > 1) {\n        childrenNode = node.children\n      }\n\n      //createElementVnode\n      node.codegenNode = createVnodeCall(context, vnodeTag, propsExpression, childrenNode)\n\n    }\n  }\n}", "import { NodeTypes } from \"../ast\"\nimport { ParseNode } from \"../parse\"\nimport { TransformContext } from \"../transform\"\n\n//\u7528\u4E8E\u8F6C\u5316\u8868\u8FBE\u5F0F\u7684;\n//\u66FF\u6362\u5E76\u4E14\u589E\u52A0\u65B9\u6CD5,\u5373\u53EF;\nexport function transformExpression(node: ParseNode, context: TransformContext) {//{{aaa}} -> _ctx.aaa;\n  //\u53EF\u4EE5\u5224\u65AD\u5165\u53C2\u662F\u4E0D\u662F\u8868\u8FBE\u5F0F;\n  //console.log('transformExpression--->', node, context)\n\n  if (node.type === NodeTypes.INTERPOLATION) {\n    const content = (node.content as ParseNode).content as string\n    (node.content as ParseNode).content = `_ctx.${content}`\n  }\n}", "//\u5165\u53C2\u662F\u5426\u662F\u5BF9\u8C61;\nexport const isObject = (value: any): boolean => {\n  return typeof value === 'object' && value !== null\n}\n\n//\u5165\u53C2\u662F\u5426\u662F\u5B57\u7B26\u4E32;\nexport const isString = (value: any): boolean => {\n  return typeof value === 'string'\n}\n\n//\u5165\u53C2\u662F\u5426\u662F\u6570\u5B57;\nexport const isNumber = (value: any): boolean => {\n  return typeof value === 'number'\n}\n\n//\u5165\u53C2\u662F\u5426\u662F\u65B9\u6CD5;\nexport const isFunction = (value: any): boolean => {\n  return typeof value === 'function'\n}\n\n//\u5165\u53C2\u662F\u5426\u662F\u6570\u7EC4;\nexport const isArray = Array.isArray;\n\n//\u628A\u7B2C\u4E00\u4E2A\u5165\u53C2\u8BBE\u7F6E\u4E3A\u539F\u578B,\u5E76\u4EE5\u6B64\u539F\u578B\u8FD4\u56DE\u4E00\u4E2A\u65B0\u5BF9\u8C61;\nexport const assign = Object.assign;\n\n//\u4F20\u5165\u4E00\u4E2A\u51FD\u6570\u6570\u7EC4,\u4F9D\u6B21\u6267\u884C\u91CC\u9762\u7684\u51FD\u6570;\nexport const invokeArrayFns = (fns: Array<Function>) => {\n  for (let index = 0; index < fns.length; index++) {\n    fns[index]()\n  }\n}\n\n//\u67E5\u770B\u4E00\u4E2A\u5C5E\u6027\u662F\u5426\u5728\u5BF9\u8C61\u539F\u578B\u4E0A;\nconst hasOwnProperty = Object.prototype.hasOwnProperty\n\n//\u5224\u65ADkey\u662F\u5426\u662Fvalue\u4E0A\u7684\u4E00\u4E2A\u5C5E\u6027;\nexport const hasOwn = (value: any, key: PropertyKey): boolean => hasOwnProperty.call(value, key)\n\n//ShapeFlags\u8868\u793A\u8282\u70B9\u81EA\u8EAB\u7C7B\u578B,\u5E76\u4E14\u5B50\u8282\u70B9\u662F\u6570\u7EC4\u8FD8\u662F\u5B57\u7B26\u4E32;\nexport const enum ShapeFlags {\n  ELEMENT = 1, //1<<0; //\u5143\u7D20; \n  FUNCTIONAL_COMPONENT = 2, //1<<1; //\u51FD\u6570\u5F0F\u7EC4\u4EF6;\n  STATEFUL_COMPONENT = 4, //1<<2; //\u72B6\u6001\u7EC4\u4EF6(\u6B63\u5E38\u7684\u9009\u9879\u5F0F\u7EC4\u4EF6);\n  TEXT_CHILDREN = 8, //1<<3; //;\n  ARRAY_CHILDREN = 16, //1<<4; //;\n  SLOTS_CHILDREN = 32, //1<<5; //;\n  TELEPORT = 64, //1<<6; //;\n  SUSPENSE = 128, //1<<7; //;\n  COMPONENT_SHOULD_KEEP_ALIVE = 256, //1<<8; //;\n  COMPONENT_KEPT_ALIVE = 512, //1<<9; //;\n  COMPONENT = 6 //COMPONENT = ShapeFlags.FUNCTIONAL_COMPONENT | ShapeFlags.STATEFUL_COMPONENT; //\u5373: COMPONENT = 2 | 4;//\u7EC4\u4EF6\u5305\u542B\u51FD\u6570\u5F0F\u7EC4\u4EF6\u4E0E\u72B6\u6001\u7EC4\u4EF6;\n}\n/* //\u4F4D\u8FD0\u7B97:&,|\u9002\u5408\u6743\u9650\u7684\u7EC4\u5408;\n//let user= \u589E\u52A0 | \u5220\u9664;//user&\u589E\u52A0 > 0\u5C31\u8BF4\u660E\u6709\u6743\u9650;\nconst \u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20 = ShapeFlags.ELEMENT | ShapeFlags.ARRAY_CHILDREN//1|16=17;\nconsole.log('\u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20--->',\u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20)\nconst \u662F\u5426\u5305\u542B\u5B50\u5143\u7D20\u6570\u7EC4 = ShapeFlags.ARRAY_CHILDREN & \u6709\u5B50\u5143\u7D20\u7684\u5143\u7D20\nconsole.log('\u662F\u5426\u5305\u542B\u5B50\u5143\u7D20\u6570\u7EC4--->',\u662F\u5426\u5305\u542B\u5B50\u5143\u7D20\u6570\u7EC4) */\n\n//\u6A21\u677F\u8F6C\u6210\u865A\u62DF\u8282\u70B9\u7684\u52A8\u6001\u6807\u8BC6;\nexport const enum PatchFlags {\n  TEXT = 1, // \u52A8\u6001\u6587\u672C\u8282\u70B9\n  CLASS = 1 << 1, // \u52A8\u6001class\n  STYLE = 1 << 2, // \u52A8\u6001style\n  PROPS = 1 << 3, // \u9664\u4E86class\\style\u52A8\u6001\u5C5E\u6027\n  FULL_PROPS = 1 << 4, // \u6709key\uFF0C\u9700\u8981\u5B8C\u6574diff\n  HYDRATE_EVENTS = 1 << 5, // \u6302\u8F7D\u8FC7\u4E8B\u4EF6\u7684\n  STABLE_FRAGMENT = 1 << 6, // \u7A33\u5B9A\u5E8F\u5217\uFF0C\u5B50\u8282\u70B9\u987A\u5E8F\u4E0D\u4F1A\u53D1\u751F\u53D8\u5316\n  KEYED_FRAGMENT = 1 << 7, // \u5B50\u8282\u70B9\u6709key\u7684fragment\n  UNKEYED_FRAGMENT = 1 << 8, // \u5B50\u8282\u70B9\u6CA1\u6709key\u7684fragment\n  NEED_PATCH = 1 << 9, // \u8FDB\u884C\u975Eprops\u6BD4\u8F83, ref\u6BD4\u8F83\n  DYNAMIC_SLOTS = 1 << 10, // \u52A8\u6001\u63D2\u69FD\n  DEV_ROOT_FRAGMENT = 1 << 11, \n  HOISTED = -1, // \u8868\u793A\u9759\u6001\u8282\u70B9\uFF0C\u5185\u5BB9\u53D8\u5316\uFF0C\u4E0D\u6BD4\u8F83\u513F\u5B50\n  BAIL = -2 // \u8868\u793Adiff\u7B97\u6CD5\u5E94\u8BE5\u7ED3\u675F\n}", "import { PatchFlags } from \"@vue/shared\"\nimport { createCallExpression, NodeTypes } from \"../ast\"\nimport { ParseNode } from \"../parse\"\nimport { TransformContext } from \"../transform\"\n\n\n//\u67E5\u770B\u4E00\u4E2A\u8282\u70B9\u662F\u5426\u662F\u6587\u672C;\nexport function isText(node: any) {\n  return node?.type === NodeTypes.INTERPOLATION || node?.type === NodeTypes.TEXT\n}\n\nexport type TextCodegenNode = {\n  callee: any;\n  type: NodeTypes;\n  arguments: (string | ParseNode | PatchFlags)[];\n}\nexport type TextCodegenChildren = null | {\n  type: NodeTypes.COMPOUND_EXPRESSION;\n  children: (ParseNode | string)[];\n}\n\n//\u7528\u4E8E\u8F6C\u5316\u6587\u672C\u7684;\nexport function transformText(node: ParseNode, context: TransformContext) {\n  //\u53EF\u4EE5\u5224\u65AD\u5165\u53C2\u662F\u4E0D\u662F\u6587\u672C;\n  //console.log('transformText--->', node, context)\n\n  //\u5F53\u671F\u671B \u5C06\u591A\u4E2A\u5B50\u8282\u70B9\u62FC\u63A5\u5728\u4E00\u8D77;\n  //if(node.type===2){}//\u4E0D\u884C;\n  //\u9700\u8981\u9047\u5230\u5143\u7D20\u7684\u65F6\u5019,\u624D\u80FD\u5904\u7406\u591A\u4E2A\u5B50\u8282\u70B9; //\u6BD4\u5982: {{ aaa }} + aaa;\n\n  // console.log(`\u8FDB\u51652`)\n  if (node.type === NodeTypes.ELEMENT || node.type === NodeTypes.ROOT) {\n    //\u9000\u51FA\u51FD\u6570;\n    return () => {\n      // console.log(`\u9000\u51FA2`)\n      //{{aaa}} abc -> \u7EC4\u5408\u7684\u8868\u8FBE\u5F0F COMPOUND_EXPRESSION;\n      //console.log('node.children--->', node.children)\n      //5:\u8868\u8FBE\u5F0F + 2:\u6587\u672C -> COMPOUND_EXPRESSION \u6700\u540E\u53EA\u9700\u8981\u521B\u5EFA\u7684\u65F6\u5019\u521B\u5EFA\u4E00\u4E2A\u8282\u70B9\u5C31\u53EF\u4EE5\u4E86;\n      //\u9700\u8981\u67E5\u627E\u8FDE\u7EED\u76842\u548C5,\u5C06\u4ED6\u4EEC\u62FC\u63A5\u5728\u4E00\u8D77;\n      let currentContainer: TextCodegenChildren = null;//\u4E34\u65F6\u7528\u4E8E\u62FC\u63A5\u6210`\u7EC4\u5408\u7684\u8868\u8FBE\u5F0F COMPOUND_EXPRESSION`\u7684;\n      const children = node.children//\u5B50\u8282\u70B9,\u53EF\u80FD\u4F1A\u53D8\u52A8;\u4E0D\u8FC7\u8FD9\u4E00\u5C42\u5FC5\u5B9A\u4E3AParseNode;\n      let hasText = false//\u662F\u5426\u6709\u6587\u672C?\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];//\u62FF\u5230\u7B2C\u4E00\u4E2A\u5B69\u5B50;\n\n        //hasText = true\n        if (isText(child)) {\n\n          hasText = true\n\n          //\u770B\u4E0B\u4E00\u4E2A\u8282\u70B9\u662F\u4E0D\u662F\u6587\u672C;\n          for (let j = i + 1; j < children.length; j++) {\n            const next = children[j]\n            if (isText(next)) {\n              if (!currentContainer) {\n                currentContainer = children[i] = {\n                  type: NodeTypes.COMPOUND_EXPRESSION,\n                  children: [child],\n                }\n              }\n              //\u76F4\u63A5\u5C06\u4E0B\u4E00\u4E2A\u8282\u70B9\u548C\u7B2C\u4E00\u4E2A\u8282\u70B9\u62FC\u63A5\u5728\u4E00\u8D77;\n              currentContainer.children.push(`+`, next)\n              children.splice(j, 1);//\u5220\u9664\u62FC\u63A5\u7684\u8282\u70B9;\n              j--;\n              //createElementVnode(div,toDisplayString(_ctx.aaa) + '123');//\u521B\u5EFA\u4E00\u4E2ANodeTypes.COMPOUND_EXPRESSION\u65F6;\n              //createElementVnode(div,[toDisplayString(_ctx.aaa) + '123',createElementVnode(),toDisplayString(_ctx.aaa) + '123']);//compile(`<div>{{aaa}}   123  <span></span>  123 {{aa}}  </div>`)\u65F6;\n\n            } else {\n              currentContainer = null\n              break\n            }\n          }\n        }\n      }\n\n      //\u5982\u679C\u53EA\u6709\u4E00\u4E2A\u8282\u70B9,\u5219\u76F4\u63A5\u4E0D\u5904\u7406?\n      if (!hasText || children.length === 1) {//\u76F4\u63A5\u610F\u601D\u4E3A: `\u6CA1\u6709\u6587\u672C \u6216 \u957F\u5EA6\u4E3A1`,\u76F4\u63A5\u9000\u51FA;\n        return\n      }\n\n      //debugger\n      //patchFlag \u5143\u7D20\u91CC\u6709\u4E00\u4E2A\u6587\u672C {{aa}} \u6807\u8BC6\u4F4D\u5E94\u8BE5\u662F\u4E00\u4E2A\u6587\u672C;\n\n\n      //\u6709\u6587\u672C,\u5E76\u4E14\u957F\u5EA6\u4E0D\u4E3A1,\u624D\u6267\u884C\u4E0B\u9762\u7684;\n      //\u6709\u6587\u672C,\u5E76\u4E14\u662F\u591A\u4E2A\u5B50\u5143\u7D20\u624D\u8981\u5904\u7406;\n\n\n      //\u9700\u8981\u7ED9\u591A\u4E2A\u513F\u5B50\u4E2D\u7684\u521B\u5EFA\u6587\u672C\u8282\u70B9\u6DFB\u52A0patchFlag;\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i]\n\n        const callArgs: (string | ParseNode | PatchFlags)[] = []\n        //createTextVnode('123');\n        if (isText(child) || (child as ParseNode).type === NodeTypes.COMPOUND_EXPRESSION) {\n          //\u90FD\u662F\u6587\u672C;\n          callArgs.push(child)\n          if (node.type !== NodeTypes.TEXT) {\n            //\u52A8\u6001\u8282\u70B9;\n            callArgs.push(PatchFlags.TEXT)//\u9776\u5411\u66F4\u65B0;\n          }\n\n          children[i] = {//\u6DFB\u52A0\u4E00\u4E2AcreateTextVnode\u8FD9\u4E2A\u65B9\u6CD5;\n            type: NodeTypes.TEXT_CALL,//\u901A\u8FC7createTextVnode\u6765\u5B9E\u73B0;\n            content: child,\n            codegenNode: createCallExpression(context, callArgs)\n          }\n        }\n\n      }\n    }\n  }\n}\n\n//codegen(\u4EE3\u7801\u751F\u6210); (\u5468\u65E5 pinia\u7684\u5B9E\u73B0\u539F\u7406 vue-router\u5B9E\u73B0\u539F\u7406);\n\n//\u624B\u5199\u4E00\u4E2Akeep-alive provide/inject teleport suspense;\n\n//ts -> ;\n//ts + vite + pinia;", "import { createVnodeCall, NodeTypes } from \"./ast\";\nimport { ParseNode } from \"./parse\";\nimport { CREATE_ELEMENT_BLOCK, CREATE_ELEMENT_VNODE, FRAGMENT, OPEN_BLOCK, TO_DISPLAY_STRING } from \"./runtimeHelpers\";\nimport { ElementCodegenNode, transformElement } from \"./transforms/transformElement\";\nimport { transformExpression } from \"./transforms/transformExpression\";\nimport { transformText } from \"./transforms/transformText\";\n\nexport type TransformContext = {\n  currentnode: ParseNode;//\u5F53\u524D\u6B63\u5728\u8F6C\u5316\u7684\u662F\u8C01;\n  parent: any;//\u5F53\u524D\u8F6C\u5316\u7684\u7236\u8282\u70B9\u662F\u8C01;\n  helpers: Map<symbol, number>;//\u8BB0\u5F55:\u4F7F\u7528\u4E86\u591A\u5C11\u6B21\u90A3\u4E9B\u5982`createTextVnode()`\u4E4B\u7C7B\u7684\u65B9\u6CD5;//\u7528\u4E8E\u4F18\u5316\u5982: \u8D85\u8FC720\u4E2A\u76F8\u540C\u8282\u70B9\u4F1A\u88AB\u5B57\u7B26\u4E32\u5316;\n  helper(name: symbol): symbol;\n  removeHelper(name: symbol): any;\n  nodeTransforms: ((node: ParseNode, context: TransformContext) => void | Function)[];\n}\nfunction createTransformContext(root: ParseNode) {\n  const context: TransformContext = {\n    currentnode: root,\n    parent: null,\n    helpers: new Map(),\n\n    //\u6839\u636E\u4F7F\u7528\u8FC7\u7684\u65B9\u6CD5\u8FDB\u884C\u4F18\u5316;\n    helper(name) {\n      const count = context.helpers.get(name) || 0;\n      context.helpers.set(name, count + 1)\n      return name\n    },\n\n    removeHelper(name) {\n      const count = context.helpers.get(name)\n      if (count) {\n        const currentCount = count - 1;\n        if (!currentCount) {\n          context.helpers.delete(name)\n        } else {\n          context.helpers.set(name, currentCount)\n        }\n      }\n    },\n\n    nodeTransforms: [\n      transformElement,//\u8F6C\u5316\u5143\u7D20 \u8FD4\u56DEexit-->\u8F6C\u5316\u6587\u672C \u8FD4\u56DEexit -> \u6267\u884C\u8F6C\u5316\u6587\u672Cexit--> \u6267\u884C\u8F6C\u5316\u5143\u7D20exit;\n      transformText,\n      transformExpression,\n    ]\n  }\n  return context\n}\n\nfunction traverse(node: ParseNode, context: TransformContext) {\n  context.currentnode = node\n  const transforms = context.nodeTransforms\n  const exitsFns = []\n  for (let i = 0; i < transforms.length; i++) {\n    //\u5728\u6267\u884C\u7684\u65F6\u5019,\u6709\u53EF\u80FD\u8FD9\u4E2A\u5B50\u8282\u70B9\u88AB\u5220\u9664\u4E86;\n    const onExit = transforms[i](node, context)\n    if (onExit) {\n      exitsFns.push(onExit)\n    }\n    //\u5982\u679C\u5F53\u524D\u8282\u70B9\u88AB\u5220\u6389\u4E86,\u90A3\u4E48\u5C31\u4E0D\u8003\u8651\u513F\u5B50\u4E86;\n    if (!context.currentnode) {\n      return\n    }\n  }\n\n\n\n  switch (node.type) {\n    case NodeTypes.INTERPOLATION:\n      //\u5B8F \u5E38\u91CF;\n      context.helper(TO_DISPLAY_STRING)\n      break;\n    case NodeTypes.ELEMENT:\n    case NodeTypes.ROOT:\n      //\u5982\u679C\u6709\u5B50\u8282\u70B9,\u518D\u904D\u5386\u5B50\u8282\u70B9;\n      for (let i = 0; i < node.children.length; i++) {\n        context.parent = node\n        traverse(node.children[i] as ParseNode, context)\n      }\n  }\n\n  context.currentnode = node;//\u5F53\u6267\u884C\u9000\u51FA\u51FD\u6570\u7684\u65F6\u5019,\u4FDD\u5B58currentNode\u6307\u5411\u4F9D\u65E7\u662F\u5BF9\u7684;\n  let i = exitsFns.length\n  while (i--) {//\u4E0Etransforms[i](node, context)\u76F8\u53CD,\u540E\u8FDB\u5148\u6267\u884C;\n    exitsFns[i]()\n  }\n}\n\n//\u5BF9\u6839\u8282\u70B9\u5982\u679C\u6709\u4E24\u4E2A\u5B50\u8282\u70B9,\u5219\u5305\u4E00\u5C42;\nfunction createRootCodegen(ast: ParseNode, context: TransformContext) {\n  const { children } = ast\n  if (children.length === 1) {\n    const child = children[0]\n    //\u5982\u679C\u662F\u5143\u7D20,\u8FD8\u6709\u53EF\u80FD\u5C31\u662F\u4E00\u4E2A\u6587\u672C;\n    if (child.type === NodeTypes.ELEMENT && child.codegenNode) {\n      ast.codegenNode = child.codegenNode\n\n      //\u4E0D\u518D\u8C03\u7528createElementVnode;//\u8C03\u7528\u7684\u662FopenBlock createElementBlock;\n      context.removeHelper(CREATE_ELEMENT_VNODE);\n      context.helper(OPEN_BLOCK);\n      context.helper(CREATE_ELEMENT_BLOCK);\n\n      ; (ast.codegenNode as ElementCodegenNode).isBlock = true;//\u53EA\u6709\u4E00\u4E2A\u5143\u7D20,\u90A3\u4E48\u5F53\u524D\u5143\u7D20\u662F\u4E00\u4E2Ablock\u8282\u70B9,\u5E76\u4E14\u4F7F\u7528\u7684\u662FcreateElementBlock;\n\n\n    } else {\n      ast.codegenNode = child.codegenNode\n    }\n  } else {\n    ast.codegenNode = createVnodeCall(context, context.helper(FRAGMENT), null, children)\n    context.helper(OPEN_BLOCK);\n    context.helper(CREATE_ELEMENT_BLOCK);\n    ast.codegenNode.isBlock = true;\n  }\n}\nexport function transform(ast: ParseNode) {\n  //\u5BF9\u6811\u8FDB\u884C\u904D\u5386\u64CD\u4F5C;\n  const context = createTransformContext(ast)\n  traverse(ast, context)\n\n  createRootCodegen(ast, context)\n  ast.helpers = [...context.helpers.keys()]\n  // console.log('ast.helpers--->', ast.helpers)\n\n  //\u6839\u636E\u6B64ast\u751F\u6210\u4EE3\u7801 \u9776\u5411\u66F4\u65B0;\n\n}"],
  "mappings": "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",
  "names": []
}
